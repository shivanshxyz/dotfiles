var UrlUtil={_EXTENSION_VIEWER_URL:"chrome-extension://cbnaodkpfinfiipjblikofhlhlcickei/src/webviewer/gistnoteWebViewer.html?url=",_onboardingPages:["localhost:3000/app/onboarding","localhost:3000/onboarding","localhost:4200/app/onboarding","www.weavatools.com/app/onboarding","dev.weavatools.com/app/onboarding","testing.weavatools.com/app/onboarding","testing.weavatools.com/onboarding","staging.weavatools.com/app/onboarding"],_WEBAPP:"&webapp=true",EXTENSION_PDF_VIEWER_URL:"chrome-extension://cbnaodkpfinfiipjblikofhlhlcickei/src/pdfviewer/web/viewer.html?file=",buildMatchString:function(e,t){var n=purl(e),i=n.attr("host");if(t||(t={scheme:!0,query:!0,fragment:!1}),t.scheme&&t.query&&t.fragment)return e;var r=n.attr("port"),o=n.attr("query"),s=n.attr("fragment"),a=t.scheme?n.attr("protocol")+"://":"";return a+=i,r&&0!==r.length&&(a+=":"+r),a+=n.attr("path"),t.query&&o&&0!==o.length&&(a+="?"+o),!t.query&&t.firstQueryOnly&&0!==o.length&&(a+="?"+o.split("&")[0]),t.fragment&&s&&0!==s.length&&(a+="#"+s),a},getOriginalUrl:function(e){if(!e)return e;var t=e.split(this._EXTENSION_VIEWER_URL).pop();return-1!==t.indexOf("washingtonpost")?this.buildMatchString(t,{scheme:!0,query:!1,fragment:!1}):-1===t.indexOf("chrome-extension://")?this.buildMatchString(t,{scheme:!0,query:!1,firstQueryOnly:!0,fragment:!1}):this.buildMatchString(t)},getOriginalUrlForPDF:function(e){if(!e)return e;var t=this.getOriginalUrl(e);if(0!==t.indexOf(this.EXTENSION_PDF_VIEWER_URL))return t;var n=new URL(t).searchParams.get("file");if(0<t.indexOf(this._WEBAPP)&&0!==n.length&&-1!==n.indexOf("weavatools.com")&&-1!==n.indexOf("pdfstorage"))return this.EXTENSION_PDF_VIEWER_URL+n.split("?token")[0];if(/file:[\/]+/i.test(t)){var i=t.split("?file=")[1].replace("&webapp=true","");if(n.length<i.length)return this.EXTENSION_PDF_VIEWER_URL+i}return this.EXTENSION_PDF_VIEWER_URL+n},isOnboardingPage:function(e){for(var t=this.buildMatchString(e,{scheme:!1,query:!0,fragment:!1}),n=0;n<this._onboardingPages.length;n++){var i=this._onboardingPages[n];if(0===t.indexOf(i))return!0}return!1}};!function(e,t){var n,i;"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("underscore",t):(n=e._,i=t(),(e._=i).noConflict=function(){return e._=n,i})}(this,function(){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},i=Array.prototype,s=Object.prototype,d="undefined"!=typeof Symbol?Symbol.prototype:null,r=i.push,l=i.slice,f=s.toString,o=s.hasOwnProperty,t=Array.isArray,a=Object.keys,n=Object.create,c=e.isNaN,u=e.isFinite,h=function(){};function p(e){return e instanceof p?e:this instanceof p?void(this._wrapped=e):new p(e)}var g=p.VERSION="1.10.2";function _(r,o,e){if(void 0===o)return r;switch(null==e?3:e){case 1:return function(e){return r.call(o,e)};case 3:return function(e,t,n){return r.call(o,e,t,n)};case 4:return function(e,t,n,i){return r.call(o,e,t,n,i)}}return function(){return r.apply(o,arguments)}}function m(e,t,n){return null==e?nt:We(e)?_(e,t,n):Fe(e)&&!Ue(e)?rt(e):it(e)}function v(e,t){return m(e,t,1/0)}function S(e,t,n){return p.iteratee!==v?p.iteratee(e,t):m(e,t,n)}function E(r,o){return o=null==o?r.length-1:+o,function(){for(var e=Math.max(arguments.length-o,0),t=Array(e),n=0;n<e;n++)t[n]=arguments[n+o];switch(o){case 0:return r.call(this,t);case 1:return r.call(this,arguments[0],t);case 2:return r.call(this,arguments[0],arguments[1],t)}var i=Array(o+1);for(n=0;n<o;n++)i[n]=arguments[n];return i[o]=t,r.apply(this,i)}}function y(e){if(!Fe(e))return{};if(n)return n(e);h.prototype=e;var t=new h;return h.prototype=null,t}function b(t){return function(e){return null==e?void 0:e[t]}}function T(e,t){return null!=e&&o.call(e,t)}function A(e,t){for(var n=t.length,i=0;i<n;i++){if(null==e)return;e=e[t[i]]}return n?e:void 0}p.iteratee=v;var O=Math.pow(2,53)-1,C=b("length");function I(e){var t=C(e);return"number"==typeof t&&0<=t&&t<=O}function w(e,t,n){var i,r;if(t=_(t,n),I(e))for(i=0,r=e.length;i<r;i++)t(e[i],i,e);else{var o=Te(e);for(i=0,r=o.length;i<r;i++)t(e[o[i]],o[i],e)}return e}function D(e,t,n){t=S(t,n);for(var i=!I(e)&&Te(e),r=(i||e).length,o=Array(r),s=0;s<r;s++){var a=i?i[s]:s;o[s]=t(e[a],a,e)}return o}function M(l){return function(e,t,n,i){var r=3<=arguments.length;return function(e,t,n,i){var r=!I(e)&&Te(e),o=(r||e).length,s=0<l?0:o-1;for(i||(n=e[r?r[s]:s],s+=l);0<=s&&s<o;s+=l){var a=r?r[s]:s;n=t(n,e[a],a,e)}return n}(e,_(t,i,4),n,r)}}var N=M(1),R=M(-1);function L(e,t,n){var i=(I(e)?oe:Ne)(e,t,n);if(void 0!==i&&-1!==i)return e[i]}function x(e,i,t){var r=[];return i=S(i,t),w(e,function(e,t,n){i(e,t,n)&&r.push(e)}),r}function H(e,t,n){t=S(t,n);for(var i=!I(e)&&Te(e),r=(i||e).length,o=0;o<r;o++){var s=i?i[o]:o;if(!t(e[s],s,e))return!1}return!0}function P(e,t,n){t=S(t,n);for(var i=!I(e)&&Te(e),r=(i||e).length,o=0;o<r;o++){var s=i?i[o]:o;if(t(e[s],s,e))return!0}return!1}function k(e,t,n,i){return I(e)||(e=Oe(e)),("number"!=typeof n||i)&&(n=0),0<=ce(e,t,n)}var G=E(function(e,n,i){var r,o;return We(n)?o=n:Ue(n)&&(r=n.slice(0,-1),n=n[n.length-1]),D(e,function(e){var t=o;if(!t){if(r&&r.length&&(e=A(e,r)),null==e)return;t=e[n]}return null==t?t:t.apply(e,i)})});function U(e,t){return D(e,it(t))}function F(e,i,t){var n,r,o=-1/0,s=-1/0;if(null==i||"number"==typeof i&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=I(e)?e:Oe(e)).length;a<l;a++)null!=(n=e[a])&&o<n&&(o=n);else i=S(i,t),w(e,function(e,t,n){r=i(e,t,n),(s<r||r===-1/0&&o===-1/0)&&(o=e,s=r)});return o}function B(e,t,n){if(null==t||n)return I(e)||(e=Oe(e)),e[ot(e.length-1)];var i=I(e)?Pe(e):Oe(e),r=C(i);t=Math.max(Math.min(t,r),0);for(var o=r-1,s=0;s<t;s++){var a=ot(s,o),l=i[s];i[s]=i[a],i[a]=l}return i.slice(0,t)}function W(s,t){return function(i,r,e){var o=t?[[],[]]:{};return r=S(r,e),w(i,function(e,t){var n=r(e,t,i);s(o,e,n)}),o}}var j=W(function(e,t,n){T(e,n)?e[n].push(t):e[n]=[t]}),V=W(function(e,t,n){e[n]=t}),$=W(function(e,t,n){T(e,n)?e[n]++:e[n]=1}),q=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g,Y=W(function(e,t,n){e[n?0:1].push(t)},!0);function K(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:X(e,e.length-t)}function X(e,t,n){return l.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function z(e,t,n){return l.call(e,null==t||n?1:t)}function Q(e,t,n,i){for(var r=(i=i||[]).length,o=0,s=C(e);o<s;o++){var a=e[o];if(I(a)&&(Ue(a)||Be(a)))if(t)for(var l=0,c=a.length;l<c;)i[r++]=a[l++];else Q(a,t,n,i),r=i.length;else n||(i[r++]=a)}return i}var J=E(function(e,t){return te(e,t)});function Z(e,t,n,i){tt(t)||(i=n,n=t,t=!1),null!=n&&(n=S(n,i));for(var r=[],o=[],s=0,a=C(e);s<a;s++){var l=e[s],c=n?n(l,s,e):l;t&&!n?(s&&o===c||r.push(l),o=c):n?k(o,c)||(o.push(c),r.push(l)):k(r,l)||r.push(l)}return r}var ee=E(function(e){return Z(Q(e,!0,!0))}),te=E(function(e,t){return t=Q(t,!0,!0),x(e,function(e){return!k(t,e)})});function ne(e){for(var t=e&&F(e,C).length||0,n=Array(t),i=0;i<t;i++)n[i]=U(e,i);return n}var ie=E(ne);function re(o){return function(e,t,n){t=S(t,n);for(var i=C(e),r=0<o?0:i-1;0<=r&&r<i;r+=o)if(t(e[r],r,e))return r;return-1}}var oe=re(1),se=re(-1);function ae(e,t,n,i){for(var r=(n=S(n,i,1))(t),o=0,s=C(e);o<s;){var a=Math.floor((o+s)/2);n(e[a])<r?o=a+1:s=a}return o}function le(o,s,a){return function(e,t,n){var i=0,r=C(e);if("number"==typeof n)0<o?i=0<=n?n:Math.max(n+r,i):r=0<=n?Math.min(n+1,r):n+r+1;else if(a&&n&&r)return e[n=a(e,t)]===t?n:-1;if(t!=t)return 0<=(n=s(l.call(e,i,r),et))?n+i:-1;for(n=0<o?i:r-1;0<=n&&n<r;n+=o)if(e[n]===t)return n;return-1}}var ce=le(1,oe,ae),ue=le(-1,se);function he(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var o=y(e.prototype),s=e.apply(o,r);return Fe(s)?s:o}var de=E(function(t,n,i){if(!We(t))throw new TypeError("Bind must be called on a function");var r=E(function(e){return he(t,r,n,this,i.concat(e))});return r}),fe=E(function(r,o){var s=fe.placeholder,a=function(){for(var e=0,t=o.length,n=Array(t),i=0;i<t;i++)n[i]=o[i]===s?arguments[e++]:o[i];for(;e<arguments.length;)n.push(arguments[e++]);return he(r,a,this,this,n)};return a});fe.placeholder=p;var pe=E(function(e,t){var n=(t=Q(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=de(e[i],e)}}),ge=E(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),_e=fe(ge,p,1);function me(e){return function(){return!e.apply(this,arguments)}}function ve(e,t){var n;return function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}var Se=fe(ve,2),Ee=!{toString:null}.propertyIsEnumerable("toString"),ye=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function be(e,t){var n=ye.length,i=e.constructor,r=We(i)&&i.prototype||s,o="constructor";for(T(e,o)&&!k(t,o)&&t.push(o);n--;)(o=ye[n])in e&&e[o]!==r[o]&&!k(t,o)&&t.push(o)}function Te(e){if(!Fe(e))return[];if(a)return a(e);var t=[];for(var n in e)T(e,n)&&t.push(n);return Ee&&be(e,t),t}function Ae(e){if(!Fe(e))return[];var t=[];for(var n in e)t.push(n);return Ee&&be(e,t),t}function Oe(e){for(var t=Te(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=e[t[r]];return i}function Ce(e){for(var t={},n=Te(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t}function Ie(e){var t=[];for(var n in e)We(e[n])&&t.push(n);return t.sort()}function we(l,c){return function(e){var t=arguments.length;if(c&&(e=Object(e)),t<2||null==e)return e;for(var n=1;n<t;n++)for(var i=arguments[n],r=l(i),o=r.length,s=0;s<o;s++){var a=r[s];c&&void 0!==e[a]||(e[a]=i[a])}return e}}var De=we(Ae),Me=we(Te);function Ne(e,t,n){t=S(t,n);for(var i,r=Te(e),o=0,s=r.length;o<s;o++)if(t(e[i=r[o]],i,e))return i}function Re(e,t,n){return t in n}var Le=E(function(e,t){var n={},i=t[0];if(null==e)return n;We(i)?(1<t.length&&(i=_(i,t[1])),t=Ae(e)):(i=Re,t=Q(t,!1,!1),e=Object(e));for(var r=0,o=t.length;r<o;r++){var s=t[r],a=e[s];i(a,s,e)&&(n[s]=a)}return n}),xe=E(function(e,n){var t,i=n[0];return We(i)?(i=me(i),1<n.length&&(t=n[1])):(n=D(Q(n,!1,!1),String),i=function(e,t){return!k(n,t)}),Le(e,i,t)}),He=we(Ae,!0);function Pe(e){return Fe(e)?Ue(e)?e.slice():De({},e):e}function ke(e,t){var n=Te(t),i=n.length;if(null==e)return!i;for(var r=Object(e),o=0;o<i;o++){var s=n[o];if(t[s]!==r[s]||!(s in r))return!1}return!0}function Ge(t){return function(e){return f.call(e)==="[object "+t+"]"}}var Ue=t||Ge("Array");function Fe(e){var t=typeof e;return"function"===t||"object"===t&&!!e}var Be=Ge("Arguments"),We=Ge("Function"),je=Ge("String"),Ve=Ge("Number"),$e=Ge("Date"),qe=Ge("RegExp"),Ye=Ge("Error"),Ke=Ge("Symbol"),Xe=Ge("Map"),ze=Ge("WeakMap"),Qe=Ge("Set"),Je=Ge("WeakSet");!function(){Be(arguments)||(Be=function(e){return T(e,"callee")})}();var Ze=e.document&&e.document.childNodes;function et(e){return Ve(e)&&c(e)}function tt(e){return!0===e||!1===e||"[object Boolean]"===f.call(e)}function nt(e){return e}function it(t){return Ue(t)?function(e){return A(e,t)}:b(t)}function rt(t){return t=Me({},t),function(e){return ke(e,t)}}function ot(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof Ze&&(We=function(e){return"function"==typeof e||!1});var st=Date.now||function(){return(new Date).getTime()},at={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},lt=Ce(at);function ct(t){var n=function(e){return t[e]},e="(?:"+Te(t).join("|")+")",i=RegExp(e),r=RegExp(e,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,n):e}}var ut=ct(at),ht=ct(lt),dt=0,ft=p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},pt=/(.)^/,gt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},_t=/\\|'|\r|\n|\u2028|\u2029/g,mt=function(e){return"\\"+gt[e]};function vt(e,t){return e._chain?p(t).chain():t}function St(n){return w(Ie(n),function(e){var t=p[e]=n[e];p.prototype[e]=function(){var e=[this._wrapped];return r.apply(e,arguments),vt(this,t.apply(p,e))}}),p}w(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=i[t];p.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0],vt(this,e)}}),w(["concat","join","slice"],function(e){var t=i[e];p.prototype[e]=function(){return vt(this,t.apply(this._wrapped,arguments))}}),p.prototype.valueOf=p.prototype.toJSON=p.prototype.value=function(){return this._wrapped},p.prototype.toString=function(){return String(this._wrapped)};var Et=St({default:p,VERSION:g,iteratee:v,restArguments:E,each:w,forEach:w,map:D,collect:D,reduce:N,foldl:N,inject:N,reduceRight:R,foldr:R,find:L,detect:L,filter:x,select:x,reject:function(e,t,n){return x(e,me(S(t)),n)},every:H,all:H,some:P,any:P,contains:k,includes:k,include:k,invoke:G,pluck:U,where:function(e,t){return x(e,rt(t))},findWhere:function(e,t){return L(e,rt(t))},max:F,min:function(e,i,t){var n,r,o=1/0,s=1/0;if(null==i||"number"==typeof i&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=I(e)?e:Oe(e)).length;a<l;a++)null!=(n=e[a])&&n<o&&(o=n);else i=S(i,t),w(e,function(e,t,n){((r=i(e,t,n))<s||r===1/0&&o===1/0)&&(o=e,s=r)});return o},shuffle:function(e){return B(e,1/0)},sample:B,sortBy:function(e,i,t){var r=0;return i=S(i,t),U(D(e,function(e,t,n){return{value:e,index:r++,criteria:i(e,t,n)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(i<n||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index}),"value")},groupBy:j,indexBy:V,countBy:$,toArray:function(e){return e?Ue(e)?l.call(e):je(e)?e.match(q):I(e)?D(e,nt):Oe(e):[]},size:function(e){return null==e?0:I(e)?e.length:Te(e).length},partition:Y,first:K,head:K,take:K,initial:X,last:function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:z(e,Math.max(0,e.length-t))},rest:z,tail:z,drop:z,compact:function(e){return x(e,Boolean)},flatten:function(e,t){return Q(e,t,!1)},without:J,uniq:Z,unique:Z,union:ee,intersection:function(e){for(var t=[],n=arguments.length,i=0,r=C(e);i<r;i++){var o=e[i];if(!k(t,o)){var s;for(s=1;s<n&&k(arguments[s],o);s++);s===n&&t.push(o)}}return t},difference:te,unzip:ne,zip:ie,object:function(e,t){for(var n={},i=0,r=C(e);i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},findIndex:oe,findLastIndex:se,sortedIndex:ae,indexOf:ce,lastIndexOf:ue,range:function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),o=0;o<i;o++,e+=n)r[o]=e;return r},chunk:function(e,t){if(null==t||t<1)return[];for(var n=[],i=0,r=e.length;i<r;)n.push(l.call(e,i,i+=t));return n},bind:de,partial:fe,bindAll:pe,memoize:function(i,r){var o=function(e){var t=o.cache,n=""+(r?r.apply(this,arguments):e);return T(t,n)||(t[n]=i.apply(this,arguments)),t[n]};return o.cache={},o},delay:ge,defer:_e,throttle:function(n,i,r){var o,s,a,l,c=0;r||(r={});var u=function(){c=!1===r.leading?0:st(),o=null,l=n.apply(s,a),o||(s=a=null)},e=function(){var e=st();c||!1!==r.leading||(c=e);var t=i-(e-c);return s=this,a=arguments,t<=0||i<t?(o&&(clearTimeout(o),o=null),c=e,l=n.apply(s,a),o||(s=a=null)):o||!1===r.trailing||(o=setTimeout(u,t)),l};return e.cancel=function(){clearTimeout(o),c=0,o=s=a=null},e},debounce:function(n,i,r){var o,s,a=function(e,t){o=null,t&&(s=n.apply(e,t))},e=E(function(e){if(o&&clearTimeout(o),r){var t=!o;o=setTimeout(a,i),t&&(s=n.apply(this,e))}else o=ge(a,i,this,e);return s});return e.cancel=function(){clearTimeout(o),o=null},e},wrap:function(e,t){return fe(t,e)},negate:me,compose:function(){var n=arguments,i=n.length-1;return function(){for(var e=i,t=n[i].apply(this,arguments);e--;)t=n[e].call(this,t);return t}},after:function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},before:ve,once:Se,keys:Te,allKeys:Ae,values:Oe,mapObject:function(e,t,n){t=S(t,n);for(var i=Te(e),r=i.length,o={},s=0;s<r;s++){var a=i[s];o[a]=t(e[a],a,e)}return o},pairs:function(e){for(var t=Te(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=[t[r],e[t[r]]];return i},invert:Ce,functions:Ie,methods:Ie,extend:De,extendOwn:Me,assign:Me,findKey:Ne,pick:Le,omit:xe,defaults:He,create:function(e,t){var n=y(e);return t&&Me(n,t),n},clone:Pe,tap:function(e,t){return t(e),e},isMatch:ke,isEqual:function(e,t){return function h(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var r=typeof e;return("function"===r||"object"===r||"object"==typeof t)&&function(e,t,n,i){e instanceof p&&(e=e._wrapped),t instanceof p&&(t=t._wrapped);var r=f.call(e);if(r!==f.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return d.valueOf.call(e)===d.valueOf.call(t)}var o="[object Array]"===r;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(We(s)&&s instanceof s&&We(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),o){if((l=e.length)!==t.length)return!1;for(;l--;)if(!h(e[l],t[l],n,i))return!1}else{var c,u=Te(e);if(l=u.length,Te(t).length!==l)return!1;for(;l--;)if(!T(t,c=u[l])||!h(e[c],t[c],n,i))return!1}return n.pop(),i.pop(),!0}(e,t,n,i)}(e,t)},isEmpty:function(e){return null==e||(I(e)&&(Ue(e)||je(e)||Be(e))?0===e.length:0===Te(e).length)},isElement:function(e){return!(!e||1!==e.nodeType)},isArray:Ue,isObject:Fe,isArguments:Be,isFunction:We,isString:je,isNumber:Ve,isDate:$e,isRegExp:qe,isError:Ye,isSymbol:Ke,isMap:Xe,isWeakMap:ze,isSet:Qe,isWeakSet:Je,isFinite:function(e){return!Ke(e)&&u(e)&&!c(parseFloat(e))},isNaN:et,isBoolean:tt,isNull:function(e){return null===e},isUndefined:function(e){return void 0===e},has:function(e,t){if(!Ue(t))return T(e,t);for(var n=t.length,i=0;i<n;i++){var r=t[i];if(null==e||!o.call(e,r))return!1;e=e[r]}return!!n},identity:nt,constant:function(e){return function(){return e}},noop:function(){},property:it,propertyOf:function(t){return null==t?function(){}:function(e){return Ue(e)?A(t,e):t[e]}},matcher:rt,matches:rt,times:function(e,t,n){var i=Array(Math.max(0,e));t=_(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i},random:ot,now:st,escape:ut,unescape:ht,result:function(e,t,n){Ue(t)||(t=[t]);var i=t.length;if(!i)return We(n)?n.call(e):n;for(var r=0;r<i;r++){var o=null==e?void 0:e[t[r]];void 0===o&&(o=n,r=i),e=We(o)?o.call(e):o}return e},uniqueId:function(e){var t=++dt+"";return e?e+t:t},templateSettings:ft,template:function(o,e,t){!e&&t&&(e=t),e=He({},e,p.templateSettings);var n,i=RegExp([(e.escape||pt).source,(e.interpolate||pt).source,(e.evaluate||pt).source].join("|")+"|$","g"),s=0,a="__p+='";o.replace(i,function(e,t,n,i,r){return a+=o.slice(s,r).replace(_t,mt),s=r+e.length,t?a+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":n?a+="'+\n((__t=("+n+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{n=new Function(e.variable||"obj","_",a)}catch(e){throw e.source=a,e}var r=function(e){return n.call(this,e,p)},l=e.variable||"obj";return r.source="function("+l+"){\n"+a+"}",r},chain:function(e){var t=p(e);return t._chain=!0,t},mixin:St});return Et._=Et}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(T,e){var t=[],A=T.document,u=t.slice,g=t.concat,a=t.push,r=t.indexOf,n={},i=n.toString,p=n.hasOwnProperty,_={},O=function(e,t){return new O.fn.init(e,t)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,s=/^-ms-/,l=/-([\da-z])/gi,c=function(e,t){return t.toUpperCase()};function h(e){var t=!!e&&"length"in e&&e.length,n=O.type(e);return"function"!==n&&!O.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}O.fn=O.prototype={jquery:"2.2.4",constructor:O,selector:"",length:0,toArray:function(){return u.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:u.call(this)},pushStack:function(e){var t=O.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return O.each(this,e)},map:function(n){return this.pushStack(O.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:t.sort,splice:t.splice},O.extend=O.fn.extend=function(){var e,t,n,i,r,o,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||O.isFunction(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],s!==(i=e[t])&&(c&&i&&(O.isPlainObject(i)||(r=O.isArray(i)))?(o=r?(r=!1,n&&O.isArray(n)?n:[]):n&&O.isPlainObject(n)?n:{},s[t]=O.extend(c,o,i)):void 0!==i&&(s[t]=i));return s},O.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===O.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!O.isArray(e)&&0<=t-parseFloat(t)+1},isPlainObject:function(e){var t;if("object"!==O.type(e)||e.nodeType||O.isWindow(e))return!1;if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||p.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[i.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=O.trim(e))&&(1===e.indexOf("use strict")?((t=A.createElement("script")).text=e,A.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(s,"ms-").replace(l,c)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(h(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(o,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(h(Object(e))?O.merge(n,"string"==typeof e?[e]:e):a.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:r.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,o=e.length,s=!n;r<o;r++)!t(e[r],r)!==s&&i.push(e[r]);return i},map:function(e,t,n){var i,r,o=0,s=[];if(h(e))for(i=e.length;o<i;o++)null!=(r=t(e[o],o,n))&&s.push(r);else for(o in e)null!=(r=t(e[o],o,n))&&s.push(r);return g.apply([],s)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(n=e[t],t=e,e=n),O.isFunction(e)?(i=u.call(arguments,2),(r=function(){return e.apply(t||this,i.concat(u.call(arguments)))}).guid=e.guid=e.guid||O.guid++,r):void 0},now:Date.now,support:_}),"function"==typeof Symbol&&(O.fn[Symbol.iterator]=t[Symbol.iterator]),O.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,p,E,o,r,g,h,_,y,l,c,b,T,s,A,m,a,u,v,O="sizzle"+1*new Date,S=n.document,C=0,i=0,d=re(),f=re(),I=re(),w=function(e,t){return e===t&&(c=!0),0},D={}.hasOwnProperty,t=[],M=t.pop,N=t.push,R=t.push,L=t.slice,x=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},H="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="[\\x20\\t\\r\\n\\f]",k="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",G="\\["+P+"*("+k+")(?:"+P+"*([*^$|!~]?=)"+P+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+k+"))|)"+P+"*\\]",U=":("+k+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+G+")*)|.*)\\)|)",F=new RegExp(P+"+","g"),B=new RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g"),W=new RegExp("^"+P+"*,"+P+"*"),j=new RegExp("^"+P+"*([>+~]|"+P+")"+P+"*"),V=new RegExp("="+P+"*([^\\]'\"]*?)"+P+"*\\]","g"),$=new RegExp(U),q=new RegExp("^"+k+"$"),Y={ID:new RegExp("^#("+k+")"),CLASS:new RegExp("^\\.("+k+")"),TAG:new RegExp("^("+k+"|[*])"),ATTR:new RegExp("^"+G),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),bool:new RegExp("^(?:"+H+")$","i"),needsContext:new RegExp("^"+P+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Z=/'|\\/g,ee=new RegExp("\\\\([\\da-f]{1,6}"+P+"?|("+P+")|.)","ig"),te=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ne=function(){b()};try{R.apply(t=L.call(S.childNodes),S.childNodes),t[S.childNodes.length].nodeType}catch(e){R={apply:t.length?function(e,t){N.apply(e,L.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function ie(e,t,n,i){var r,o,s,a,l,c,u,h,d=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!i&&((t?t.ownerDocument||t:S)!==T&&b(t),t=t||T,A)){if(11!==f&&(c=Q.exec(e)))if(r=c[1]){if(9===f){if(!(s=t.getElementById(r)))return n;if(s.id===r)return n.push(s),n}else if(d&&(s=d.getElementById(r))&&v(t,s)&&s.id===r)return n.push(s),n}else{if(c[2])return R.apply(n,t.getElementsByTagName(e)),n;if((r=c[3])&&p.getElementsByClassName&&t.getElementsByClassName)return R.apply(n,t.getElementsByClassName(r)),n}if(p.qsa&&!I[e+" "]&&(!m||!m.test(e))){if(1!==f)d=t,h=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(Z,"\\$&"):t.setAttribute("id",a=O),o=(u=g(e)).length,l=q.test(a)?"#"+a:"[id='"+a+"']";o--;)u[o]=l+" "+pe(u[o]);h=u.join(","),d=J.test(e)&&de(t.parentNode)||t}if(h)try{return R.apply(n,d.querySelectorAll(h)),n}catch(e){}finally{a===O&&t.removeAttribute("id")}}}return _(e.replace(B,"$1"),t,n,i)}function re(){var i=[];return function e(t,n){return i.push(t+" ")>E.cacheLength&&delete e[i.shift()],e[t+" "]=n}}function oe(e){return e[O]=!0,e}function se(e){var t=T.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ae(e,t){for(var n=e.split("|"),i=n.length;i--;)E.attrHandle[n[i]]=t}function le(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ce(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ue(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function he(s){return oe(function(o){return o=+o,oe(function(e,t){for(var n,i=s([],e.length,o),r=i.length;r--;)e[n=i[r]]&&(e[n]=!(t[n]=e[n]))})})}function de(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in p=ie.support={},r=ie.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},b=ie.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:S;return i!==T&&9===i.nodeType&&i.documentElement&&(s=(T=i).documentElement,A=!r(T),(n=T.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ne,!1):n.attachEvent&&n.attachEvent("onunload",ne)),p.attributes=se(function(e){return e.className="i",!e.getAttribute("className")}),p.getElementsByTagName=se(function(e){return e.appendChild(T.createComment("")),!e.getElementsByTagName("*").length}),p.getElementsByClassName=z.test(T.getElementsByClassName),p.getById=se(function(e){return s.appendChild(e).id=O,!T.getElementsByName||!T.getElementsByName(O).length}),p.getById?(E.find.ID=function(e,t){if(void 0!==t.getElementById&&A){var n=t.getElementById(e);return n?[n]:[]}},E.filter.ID=function(e){var t=e.replace(ee,te);return function(e){return e.getAttribute("id")===t}}):(delete E.find.ID,E.filter.ID=function(e){var n=e.replace(ee,te);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}}),E.find.TAG=p.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):p.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;n=o[r++];)1===n.nodeType&&i.push(n);return i},E.find.CLASS=p.getElementsByClassName&&function(e,t){return void 0!==t.getElementsByClassName&&A?t.getElementsByClassName(e):void 0},a=[],m=[],(p.qsa=z.test(T.querySelectorAll))&&(se(function(e){s.appendChild(e).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+P+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+P+"*(?:value|"+H+")"),e.querySelectorAll("[id~="+O+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+O+"+*").length||m.push(".#.+[+~]")}),se(function(e){var t=T.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+P+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(p.matchesSelector=z.test(u=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&se(function(e){p.disconnectedMatch=u.call(e,"div"),u.call(e,"[s!='']:x"),a.push("!=",U)}),m=m.length&&new RegExp(m.join("|")),a=a.length&&new RegExp(a.join("|")),t=z.test(s.compareDocumentPosition),v=t||z.test(s.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},w=t?function(e,t){if(e===t)return c=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!p.sortDetached&&t.compareDocumentPosition(e)===n?e===T||e.ownerDocument===S&&v(S,e)?-1:t===T||t.ownerDocument===S&&v(S,t)?1:l?x(l,e)-x(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!r||!o)return e===T?-1:t===T?1:r?-1:o?1:l?x(l,e)-x(l,t):0;if(r===o)return le(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?le(s[i],a[i]):s[i]===S?-1:a[i]===S?1:0}),T},ie.matches=function(e,t){return ie(e,null,null,t)},ie.matchesSelector=function(e,t){if((e.ownerDocument||e)!==T&&b(e),t=t.replace(V,"='$1']"),p.matchesSelector&&A&&!I[t+" "]&&(!a||!a.test(t))&&(!m||!m.test(t)))try{var n=u.call(e,t);if(n||p.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<ie(t,T,null,[e]).length},ie.contains=function(e,t){return(e.ownerDocument||e)!==T&&b(e),v(e,t)},ie.attr=function(e,t){(e.ownerDocument||e)!==T&&b(e);var n=E.attrHandle[t.toLowerCase()],i=n&&D.call(E.attrHandle,t.toLowerCase())?n(e,t,!A):void 0;return void 0!==i?i:p.attributes||!A?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},ie.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ie.uniqueSort=function(e){var t,n=[],i=0,r=0;if(c=!p.detectDuplicates,l=!p.sortStable&&e.slice(0),e.sort(w),c){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return l=null,e},o=ie.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},(E=ie.selectors={cacheLength:50,createPseudo:oe,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ee,te),e[3]=(e[3]||e[4]||e[5]||"").replace(ee,te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ie.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ie.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=g(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ee,te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=d[e+" "];return t||(t=new RegExp("(^|"+P+")"+e+"("+P+"|$)"))&&d(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(e){var t=ie.attr(e,n);return null==t?"!="===i:!i||(t+="","="===i?t===r:"!="===i?t!==r:"^="===i?r&&0===t.indexOf(r):"*="===i?r&&-1<t.indexOf(r):"$="===i?r&&t.slice(-r.length)===r:"~="===i?-1<(" "+t.replace(F," ")+" ").indexOf(r):"|="===i&&(t===r||t.slice(0,r.length+1)===r+"-"))}},CHILD:function(p,e,t,g,_){var m="nth"!==p.slice(0,3),v="last"!==p.slice(-4),S="of-type"===e;return 1===g&&0===_?function(e){return!!e.parentNode}:function(e,t,n){var i,r,o,s,a,l,c=m!==v?"nextSibling":"previousSibling",u=e.parentNode,h=S&&e.nodeName.toLowerCase(),d=!n&&!S,f=!1;if(u){if(m){for(;c;){for(s=e;s=s[c];)if(S?s.nodeName.toLowerCase()===h:1===s.nodeType)return!1;l=c="only"===p&&!l&&"nextSibling"}return!0}if(l=[v?u.firstChild:u.lastChild],v&&d){for(f=(a=(i=(r=(o=(s=u)[O]||(s[O]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]||[])[0]===C&&i[1])&&i[2],s=a&&u.childNodes[a];s=++a&&s&&s[c]||(f=a=0)||l.pop();)if(1===s.nodeType&&++f&&s===e){r[p]=[C,a,f];break}}else if(d&&(f=a=(i=(r=(o=(s=e)[O]||(s[O]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]||[])[0]===C&&i[1]),!1===f)for(;(s=++a&&s&&s[c]||(f=a=0)||l.pop())&&((S?s.nodeName.toLowerCase()!==h:1!==s.nodeType)||!++f||(d&&((r=(o=s[O]||(s[O]={}))[s.uniqueID]||(o[s.uniqueID]={}))[p]=[C,f]),s!==e)););return(f-=_)===g||f%g==0&&0<=f/g}}},PSEUDO:function(e,o){var t,s=E.pseudos[e]||E.setFilters[e.toLowerCase()]||ie.error("unsupported pseudo: "+e);return s[O]?s(o):1<s.length?(t=[e,e,"",o],E.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,t){for(var n,i=s(e,o),r=i.length;r--;)e[n=x(e,i[r])]=!(t[n]=i[r])}):function(e){return s(e,0,t)}):s}},pseudos:{not:oe(function(e){var i=[],r=[],a=h(e.replace(B,"$1"));return a[O]?oe(function(e,t,n,i){for(var r,o=a(e,null,i,[]),s=e.length;s--;)(r=o[s])&&(e[s]=!(t[s]=r))}):function(e,t,n){return i[0]=e,a(i,null,n,r),i[0]=null,!r.pop()}}),has:oe(function(t){return function(e){return 0<ie(t,e).length}}),contains:oe(function(t){return t=t.replace(ee,te),function(e){return-1<(e.textContent||e.innerText||o(e)).indexOf(t)}}),lang:oe(function(n){return q.test(n||"")||ie.error("unsupported lang: "+n),n=n.replace(ee,te).toLowerCase(),function(e){var t;do{if(t=A?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===s},focus:function(e){return e===T.activeElement&&(!T.hasFocus||T.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!E.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[n<0?n+t:n]}),even:he(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var i=n<0?n+t:n;0<=--i;)e.push(i);return e}),gt:he(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=E.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[e]=ce(e);for(e in{submit:!0,reset:!0})E.pseudos[e]=ue(e);function fe(){}function pe(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function ge(a,e,t){var l=e.dir,c=t&&"parentNode"===l,u=i++;return e.first?function(e,t,n){for(;e=e[l];)if(1===e.nodeType||c)return a(e,t,n)}:function(e,t,n){var i,r,o,s=[C,u];if(n){for(;e=e[l];)if((1===e.nodeType||c)&&a(e,t,n))return!0}else for(;e=e[l];)if(1===e.nodeType||c){if((i=(r=(o=e[O]||(e[O]={}))[e.uniqueID]||(o[e.uniqueID]={}))[l])&&i[0]===C&&i[1]===u)return s[2]=i[2];if((r[l]=s)[2]=a(e,t,n))return!0}}}function _e(r){return 1<r.length?function(e,t,n){for(var i=r.length;i--;)if(!r[i](e,t,n))return!1;return!0}:r[0]}function me(e,t,n,i,r){for(var o,s=[],a=0,l=e.length,c=null!=t;a<l;a++)(o=e[a])&&(n&&!n(o,i,r)||(s.push(o),c&&t.push(a)));return s}function ve(f,p,g,_,m,e){return _&&!_[O]&&(_=ve(_)),m&&!m[O]&&(m=ve(m,e)),oe(function(e,t,n,i){var r,o,s,a=[],l=[],c=t.length,u=e||function(e,t,n){for(var i=0,r=t.length;i<r;i++)ie(e,t[i],n);return n}(p||"*",n.nodeType?[n]:n,[]),h=!f||!e&&p?u:me(u,a,f,n,i),d=g?m||(e?f:c||_)?[]:t:h;if(g&&g(h,d,n,i),_)for(r=me(d,l),_(r,[],n,i),o=r.length;o--;)(s=r[o])&&(d[l[o]]=!(h[l[o]]=s));if(e){if(m||f){if(m){for(r=[],o=d.length;o--;)(s=d[o])&&r.push(h[o]=s);m(null,d=[],r,i)}for(o=d.length;o--;)(s=d[o])&&-1<(r=m?x(e,s):a[o])&&(e[r]=!(t[r]=s))}}else d=me(d===t?d.splice(c,d.length):d),m?m(null,t,d,i):R.apply(t,d)})}function Se(e){for(var r,t,n,i=e.length,o=E.relative[e[0].type],s=o||E.relative[" "],a=o?1:0,l=ge(function(e){return e===r},s,!0),c=ge(function(e){return-1<x(r,e)},s,!0),u=[function(e,t,n){var i=!o&&(n||t!==y)||((r=t).nodeType?l(e,t,n):c(e,t,n));return r=null,i}];a<i;a++)if(t=E.relative[e[a].type])u=[ge(_e(u),t)];else{if((t=E.filter[e[a].type].apply(null,e[a].matches))[O]){for(n=++a;n<i&&!E.relative[e[n].type];n++);return ve(1<a&&_e(u),1<a&&pe(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(B,"$1"),t,a<n&&Se(e.slice(a,n)),n<i&&Se(e=e.slice(n)),n<i&&pe(e))}u.push(t)}return _e(u)}return fe.prototype=E.filters=E.pseudos,E.setFilters=new fe,g=ie.tokenize=function(e,t){var n,i,r,o,s,a,l,c=f[e+" "];if(c)return t?0:c.slice(0);for(s=e,a=[],l=E.preFilter;s;){for(o in n&&!(i=W.exec(s))||(i&&(s=s.slice(i[0].length)||s),a.push(r=[])),n=!1,(i=j.exec(s))&&(n=i.shift(),r.push({value:n,type:i[0].replace(B," ")}),s=s.slice(n.length)),E.filter)!(i=Y[o].exec(s))||l[o]&&!(i=l[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?ie.error(e):f(e,a).slice(0)},h=ie.compile=function(e,t){var n,_,m,v,S,i,r=[],o=[],s=I[e+" "];if(!s){for(t||(t=g(e)),n=t.length;n--;)(s=Se(t[n]))[O]?r.push(s):o.push(s);(s=I(e,(_=o,v=0<(m=r).length,S=0<_.length,i=function(e,t,n,i,r){var o,s,a,l=0,c="0",u=e&&[],h=[],d=y,f=e||S&&E.find.TAG("*",r),p=C+=null==d?1:Math.random()||.1,g=f.length;for(r&&(y=t===T||t||r);c!==g&&null!=(o=f[c]);c++){if(S&&o){for(s=0,t||o.ownerDocument===T||(b(o),n=!A);a=_[s++];)if(a(o,t||T,n)){i.push(o);break}r&&(C=p)}v&&((o=!a&&o)&&l--,e&&u.push(o))}if(l+=c,v&&c!==l){for(s=0;a=m[s++];)a(u,h,t,n);if(e){if(0<l)for(;c--;)u[c]||h[c]||(h[c]=M.call(i));h=me(h)}R.apply(i,h),r&&!e&&0<h.length&&1<l+m.length&&ie.uniqueSort(i)}return r&&(C=p,y=d),u},v?oe(i):i))).selector=e}return s},_=ie.select=function(e,t,n,i){var r,o,s,a,l,c="function"==typeof e&&e,u=!i&&g(e=c.selector||e);if(n=n||[],1===u.length){if(2<(o=u[0]=u[0].slice(0)).length&&"ID"===(s=o[0]).type&&p.getById&&9===t.nodeType&&A&&E.relative[o[1].type]){if(!(t=(E.find.ID(s.matches[0].replace(ee,te),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=Y.needsContext.test(e)?0:o.length;r--&&(s=o[r],!E.relative[a=s.type]);)if((l=E.find[a])&&(i=l(s.matches[0].replace(ee,te),J.test(o[0].type)&&de(t.parentNode)||t))){if(o.splice(r,1),!(e=i.length&&pe(o)))return R.apply(n,i),n;break}}return(c||h(e,u))(i,t,!A,n,!t||J.test(e)&&de(t.parentNode)||t),n},p.sortStable=O.split("").sort(w).join("")===O,p.detectDuplicates=!!c,b(),p.sortDetached=se(function(e){return 1&e.compareDocumentPosition(T.createElement("div"))}),se(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ae("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),p.attributes&&se(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ae("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),se(function(e){return null==e.getAttribute("disabled")})||ae(H,function(e,t,n){var i;return n?void 0:!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),ie}(T);O.find=d,O.expr=d.selectors,O.expr[":"]=O.expr.pseudos,O.uniqueSort=O.unique=d.uniqueSort,O.text=d.getText,O.isXMLDoc=d.isXML,O.contains=d.contains;var f=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&O(e).is(n))break;i.push(e)}return i},m=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},v=O.expr.match.needsContext,S=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,E=/^.[^:#\[\.,]*$/;function y(e,n,i){if(O.isFunction(n))return O.grep(e,function(e,t){return!!n.call(e,t,e)!==i});if(n.nodeType)return O.grep(e,function(e){return e===n!==i});if("string"==typeof n){if(E.test(n))return O.filter(n,e,i);n=O.filter(n,e)}return O.grep(e,function(e){return-1<r.call(n,e)!==i})}O.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?O.find.matchesSelector(i,e)?[i]:[]:O.find.matches(e,O.grep(t,function(e){return 1===e.nodeType}))},O.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(O(e).filter(function(){for(t=0;t<n;t++)if(O.contains(r[t],this))return!0}));for(t=0;t<n;t++)O.find(e,r[t],i);return(i=this.pushStack(1<n?O.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(y(this,e||[],!1))},not:function(e){return this.pushStack(y(this,e||[],!0))},is:function(e){return!!y(this,"string"==typeof e&&v.test(e)?O(e):e||[],!1).length}});var b,C=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(O.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||b,"string"!=typeof e)return e.nodeType?(this.context=this[0]=e,this.length=1,this):O.isFunction(e)?void 0!==n.ready?n.ready(e):e(O):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),O.makeArray(e,this));if(!(i="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:C.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof O?t[0]:t,O.merge(this,O.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:A,!0)),S.test(i[1])&&O.isPlainObject(t))for(i in t)O.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=A.getElementById(i[2]))&&r.parentNode&&(this.length=1,this[0]=r),this.context=A,this.selector=e,this}).prototype=O.fn,b=O(A);var I=/^(?:parents|prev(?:Until|All))/,w={children:!0,contents:!0,next:!0,prev:!0};function D(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}O.fn.extend({has:function(e){var t=O(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(O.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],s=v.test(e)||"string"!=typeof e?O(e,t||this.context):0;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&O.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?O.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?r.call(O(e),this[0]):r.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(O.uniqueSort(O.merge(this.get(),O(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),O.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return f(e,"parentNode")},parentsUntil:function(e,t,n){return f(e,"parentNode",n)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return f(e,"nextSibling")},prevAll:function(e){return f(e,"previousSibling")},nextUntil:function(e,t,n){return f(e,"nextSibling",n)},prevUntil:function(e,t,n){return f(e,"previousSibling",n)},siblings:function(e){return m((e.parentNode||{}).firstChild,e)},children:function(e){return m(e.firstChild)},contents:function(e){return e.contentDocument||O.merge([],e.childNodes)}},function(i,r){O.fn[i]=function(e,t){var n=O.map(this,r,e);return"Until"!==i.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=O.filter(t,n)),1<this.length&&(w[i]||O.uniqueSort(n),I.test(i)&&n.reverse()),this.pushStack(n)}});var M,N=/\S+/g;function R(){A.removeEventListener("DOMContentLoaded",R),T.removeEventListener("load",R),O.ready()}O.Callbacks=function(i){var e,n;i="string"==typeof i?(e=i,n={},O.each(e.match(N)||[],function(e,t){n[t]=!0}),n):O.extend({},i);var r,t,o,s,a=[],l=[],c=-1,u=function(){for(s=i.once,o=r=!0;l.length;c=-1)for(t=l.shift();++c<a.length;)!1===a[c].apply(t[0],t[1])&&i.stopOnFalse&&(c=a.length,t=!1);i.memory||(t=!1),r=!1,s&&(a=t?[]:"")},h={add:function(){return a&&(t&&!r&&(c=a.length-1,l.push(t)),function n(e){O.each(e,function(e,t){O.isFunction(t)?i.unique&&h.has(t)||a.push(t):t&&t.length&&"string"!==O.type(t)&&n(t)})}(arguments),t&&!r&&u()),this},remove:function(){return O.each(arguments,function(e,t){for(var n;-1<(n=O.inArray(t,a,n));)a.splice(n,1),n<=c&&c--}),this},has:function(e){return e?-1<O.inArray(e,a):0<a.length},empty:function(){return a&&(a=[]),this},disable:function(){return s=l=[],a=t="",this},disabled:function(){return!a},lock:function(){return s=l=[],t||(a=t=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),r||u()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!o}};return h},O.extend({Deferred:function(e){var o=[["resolve","done",O.Callbacks("once memory"),"resolved"],["reject","fail",O.Callbacks("once memory"),"rejected"],["notify","progress",O.Callbacks("memory")]],r="pending",s={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var r=arguments;return O.Deferred(function(i){O.each(o,function(e,t){var n=O.isFunction(r[e])&&r[e];a[t[1]](function(){var e=n&&n.apply(this,arguments);e&&O.isFunction(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[t[0]+"With"](this===s?i.promise():this,n?[e]:arguments)})}),r=null}).promise()},promise:function(e){return null!=e?O.extend(e,s):s}},a={};return s.pipe=s.then,O.each(o,function(e,t){var n=t[2],i=t[3];s[t[1]]=n.add,i&&n.add(function(){r=i},o[1^e][2].disable,o[2][2].lock),a[t[0]]=function(){return a[t[0]+"With"](this===a?s:this,arguments),this},a[t[0]+"With"]=n.fireWith}),s.promise(a),e&&e.call(a,a),a},when:function(e){var r,t,n,i=0,o=u.call(arguments),s=o.length,a=1!==s||e&&O.isFunction(e.promise)?s:0,l=1===a?e:O.Deferred(),c=function(t,n,i){return function(e){n[t]=this,i[t]=1<arguments.length?u.call(arguments):e,i===r?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(1<s)for(r=new Array(s),t=new Array(s),n=new Array(s);i<s;i++)o[i]&&O.isFunction(o[i].promise)?o[i].promise().progress(c(i,t,r)).done(c(i,n,o)).fail(l.reject):--a;return a||l.resolveWith(n,o),l.promise()}}),O.fn.ready=function(e){return O.ready.promise().done(e),this},O.extend({isReady:!1,readyWait:1,holdReady:function(e){e?O.readyWait++:O.ready(!0)},ready:function(e){(!0===e?--O.readyWait:O.isReady)||((O.isReady=!0)!==e&&0<--O.readyWait||(M.resolveWith(A,[O]),O.fn.triggerHandler&&(O(A).triggerHandler("ready"),O(A).off("ready"))))}}),O.ready.promise=function(e){return M||(M=O.Deferred(),"complete"===A.readyState||"loading"!==A.readyState&&!A.documentElement.doScroll?T.setTimeout(O.ready):(A.addEventListener("DOMContentLoaded",R),T.addEventListener("load",R))),M.promise(e)},O.ready.promise();var L=function(e,t,n,i,r,o,s){var a=0,l=e.length,c=null==n;if("object"===O.type(n))for(a in r=!0,n)L(e,t,a,n[a],!0,o,s);else if(void 0!==i&&(r=!0,O.isFunction(i)||(s=!0),c&&(t=s?(t.call(e,i),null):(c=t,function(e,t,n){return c.call(O(e),n)})),t))for(;a<l;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return r?e:c?t.call(e):l?t(e[0],n):o},x=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function H(){this.expando=O.expando+H.uid++}H.uid=1,H.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!x(e))return{};var t=e[this.expando];return t||(t={},x(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[t]=n;else for(i in t)r[i]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?void 0!==(i=this.get(e,t))?i:this.get(e,O.camelCase(t)):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{n=(i=O.isArray(t)?t.concat(t.map(O.camelCase)):(r=O.camelCase(t),t in o?[t,r]:(i=r)in o?[i]:i.match(N)||[])).length;for(;n--;)delete o[i[n]]}(void 0===t||O.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!O.isEmptyObject(t)}};var P=new H,k=new H,G=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,U=/[A-Z]/g;function F(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(U,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:G.test(n)?O.parseJSON(n):n)}catch(e){}k.set(e,t,n)}else n=void 0;return n}O.extend({hasData:function(e){return k.hasData(e)||P.hasData(e)},data:function(e,t,n){return k.access(e,t,n)},removeData:function(e,t){k.remove(e,t)},_data:function(e,t,n){return P.access(e,t,n)},_removeData:function(e,t){P.remove(e,t)}}),O.fn.extend({data:function(i,e){var t,n,r,o=this[0],s=o&&o.attributes;if(void 0!==i)return"object"==typeof i?this.each(function(){k.set(this,i)}):L(this,function(t){var e,n;if(o&&void 0===t){if(void 0!==(e=k.get(o,i)||k.get(o,i.replace(U,"-$&").toLowerCase())))return e;if(n=O.camelCase(i),void 0!==(e=k.get(o,n)))return e;if(void 0!==(e=F(o,n,void 0)))return e}else n=O.camelCase(i),this.each(function(){var e=k.get(this,n);k.set(this,n,t),-1<i.indexOf("-")&&void 0!==e&&k.set(this,i,t)})},null,e,1<arguments.length,null,!0);if(this.length&&(r=k.get(o),1===o.nodeType&&!P.get(o,"hasDataAttrs"))){for(t=s.length;t--;)s[t]&&(0===(n=s[t].name).indexOf("data-")&&(n=O.camelCase(n.slice(5)),F(o,n,r[n])));P.set(o,"hasDataAttrs",!0)}return r},removeData:function(e){return this.each(function(){k.remove(this,e)})}}),O.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=P.get(e,t),n&&(!i||O.isArray(n)?i=P.access(e,t,O.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=O.queue(e,t),i=n.length,r=n.shift(),o=O._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,function(){O.dequeue(e,t)},o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return P.get(e,n)||P.access(e,n,{empty:O.Callbacks("once memory").add(function(){P.remove(e,[t+"queue",n])})})}}),O.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?O.queue(this[0],t):void 0===n?this:this.each(function(){var e=O.queue(this,t,n);O._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&O.dequeue(this,t)})},dequeue:function(e){return this.each(function(){O.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=O.Deferred(),o=this,s=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=P.get(o[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var B=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,W=new RegExp("^(?:([+-])=|)("+B+")([a-z%]*)$","i"),j=["Top","Right","Bottom","Left"],V=function(e,t){return e=t||e,"none"===O.css(e,"display")||!O.contains(e.ownerDocument,e)};function $(e,t,n,i){var r,o=1,s=20,a=i?function(){return i.cur()}:function(){return O.css(e,t,"")},l=a(),c=n&&n[3]||(O.cssNumber[t]?"":"px"),u=(O.cssNumber[t]||"px"!==c&&+l)&&W.exec(O.css(e,t));if(u&&u[3]!==c)for(c=c||u[3],n=n||[],u=+l||1;u/=o=o||".5",O.style(e,t,u+c),o!==(o=a()/l)&&1!==o&&--s;);return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=r)),r}var q=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,K=/^$|\/(?:java|ecma)script/i,X={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function z(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&O.nodeName(e,t)?O.merge([e],n):n}function Q(e,t){for(var n=0,i=e.length;n<i;n++)P.set(e[n],"globalEval",!t||P.get(t[n],"globalEval"))}X.optgroup=X.option,X.tbody=X.tfoot=X.colgroup=X.caption=X.thead,X.th=X.td;var J,Z,ee=/<|&#?\w+;/;function te(e,t,n,i,r){for(var o,s,a,l,c,u,h=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((o=e[f])||0===o)if("object"===O.type(o))O.merge(d,o.nodeType?[o]:o);else if(ee.test(o)){for(s=s||h.appendChild(t.createElement("div")),a=(Y.exec(o)||["",""])[1].toLowerCase(),l=X[a]||X._default,s.innerHTML=l[1]+O.htmlPrefilter(o)+l[2],u=l[0];u--;)s=s.lastChild;O.merge(d,s.childNodes),(s=h.firstChild).textContent=""}else d.push(t.createTextNode(o));for(h.textContent="",f=0;o=d[f++];)if(i&&-1<O.inArray(o,i))r&&r.push(o);else if(c=O.contains(o.ownerDocument,o),s=z(h.appendChild(o),"script"),c&&Q(s),n)for(u=0;o=s[u++];)K.test(o.type||"")&&n.push(o);return h}J=A.createDocumentFragment().appendChild(A.createElement("div")),(Z=A.createElement("input")).setAttribute("type","radio"),Z.setAttribute("checked","checked"),Z.setAttribute("name","t"),J.appendChild(Z),_.checkClone=J.cloneNode(!0).cloneNode(!0).lastChild.checked,J.innerHTML="<textarea>x</textarea>",_.noCloneChecked=!!J.cloneNode(!0).lastChild.defaultValue;var ne=/^key/,ie=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,re=/^([^.]*)(?:\.(.+)|)/;function oe(){return!0}function se(){return!1}function ae(){try{return A.activeElement}catch(e){}}function le(e,t,n,i,r,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof n&&(i=i||n,n=void 0),t)le(e,a,n,i,t[a],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=se;else if(!r)return e;return 1===o&&(s=r,(r=function(e){return O().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=O.guid++)),e.each(function(){O.event.add(this,t,r,i,n)})}O.event={global:{},add:function(t,e,n,i,r){var o,s,a,l,c,u,h,d,f,p,g,_=P.get(t);if(_)for(n.handler&&(n=(o=n).handler,r=o.selector),n.guid||(n.guid=O.guid++),(l=_.events)||(l=_.events={}),(s=_.handle)||(s=_.handle=function(e){return void 0!==O&&O.event.triggered!==e.type?O.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(N)||[""]).length;c--;)f=g=(a=re.exec(e[c])||[])[1],p=(a[2]||"").split(".").sort(),f&&(h=O.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=O.event.special[f]||{},u=O.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&O.expr.match.needsContext.test(r),namespace:p.join(".")},o),(d=l[f])||((d=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,i,p,s)||t.addEventListener&&t.addEventListener(f,s)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),O.event.global[f]=!0)},remove:function(e,t,n,i,r){var o,s,a,l,c,u,h,d,f,p,g,_=P.hasData(e)&&P.get(e);if(_&&(l=_.events)){for(c=(t=(t||"").match(N)||[""]).length;c--;)if(f=g=(a=re.exec(t[c])||[])[1],p=(a[2]||"").split(".").sort(),f){for(h=O.event.special[f]||{},d=l[f=(i?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=d.length;o--;)u=d[o],!r&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,p,_.handle)||O.removeEvent(e,f,_.handle),delete l[f])}else for(f in l)O.event.remove(e,f+t[c],n,i,!0);O.isEmptyObject(l)&&P.remove(e,"handle events")}},dispatch:function(e){e=O.event.fix(e);var t,n,i,r,o,s=[],a=u.call(arguments),l=(P.get(this,"events")||{})[e.type]||[],c=O.event.special[e.type]||{};if((a[0]=e).delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(s=O.event.handlers.call(this,e,l),t=0;(r=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(i=((O.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(i=[],n=0;n<a;n++)void 0===i[r=(o=t[n]).selector+" "]&&(i[r]=o.needsContext?-1<O(r,this).index(l):O.find(r,this,null,[l]).length),i[r]&&i.push(o);i.length&&s.push({elem:l,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(i=(n=e.target.ownerDocument||A).documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[O.expando])return e;var t,n,i,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=ie.test(r)?this.mouseHooks:ne.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new O.Event(o),t=i.length;t--;)e[n=i[t]]=o[n];return e.target||(e.target=A),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ae()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ae()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&O.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return O.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},O.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},O.Event=function(e,t){return this instanceof O.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?oe:se):this.type=e,t&&O.extend(this,t),this.timeStamp=e&&e.timeStamp||O.now(),void(this[O.expando]=!0)):new O.Event(e,t)},O.Event.prototype={constructor:O.Event,isDefaultPrevented:se,isPropagationStopped:se,isImmediatePropagationStopped:se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=oe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=oe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=oe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},O.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){O.event.special[e]={delegateType:r,bindType:r,handle:function(e){var t,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||O.contains(this,n))||(e.type=i.origType,t=i.handler.apply(this,arguments),e.type=r),t}}}),O.fn.extend({on:function(e,t,n,i){return le(this,e,t,n,i)},one:function(e,t,n,i){return le(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,O(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=se),this.each(function(){O.event.remove(this,e,n,t)});for(r in e)this.off(r,t,e[r]);return this}});var ce=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ue=/<script|<style|<link/i,he=/checked\s*(?:[^=]|=\s*.checked.)/i,de=/^true\/(.*)/,fe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function pe(e,t){return O.nodeName(e,"table")&&O.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ge(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function _e(e){var t=de.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function me(e,t){var n,i,r,o,s,a,l,c;if(1===t.nodeType){if(P.hasData(e)&&(o=P.access(e),s=P.set(t,o),c=o.events))for(r in delete s.handle,s.events={},c)for(n=0,i=c[r].length;n<i;n++)O.event.add(t,r,c[r][n]);k.hasData(e)&&(a=k.access(e),l=O.extend({},a),k.set(t,l))}}function ve(n,i,r,o){i=g.apply([],i);var e,t,s,a,l,c,u=0,h=n.length,d=h-1,f=i[0],p=O.isFunction(f);if(p||1<h&&"string"==typeof f&&!_.checkClone&&he.test(f))return n.each(function(e){var t=n.eq(e);p&&(i[0]=f.call(this,e,t.html())),ve(t,i,r,o)});if(h&&(t=(e=te(i,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(a=(s=O.map(z(e,"script"),ge)).length;u<h;u++)l=e,u!==d&&(l=O.clone(l,!0,!0),a&&O.merge(s,z(l,"script"))),r.call(n[u],l,u);if(a)for(c=s[s.length-1].ownerDocument,O.map(s,_e),u=0;u<a;u++)l=s[u],K.test(l.type||"")&&!P.access(l,"globalEval")&&O.contains(c,l)&&(l.src?O._evalUrl&&O._evalUrl(l.src):O.globalEval(l.textContent.replace(fe,"")))}return n}function Se(e,t,n){for(var i,r=t?O.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||O.cleanData(z(i)),i.parentNode&&(n&&O.contains(i.ownerDocument,i)&&Q(z(i,"script")),i.parentNode.removeChild(i));return e}O.extend({htmlPrefilter:function(e){return e.replace(ce,"<$1></$2>")},clone:function(e,t,n){var i,r,o,s,a,l,c,u=e.cloneNode(!0),h=O.contains(e.ownerDocument,e);if(!(_.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||O.isXMLDoc(e)))for(s=z(u),i=0,r=(o=z(e)).length;i<r;i++)a=o[i],l=s[i],void 0,"input"===(c=l.nodeName.toLowerCase())&&q.test(a.type)?l.checked=a.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=a.defaultValue);if(t)if(n)for(o=o||z(e),s=s||z(u),i=0,r=o.length;i<r;i++)me(o[i],s[i]);else me(e,u);return 0<(s=z(u,"script")).length&&Q(s,!h&&z(e,"script")),u},cleanData:function(e){for(var t,n,i,r=O.event.special,o=0;void 0!==(n=e[o]);o++)if(x(n)){if(t=n[P.expando]){if(t.events)for(i in t.events)r[i]?O.event.remove(n,i):O.removeEvent(n,i,t.handle);n[P.expando]=void 0}n[k.expando]&&(n[k.expando]=void 0)}}}),O.fn.extend({domManip:ve,detach:function(e){return Se(this,e,!0)},remove:function(e){return Se(this,e)},text:function(e){return L(this,function(e){return void 0===e?O.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return ve(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||pe(this,e).appendChild(e)})},prepend:function(){return ve(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=pe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return ve(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return ve(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(O.cleanData(z(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return O.clone(this,e,t)})},html:function(e){return L(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ue.test(e)&&!X[(Y.exec(e)||["",""])[1].toLowerCase()]){e=O.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(O.cleanData(z(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return ve(this,arguments,function(e){var t=this.parentNode;O.inArray(this,n)<0&&(O.cleanData(z(this)),t&&t.replaceChild(e,this))},n)}}),O.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,s){O.fn[e]=function(e){for(var t,n=[],i=O(e),r=i.length-1,o=0;o<=r;o++)t=o===r?this:this.clone(!0),O(i[o])[s](t),a.apply(n,t.get());return this.pushStack(n)}});var Ee,ye={HTML:"block",BODY:"block"};function be(e,t){var n=O(t.createElement(e)).appendTo(t.body),i=O.css(n[0],"display");return n.detach(),i}function Te(e){var t=A,n=ye[e];return n||("none"!==(n=be(e,t))&&n||((t=(Ee=(Ee||O("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=be(e,t),Ee.detach()),ye[e]=n),n}var Ae=/^margin/,Oe=new RegExp("^("+B+")(?!px)[a-z%]+$","i"),Ce=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=T),t.getComputedStyle(e)},Ie=function(e,t,n,i){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];for(o in r=n.apply(e,i||[]),t)e.style[o]=s[o];return r},we=A.documentElement;function De(e,t,n){var i,r,o,s,a=e.style;return""!==(s=(n=n||Ce(e))?n.getPropertyValue(t)||n[t]:void 0)&&void 0!==s||O.contains(e.ownerDocument,e)||(s=O.style(e,t)),n&&!_.pixelMarginRight()&&Oe.test(s)&&Ae.test(t)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=r,a.maxWidth=o),void 0!==s?s+"":s}function Me(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}!function(){var t,n,i,r,o=A.createElement("div"),s=A.createElement("div");if(s.style){function e(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",we.appendChild(o);var e=T.getComputedStyle(s);t="1%"!==e.top,r="2px"===e.marginLeft,n="4px"===e.width,s.style.marginRight="50%",i="4px"===e.marginRight,we.removeChild(o)}s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",_.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(s),O.extend(_,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return null==n&&e(),n},pixelMarginRight:function(){return null==n&&e(),i},reliableMarginLeft:function(){return null==n&&e(),r},reliableMarginRight:function(){var e,t=s.appendChild(A.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",we.appendChild(o),e=!parseFloat(T.getComputedStyle(t).marginRight),we.removeChild(o),s.removeChild(t),e}})}}();var Ne=/^(none|table(?!-c[ea]).+)/,Re={position:"absolute",visibility:"hidden",display:"block"},Le={letterSpacing:"0",fontWeight:"400"},xe=["Webkit","O","Moz","ms"],He=A.createElement("div").style;function Pe(e){if(e in He)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=xe.length;n--;)if((e=xe[n]+t)in He)return e}function ke(e,t,n){var i=W.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function Ge(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,s=0;o<4;o+=2)"margin"===n&&(s+=O.css(e,n+j[o],!0,r)),i?("content"===n&&(s-=O.css(e,"padding"+j[o],!0,r)),"margin"!==n&&(s-=O.css(e,"border"+j[o]+"Width",!0,r))):(s+=O.css(e,"padding"+j[o],!0,r),"padding"!==n&&(s+=O.css(e,"border"+j[o]+"Width",!0,r)));return s}function Ue(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=Ce(e),s="border-box"===O.css(e,"boxSizing",!1,o);if(r<=0||null==r){if(((r=De(e,t,o))<0||null==r)&&(r=e.style[t]),Oe.test(r))return r;i=s&&(_.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+Ge(e,t,n||(s?"border":"content"),i,o)+"px"}function Fe(e,t){for(var n,i,r,o=[],s=0,a=e.length;s<a;s++)(i=e[s]).style&&(o[s]=P.get(i,"olddisplay"),n=i.style.display,t?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&V(i)&&(o[s]=P.access(i,"olddisplay",Te(i.nodeName)))):(r=V(i),"none"===n&&r||P.set(i,"olddisplay",r?n:O.css(i,"display"))));for(s=0;s<a;s++)(i=e[s]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[s]||"":"none"));return e}function Be(e,t,n,i,r){return new Be.prototype.init(e,t,n,i,r)}O.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=De(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,a=O.camelCase(t),l=e.style;return t=O.cssProps[a]||(O.cssProps[a]=Pe(a)||a),s=O.cssHooks[t]||O.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:l[t]:("string"===(o=typeof n)&&(r=W.exec(n))&&r[1]&&(n=$(e,t,r),o="number"),void(null!=n&&n==n&&("number"===o&&(n+=r&&r[3]||(O.cssNumber[a]?"":"px")),_.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(l[t]=n))))}},css:function(e,t,n,i){var r,o,s,a=O.camelCase(t);return t=O.cssProps[a]||(O.cssProps[a]=Pe(a)||a),(s=O.cssHooks[t]||O.cssHooks[a])&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=De(e,t,i)),"normal"===r&&t in Le&&(r=Le[t]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),O.each(["height","width"],function(e,s){O.cssHooks[s]={get:function(e,t,n){return t?Ne.test(O.css(e,"display"))&&0===e.offsetWidth?Ie(e,Re,function(){return Ue(e,s,n)}):Ue(e,s,n):void 0},set:function(e,t,n){var i,r=n&&Ce(e),o=n&&Ge(e,s,n,"border-box"===O.css(e,"boxSizing",!1,r),r);return o&&(i=W.exec(t))&&"px"!==(i[3]||"px")&&(e.style[s]=t,t=O.css(e,s)),ke(0,t,o)}}}),O.cssHooks.marginLeft=Me(_.reliableMarginLeft,function(e,t){return t?(parseFloat(De(e,"marginLeft"))||e.getBoundingClientRect().left-Ie(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),O.cssHooks.marginRight=Me(_.reliableMarginRight,function(e,t){return t?Ie(e,{display:"inline-block"},De,[e,"marginRight"]):void 0}),O.each({margin:"",padding:"",border:"Width"},function(r,o){O.cssHooks[r+o]={expand:function(e){for(var t=0,n={},i="string"==typeof e?e.split(" "):[e];t<4;t++)n[r+j[t]+o]=i[t]||i[t-2]||i[0];return n}},Ae.test(r)||(O.cssHooks[r+o].set=ke)}),O.fn.extend({css:function(e,t){return L(this,function(e,t,n){var i,r,o={},s=0;if(O.isArray(t)){for(i=Ce(e),r=t.length;s<r;s++)o[t[s]]=O.css(e,t[s],!1,i);return o}return void 0!==n?O.style(e,t,n):O.css(e,t)},e,t,1<arguments.length)},show:function(){return Fe(this,!0)},hide:function(){return Fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){V(this)?O(this).show():O(this).hide()})}}),((O.Tween=Be).prototype={constructor:Be,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||O.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(O.cssNumber[n]?"":"px")},cur:function(){var e=Be.propHooks[this.prop];return e&&e.get?e.get(this):Be.propHooks._default.get(this)},run:function(e){var t,n=Be.propHooks[this.prop];return this.options.duration?this.pos=t=O.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Be.propHooks._default.set(this),this}}).init.prototype=Be.prototype,(Be.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=O.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){O.fx.step[e.prop]?O.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[O.cssProps[e.prop]]&&!O.cssHooks[e.prop]?e.elem[e.prop]=e.now:O.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Be.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},O.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},O.fx=Be.prototype.init,O.fx.step={};var We,je,Ve,$e,qe,Ye=/^(?:toggle|show|hide)$/,Ke=/queueHooks$/;function Xe(){return T.setTimeout(function(){We=void 0}),We=O.now()}function ze(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=j[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function Qe(e,t,n){for(var i,r=(Je.tweeners[t]||[]).concat(Je.tweeners["*"]),o=0,s=r.length;o<s;o++)if(i=r[o].call(n,t,e))return i}function Je(o,e,t){var n,s,i=0,r=Je.prefilters.length,a=O.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var e=We||Xe(),t=Math.max(0,c.startTime+c.duration-e),n=1-(t/c.duration||0),i=0,r=c.tweens.length;i<r;i++)c.tweens[i].run(n);return a.notifyWith(o,[c,n,t]),n<1&&r?t:(a.resolveWith(o,[c]),!1)},c=a.promise({elem:o,props:O.extend({},e),opts:O.extend(!0,{specialEasing:{},easing:O.easing._default},t),originalProperties:e,originalOptions:t,startTime:We||Xe(),duration:t.duration,tweens:[],createTween:function(e,t){var n=O.Tween(o,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var t=0,n=e?c.tweens.length:0;if(s)return this;for(s=!0;t<n;t++)c.tweens[t].run(1);return e?(a.notifyWith(o,[c,1,0]),a.resolveWith(o,[c,e])):a.rejectWith(o,[c,e]),this}}),u=c.props;for(function(e,t){var n,i,r,o,s;for(n in e)if(r=t[i=O.camelCase(n)],o=e[n],O.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),(s=O.cssHooks[i])&&"expand"in s)for(n in o=s.expand(o),delete e[i],o)n in e||(e[n]=o[n],t[n]=r);else t[i]=r}(u,c.opts.specialEasing);i<r;i++)if(n=Je.prefilters[i].call(c,o,u,c.opts))return O.isFunction(n.stop)&&(O._queueHooks(c.elem,c.opts.queue).stop=O.proxy(n.stop,n)),n;return O.map(u,Qe,c),O.isFunction(c.opts.start)&&c.opts.start.call(o,c),O.fx.timer(O.extend(l,{elem:o,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}O.Animation=O.extend(Je,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return $(n.elem,e,W.exec(t),n),n}]},tweener:function(e,t){for(var n,i=0,r=(e=O.isFunction(e)?(t=e,["*"]):e.match(N)).length;i<r;i++)n=e[i],Je.tweeners[n]=Je.tweeners[n]||[],Je.tweeners[n].unshift(t)},prefilters:[function(t,e,n){var i,r,o,s,a,l,c,u=this,h={},d=t.style,f=t.nodeType&&V(t),p=P.get(t,"fxshow");for(i in n.queue||(null==(a=O._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,O.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===("none"===(c=O.css(t,"display"))?P.get(t,"olddisplay")||Te(t.nodeName):c)&&"none"===O.css(t,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",u.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),e)if(r=e[i],Ye.exec(r)){if(delete e[i],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!p||void 0===p[i])continue;f=!0}h[i]=p&&p[i]||O.style(t,i)}else c=void 0;if(O.isEmptyObject(h))"inline"===("none"===c?Te(t.nodeName):c)&&(d.display=c);else for(i in p?"hidden"in p&&(f=p.hidden):p=P.access(t,"fxshow",{}),o&&(p.hidden=!f),f?O(t).show():u.done(function(){O(t).hide()}),u.done(function(){var e;for(e in P.remove(t,"fxshow"),h)O.style(t,e,h[e])}),h)s=Qe(f?p[i]:0,i,u),i in p||(p[i]=s.start,f&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}],prefilter:function(e,t){t?Je.prefilters.unshift(e):Je.prefilters.push(e)}}),O.speed=function(e,t,n){var i=e&&"object"==typeof e?O.extend({},e):{complete:n||!n&&t||O.isFunction(e)&&e,duration:e,easing:n&&t||t&&!O.isFunction(t)&&t};return i.duration=O.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in O.fx.speeds?O.fx.speeds[i.duration]:O.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){O.isFunction(i.old)&&i.old.call(this),i.queue&&O.dequeue(this,i.queue)},i},O.fn.extend({fadeTo:function(e,t,n,i){return this.filter(V).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(t,e,n,i){var r=O.isEmptyObject(t),o=O.speed(e,n,i),s=function(){var e=Je(this,O.extend({},t),o);(r||P.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(r,e,o){var s=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof r&&(o=e,e=r,r=void 0),e&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",n=O.timers,i=P.get(this);if(t)i[t]&&i[t].stop&&s(i[t]);else for(t in i)i[t]&&i[t].stop&&Ke.test(t)&&s(i[t]);for(t=n.length;t--;)n[t].elem!==this||null!=r&&n[t].queue!==r||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||O.dequeue(this,r)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var e,t=P.get(this),n=t[s+"queue"],i=t[s+"queueHooks"],r=O.timers,o=n?n.length:0;for(t.finish=!0,O.queue(this,s,[]),i&&i.stop&&i.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===s&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),O.each(["toggle","show","hide"],function(e,i){var r=O.fn[i];O.fn[i]=function(e,t,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(ze(i,!0),e,t,n)}}),O.each({slideDown:ze("show"),slideUp:ze("hide"),slideToggle:ze("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){O.fn[e]=function(e,t,n){return this.animate(i,e,t,n)}}),O.timers=[],O.fx.tick=function(){var e,t=0,n=O.timers;for(We=O.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||O.fx.stop(),We=void 0},O.fx.timer=function(e){O.timers.push(e),e()?O.fx.start():O.timers.pop()},O.fx.interval=13,O.fx.start=function(){je||(je=T.setInterval(O.fx.tick,O.fx.interval))},O.fx.stop=function(){T.clearInterval(je),je=null},O.fx.speeds={slow:600,fast:200,_default:400},O.fn.delay=function(i,e){return i=O.fx&&O.fx.speeds[i]||i,e=e||"fx",this.queue(e,function(e,t){var n=T.setTimeout(e,i);t.stop=function(){T.clearTimeout(n)}})},Ve=A.createElement("input"),$e=A.createElement("select"),qe=$e.appendChild(A.createElement("option")),Ve.type="checkbox",_.checkOn=""!==Ve.value,_.optSelected=qe.selected,$e.disabled=!0,_.optDisabled=!qe.disabled,(Ve=A.createElement("input")).value="t",Ve.type="radio",_.radioValue="t"===Ve.value;var Ze,et=O.expr.attrHandle;O.fn.extend({attr:function(e,t){return L(this,O.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){O.removeAttr(this,e)})}}),O.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?O.prop(e,t,n):(1===o&&O.isXMLDoc(e)||(t=t.toLowerCase(),r=O.attrHooks[t]||(O.expr.match.bool.test(t)?Ze:void 0)),void 0!==n?null===n?void O.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=O.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!_.radioValue&&"radio"===t&&O.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(N);if(o&&1===e.nodeType)for(;n=o[r++];)i=O.propFix[n]||n,O.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),Ze={set:function(e,t,n){return!1===t?O.removeAttr(e,n):e.setAttribute(n,n),n}},O.each(O.expr.match.bool.source.match(/\w+/g),function(e,t){var o=et[t]||O.find.attr;et[t]=function(e,t,n){var i,r;return n||(r=et[t],et[t]=i,i=null!=o(e,t,n)?t.toLowerCase():null,et[t]=r),i}});var tt=/^(?:input|select|textarea|button)$/i,nt=/^(?:a|area)$/i;O.fn.extend({prop:function(e,t){return L(this,O.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[O.propFix[e]||e]})}}),O.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&O.isXMLDoc(e)||(t=O.propFix[t]||t,r=O.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=O.find.attr(e,"tabindex");return t?parseInt(t,10):tt.test(e.nodeName)||nt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),_.optSelected||(O.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),O.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){O.propFix[this.toLowerCase()]=this});var it=/[\t\r\n\f]/g;function rt(e){return e.getAttribute&&e.getAttribute("class")||""}O.fn.extend({addClass:function(t){var e,n,i,r,o,s,a,l=0;if(O.isFunction(t))return this.each(function(e){O(this).addClass(t.call(this,e,rt(this)))});if("string"==typeof t&&t)for(e=t.match(N)||[];n=this[l++];)if(r=rt(n),i=1===n.nodeType&&(" "+r+" ").replace(it," ")){for(s=0;o=e[s++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(a=O.trim(i))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,r,o,s,a,l=0;if(O.isFunction(t))return this.each(function(e){O(this).removeClass(t.call(this,e,rt(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(N)||[];n=this[l++];)if(r=rt(n),i=1===n.nodeType&&(" "+r+" ").replace(it," ")){for(s=0;o=e[s++];)for(;-1<i.indexOf(" "+o+" ");)i=i.replace(" "+o+" "," ");r!==(a=O.trim(i))&&n.setAttribute("class",a)}return this},toggleClass:function(r,t){var o=typeof r;return"boolean"==typeof t&&"string"===o?t?this.addClass(r):this.removeClass(r):O.isFunction(r)?this.each(function(e){O(this).toggleClass(r.call(this,e,rt(this),t),t)}):this.each(function(){var e,t,n,i;if("string"===o)for(t=0,n=O(this),i=r.match(N)||[];e=i[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==r&&"boolean"!==o||((e=rt(this))&&P.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===r?"":P.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+rt(n)+" ").replace(it," ").indexOf(t))return!0;return!1}});var ot=/\r/g,st=/[\x20\t\r\n\f]+/g;O.fn.extend({val:function(n){var i,e,r,t=this[0];return arguments.length?(r=O.isFunction(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=r?n.call(this,e,O(this).val()):n)?t="":"number"==typeof t?t+="":O.isArray(t)&&(t=O.map(t,function(e){return null==e?"":e+""})),(i=O.valHooks[this.type]||O.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,t,"value")||(this.value=t))})):t?(i=O.valHooks[t.type]||O.valHooks[t.nodeName.toLowerCase()])&&"get"in i&&void 0!==(e=i.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(ot,""):null==e?"":e:void 0}}),O.extend({valHooks:{option:{get:function(e){var t=O.find.attr(e,"value");return null!=t?t:O.trim(O.text(e)).replace(st," ")}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||r<0,s=o?null:[],a=o?r+1:i.length,l=r<0?a:o?r:0;l<a;l++)if(((n=i[l]).selected||l===r)&&(_.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!O.nodeName(n.parentNode,"optgroup"))){if(t=O(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=O.makeArray(t),s=r.length;s--;)((i=r[s]).selected=-1<O.inArray(O.valHooks.option.get(i),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),O.each(["radio","checkbox"],function(){O.valHooks[this]={set:function(e,t){return O.isArray(t)?e.checked=-1<O.inArray(O(e).val(),t):void 0}},_.checkOn||(O.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var at=/^(?:focusinfocus|focusoutblur)$/;O.extend(O.event,{trigger:function(e,t,n,i){var r,o,s,a,l,c,u,h=[n||A],d=p.call(e,"type")?e.type:e,f=p.call(e,"namespace")?e.namespace.split("."):[];if(o=s=n=n||A,3!==n.nodeType&&8!==n.nodeType&&!at.test(d+O.event.triggered)&&(-1<d.indexOf(".")&&(d=(f=d.split(".")).shift(),f.sort()),l=d.indexOf(":")<0&&"on"+d,(e=e[O.expando]?e:new O.Event(d,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=f.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:O.makeArray(t,[e]),u=O.event.special[d]||{},i||!u.trigger||!1!==u.trigger.apply(n,t))){if(!i&&!u.noBubble&&!O.isWindow(n)){for(a=u.delegateType||d,at.test(a+d)||(o=o.parentNode);o;o=o.parentNode)h.push(o),s=o;s===(n.ownerDocument||A)&&h.push(s.defaultView||s.parentWindow||T)}for(r=0;(o=h[r++])&&!e.isPropagationStopped();)e.type=1<r?a:u.bindType||d,(c=(P.get(o,"events")||{})[e.type]&&P.get(o,"handle"))&&c.apply(o,t),(c=l&&o[l])&&c.apply&&x(o)&&(e.result=c.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,i||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(h.pop(),t)||!x(n)||l&&O.isFunction(n[d])&&!O.isWindow(n)&&((s=n[l])&&(n[l]=null),n[O.event.triggered=d](),O.event.triggered=void 0,s&&(n[l]=s)),e.result}},simulate:function(e,t,n){var i=O.extend(new O.Event,n,{type:e,isSimulated:!0});O.event.trigger(i,null,t)}}),O.fn.extend({trigger:function(e,t){return this.each(function(){O.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?O.event.trigger(e,t,n,!0):void 0}}),O.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){O.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),O.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),_.focusin="onfocusin"in T,_.focusin||O.each({focus:"focusin",blur:"focusout"},function(n,i){var r=function(e){O.event.simulate(i,e.target,O.event.fix(e))};O.event.special[i]={setup:function(){var e=this.ownerDocument||this,t=P.access(e,i);t||e.addEventListener(n,r,!0),P.access(e,i,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=P.access(e,i)-1;t?P.access(e,i,t):(e.removeEventListener(n,r,!0),P.remove(e,i))}}});var lt=T.location,ct=O.now(),ut=/\?/;O.parseJSON=function(e){return JSON.parse(e+"")},O.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new T.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||O.error("Invalid XML: "+e),t};var ht=/#.*$/,dt=/([?&])_=[^&]*/,ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,pt=/^(?:GET|HEAD)$/,gt=/^\/\//,_t={},mt={},vt="*/".concat("*"),St=A.createElement("a");function Et(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,i=0,r=e.toLowerCase().match(N)||[];if(O.isFunction(t))for(;n=r[i++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function yt(t,r,o,s){var a={},l=t===mt;function c(e){var i;return a[e]=!0,O.each(t[e]||[],function(e,t){var n=t(r,o,s);return"string"!=typeof n||l||a[n]?l?!(i=n):void 0:(r.dataTypes.unshift(n),c(n),!1)}),i}return c(r.dataTypes[0])||!a["*"]&&c("*")}function bt(e,t){var n,i,r=O.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&O.extend(!0,e,i),e}St.href=lt.href,O.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:lt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(lt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":O.parseJSON,"text xml":O.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?bt(bt(e,O.ajaxSettings),t):bt(O.ajaxSettings,e)},ajaxPrefilter:Et(_t),ajaxTransport:Et(mt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var u,h,d,n,f,i,p,r,g=O.ajaxSetup({},t),_=g.context||g,m=g.context&&(_.nodeType||_.jquery)?O(_):O.event,v=O.Deferred(),S=O.Callbacks("once memory"),E=g.statusCode||{},o={},s={},y=0,a="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!n)for(n={};t=ft.exec(d);)n[t[1].toLowerCase()]=t[2];t=n[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?d:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=s[n]=s[n]||e,o[e]=t),this},overrideMimeType:function(e){return y||(g.mimeType=e),this},statusCode:function(e){var t;if(e)if(y<2)for(t in e)E[t]=[E[t],e[t]];else b.always(e[b.status]);return this},abort:function(e){var t=e||a;return u&&u.abort(t),l(0,t),this}};if(v.promise(b).complete=S.add,b.success=b.done,b.error=b.fail,g.url=((e||g.url||lt.href)+"").replace(ht,"").replace(gt,lt.protocol+"//"),g.type=t.method||t.type||g.method||g.type,g.dataTypes=O.trim(g.dataType||"*").toLowerCase().match(N)||[""],null==g.crossDomain){i=A.createElement("a");try{i.href=g.url,i.href=i.href,g.crossDomain=St.protocol+"//"+St.host!=i.protocol+"//"+i.host}catch(e){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=O.param(g.data,g.traditional)),yt(_t,g,t,b),2===y)return b;for(r in(p=O.event&&g.global)&&0==O.active++&&O.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!pt.test(g.type),h=g.url,g.hasContent||(g.data&&(h=g.url+=(ut.test(h)?"&":"?")+g.data,delete g.data),!1===g.cache&&(g.url=dt.test(h)?h.replace(dt,"$1_="+ct++):h+(ut.test(h)?"&":"?")+"_="+ct++)),g.ifModified&&(O.lastModified[h]&&b.setRequestHeader("If-Modified-Since",O.lastModified[h]),O.etag[h]&&b.setRequestHeader("If-None-Match",O.etag[h])),(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&b.setRequestHeader("Content-Type",g.contentType),b.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+vt+"; q=0.01":""):g.accepts["*"]),g.headers)b.setRequestHeader(r,g.headers[r]);if(g.beforeSend&&(!1===g.beforeSend.call(_,b,g)||2===y))return b.abort();for(r in a="abort",{success:1,error:1,complete:1})b[r](g[r]);if(u=yt(mt,g,t,b)){if(b.readyState=1,p&&m.trigger("ajaxSend",[b,g]),2===y)return b;g.async&&0<g.timeout&&(f=T.setTimeout(function(){b.abort("timeout")},g.timeout));try{y=1,u.send(o,l)}catch(e){if(!(y<2))throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,i){var r,o,s,a,l,c=t;2!==y&&(y=2,f&&T.clearTimeout(f),u=void 0,d=i||"",b.readyState=0<e?4:0,r=200<=e&&e<300||304===e,n&&(a=function(e,t,n){for(var i,r,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}(g,b,n)),a=function(e,t,n,i){var r,o,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=c[l+" "+o]||c["* "+o]))for(r in c)if((a=r.split(" "))[1]===o&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[r]:!0!==c[r]&&(o=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(g,a,b,r),r?(g.ifModified&&((l=b.getResponseHeader("Last-Modified"))&&(O.lastModified[h]=l),(l=b.getResponseHeader("etag"))&&(O.etag[h]=l)),204===e||"HEAD"===g.type?c="nocontent":304===e?c="notmodified":(c=a.state,o=a.data,r=!(s=a.error))):(s=c,!e&&c||(c="error",e<0&&(e=0))),b.status=e,b.statusText=(t||c)+"",r?v.resolveWith(_,[o,c,b]):v.rejectWith(_,[b,c,s]),b.statusCode(E),E=void 0,p&&m.trigger(r?"ajaxSuccess":"ajaxError",[b,g,r?o:s]),S.fireWith(_,[b,c]),p&&(m.trigger("ajaxComplete",[b,g]),--O.active||O.event.trigger("ajaxStop")))}return b},getJSON:function(e,t,n){return O.get(e,t,n,"json")},getScript:function(e,t){return O.get(e,void 0,t,"script")}}),O.each(["get","post"],function(e,r){O[r]=function(e,t,n,i){return O.isFunction(t)&&(i=i||n,n=t,t=void 0),O.ajax(O.extend({url:e,type:r,dataType:i,data:t,success:n},O.isPlainObject(e)&&e))}}),O._evalUrl=function(e){return O.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},O.fn.extend({wrapAll:function(t){var e;return O.isFunction(t)?this.each(function(e){O(this).wrapAll(t.call(this,e))}):(this[0]&&(e=O(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(n){return O.isFunction(n)?this.each(function(e){O(this).wrapInner(n.call(this,e))}):this.each(function(){var e=O(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=O.isFunction(t);return this.each(function(e){O(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){O.nodeName(this,"body")||O(this).replaceWith(this.childNodes)}).end()}}),O.expr.filters.hidden=function(e){return!O.expr.filters.visible(e)},O.expr.filters.visible=function(e){return 0<e.offsetWidth||0<e.offsetHeight||0<e.getClientRects().length};var Tt=/%20/g,At=/\[\]$/,Ot=/\r?\n/g,Ct=/^(?:submit|button|image|reset|file)$/i,It=/^(?:input|select|textarea|keygen)/i;function wt(n,e,i,r){var t;if(O.isArray(e))O.each(e,function(e,t){i||At.test(n)?r(n,t):wt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,i,r)});else if(i||"object"!==O.type(e))r(n,e);else for(t in e)wt(n+"["+t+"]",e[t],i,r)}O.param=function(e,t){var n,i=[],r=function(e,t){t=O.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=O.ajaxSettings&&O.ajaxSettings.traditional),O.isArray(e)||e.jquery&&!O.isPlainObject(e))O.each(e,function(){r(this.name,this.value)});else for(n in e)wt(n,e[n],t,r);return i.join("&").replace(Tt,"+")},O.fn.extend({serialize:function(){return O.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=O.prop(this,"elements");return e?O.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!O(this).is(":disabled")&&It.test(this.nodeName)&&!Ct.test(e)&&(this.checked||!q.test(e))}).map(function(e,t){var n=O(this).val();return null==n?null:O.isArray(n)?O.map(n,function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}}):{name:t.name,value:n.replace(Ot,"\r\n")}}).get()}}),O.ajaxSettings.xhr=function(){try{return new T.XMLHttpRequest}catch(e){}};var Dt={0:200,1223:204},Mt=O.ajaxSettings.xhr();_.cors=!!Mt&&"withCredentials"in Mt,_.ajax=Mt=!!Mt,O.ajaxTransport(function(r){var o,s;return _.cors||Mt&&!r.crossDomain?{send:function(e,t){var n,i=r.xhr();if(i.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(n in r.xhrFields)i[n]=r.xhrFields[n];for(n in r.mimeType&&i.overrideMimeType&&i.overrideMimeType(r.mimeType),r.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)i.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=s=i.onload=i.onerror=i.onabort=i.onreadystatechange=null,"abort"===e?i.abort():"error"===e?"number"!=typeof i.status?t(0,"error"):t(i.status,i.statusText):t(Dt[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=o(),s=i.onerror=o("error"),void 0!==i.onabort?i.onabort=s:i.onreadystatechange=function(){4===i.readyState&&T.setTimeout(function(){o&&s()})},o=o("abort");try{i.send(r.hasContent&&r.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}:void 0}),O.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return O.globalEval(e),e}}}),O.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),O.ajaxTransport("script",function(n){var i,r;if(n.crossDomain)return{send:function(e,t){i=O("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",r=function(e){i.remove(),r=null,e&&t("error"===e.type?404:200,e.type)}),A.head.appendChild(i[0])},abort:function(){r&&r()}}});var Nt=[],Rt=/(=)\?(?=&|$)|\?\?/;O.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Nt.pop()||O.expando+"_"+ct++;return this[e]=!0,e}}),O.ajaxPrefilter("json jsonp",function(e,t,n){var i,r,o,s=!1!==e.jsonp&&(Rt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rt.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=O.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Rt,"$1"+i):!1!==e.jsonp&&(e.url+=(ut.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||O.error(i+" was not called"),o[0]},e.dataTypes[0]="json",r=T[i],T[i]=function(){o=arguments},n.always(function(){void 0===r?O(T).removeProp(i):T[i]=r,e[i]&&(e.jsonpCallback=t.jsonpCallback,Nt.push(i)),o&&O.isFunction(r)&&r(o[0]),o=r=void 0}),"script"):void 0}),O.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||A;var i=S.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=te([e],t,r),r&&r.length&&O(r).remove(),O.merge([],i.childNodes))};var Lt=O.fn.load;function xt(e){return O.isWindow(e)?e:9===e.nodeType&&e.defaultView}O.fn.load=function(e,t,n){if("string"!=typeof e&&Lt)return Lt.apply(this,arguments);var i,r,o,s=this,a=e.indexOf(" ");return-1<a&&(i=O.trim(e.slice(a)),e=e.slice(0,a)),O.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<s.length&&O.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(i?O("<div>").append(O.parseHTML(e)).find(i):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},O.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){O.fn[t]=function(e){return this.on(t,e)}}),O.expr.filters.animated=function(t){return O.grep(O.timers,function(e){return t===e.elem}).length},O.offset={setOffset:function(e,t,n){var i,r,o,s,a,l,c=O.css(e,"position"),u=O(e),h={};"static"===c&&(e.style.position="relative"),a=u.offset(),o=O.css(e,"top"),l=O.css(e,"left"),r=("absolute"===c||"fixed"===c)&&-1<(o+l).indexOf("auto")?(s=(i=u.position()).top,i.left):(s=parseFloat(o)||0,parseFloat(l)||0),O.isFunction(t)&&(t=t.call(e,n,O.extend({},a))),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+r),"using"in t?t.using.call(e,h):u.css(h)}},O.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){O.offset.setOffset(this,t,e)});var e,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;return o?(e=o.documentElement,O.contains(e,i)?(r=i.getBoundingClientRect(),n=xt(o),{top:r.top+n.pageYOffset-e.clientTop,left:r.left+n.pageXOffset-e.clientLeft}):r):void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===O.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),O.nodeName(e[0],"html")||(i=e.offset()),i.top+=O.css(e[0],"borderTopWidth",!0),i.left+=O.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-O.css(n,"marginTop",!0),left:t.left-i.left-O.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===O.css(e,"position");)e=e.offsetParent;return e||we})}}),O.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var o="pageYOffset"===r;O.fn[t]=function(e){return L(this,function(e,t,n){var i=xt(e);return void 0===n?i?i[r]:e[t]:void(i?i.scrollTo(o?i.pageXOffset:n,o?n:i.pageYOffset):e[t]=n)},t,e,arguments.length)}}),O.each(["top","left"],function(e,n){O.cssHooks[n]=Me(_.pixelPosition,function(e,t){return t?(t=De(e,n),Oe.test(t)?O(e).position()[n]+"px":t):void 0})}),O.each({Height:"height",Width:"width"},function(o,s){O.each({padding:"inner"+o,content:s,"":"outer"+o},function(i,e){O.fn[e]=function(e,t){var n=arguments.length&&(i||"boolean"!=typeof e),r=i||(!0===e||!0===t?"margin":"border");return L(this,function(e,t,n){var i;return O.isWindow(e)?e.document.documentElement["client"+o]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+o],i["scroll"+o],e.body["offset"+o],i["offset"+o],i["client"+o])):void 0===n?O.css(e,t,r):O.style(e,t,n,r)},s,n?e:void 0,n,null)}})}),O.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),O.fn.andSelf=O.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return O});var Ht=T.jQuery,Pt=T.$;return O.noConflict=function(e){return T.$===O&&(T.$=Pt),e&&T.jQuery===O&&(T.jQuery=Ht),O},e||(T.jQuery=T.$=O),O}),function(e){"function"==typeof define&&define.amd?define(e):window.purl=e()}(function(){var o={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],n={anchor:"fragment"},a={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},c=/^[0-9]+$/;function u(e,t){if(0===e[t].length)return e[t]={};var n={};for(var i in e[t])n[i]=e[t][i];return e[t]=n}function l(e,t,n){if(~t.indexOf("]")){!function e(t,n,i,r){var o=t.shift();if(o){var s=n[i]=n[i]||[];"]"==o?d(s)?""!==r&&s.push(r):"object"==typeof s?s[function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}(s).length]=r:s=n[i]=[n[i],r]:(~o.indexOf("]")&&(o=o.substr(0,o.length-1)),!c.test(o)&&d(s)&&(s=u(n,i)),e(t,s,o,r))}else d(n[i])?n[i].push(r):"object"==typeof n[i]?n[i]=r:void 0===n[i]?n[i]=r:n[i]=[n[i],r]}(t.split("["),e,"base",n)}else{if(!c.test(t)&&d(e.base)){var i={};for(var r in e.base)i[r]=e.base[r];e.base=i}""!==t&&(o=e.base,a=n,void 0===(l=o[s=t])?o[s]=a:d(l)?l.push(a):o[s]=[l,a])}var o,s,a,l;return e}function h(e){return function(e,t){var n=0,i=e.length>>0,r=arguments[2];for(;n<i;)n in e&&(r=t.call(void 0,r,e[n],n,e)),++n;return r}(String(e).split(/&|;/),function(e,t){try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(e){}var n=t.indexOf("="),i=function(e){for(var t,n,i=e.length,r=0;r<i;++r)if("]"==(n=e[r])&&(t=!1),"["==n&&(t=!0),"="==n&&!t)return r}(t),r=t.substr(0,i||n),o=t.substr(i||n,t.length);return o=o.substr(o.indexOf("=")+1,o.length),""===r&&(r=t,o=""),l(e,r,o)},{base:{}}).base}function d(e){return"[object Array]"===Object.prototype.toString.call(e)}function f(e,t){return 1===arguments.length&&!0===e&&(t=!0,e=void 0),t=t||!1,{data:function(e,t){for(var n=decodeURI(e),i=a[t?"strict":"loose"].exec(n),r={attr:{},param:{},seg:{}},o=14;o--;)r.attr[s[o]]=i[o]||"";return r.param.query=h(r.attr.query),r.param.fragment=h(r.attr.fragment),r.seg.path=r.attr.path.replace(/^\/+|\/+$/g,"").split("/"),r.seg.fragment=r.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),r.attr.base=r.attr.host?(r.attr.protocol?r.attr.protocol+"://"+r.attr.host:r.attr.host)+(r.attr.port?":"+r.attr.port:""):"",r}(e=e||window.location.toString(),t),attr:function(e){return void 0!==(e=n[e]||e)?this.data.attr[e]:this.data.attr},param:function(e){return void 0!==e?this.data.param.query[e]:this.data.param.query},fparam:function(e){return void 0!==e?this.data.param.fragment[e]:this.data.param.fragment},segment:function(e){return void 0===e?this.data.seg.path:(e=e<0?this.data.seg.path.length+e:e-1,this.data.seg.path[e])},fsegment:function(e){return void 0===e?this.data.seg.fragment:(e=e<0?this.data.seg.fragment.length+e:e-1,this.data.seg.fragment[e])}}}return f.jQuery=function(r){null!=r&&(r.fn.url=function(e){var t,n,i="";return this.length&&(i=r(this).attr((t=this[0],void 0!==(n=t.tagName)?o[n.toLowerCase()]:n))||""),f(i,e)},r.url=f)},f.jQuery(window.jQuery),f}),function(e){"use strict";var n,a={};a.VERSION="1.6.0";var i={},t=function(e,t){return function(){return t.apply(e,arguments)}},r=function(){var e,t,n=arguments,i=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in i||!n[t].hasOwnProperty(e)||(i[e]=n[t][e]);return i},o=function(e,t){return{value:e,name:t}};a.TRACE=o(1,"TRACE"),a.DEBUG=o(2,"DEBUG"),a.INFO=o(3,"INFO"),a.TIME=o(4,"TIME"),a.WARN=o(5,"WARN"),a.ERROR=o(8,"ERROR"),a.OFF=o(99,"OFF");var s=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};s.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},trace:function(){this.invoke(a.TRACE,arguments)},debug:function(){this.invoke(a.DEBUG,arguments)},info:function(){this.invoke(a.INFO,arguments)},warn:function(){this.invoke(a.WARN,arguments)},error:function(){this.invoke(a.ERROR,arguments)},time:function(e){"string"==typeof e&&0<e.length&&this.invoke(a.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&0<e.length&&this.invoke(a.TIME,[e,"end"])},invoke:function(e,t){n&&this.enabledFor(e)&&n(t,r({level:e},this.context))}};var l,c=new s({filterLevel:a.OFF});(l=a).enabledFor=t(c,c.enabledFor),l.trace=t(c,c.trace),l.debug=t(c,c.debug),l.time=t(c,c.time),l.timeEnd=t(c,c.timeEnd),l.info=t(c,c.info),l.warn=t(c,c.warn),l.error=t(c,c.error),l.log=l.info,a.setHandler=function(e){n=e},a.setLevel=function(e){for(var t in c.setLevel(e),i)i.hasOwnProperty(t)&&i[t].setLevel(e)},a.getLevel=function(){return c.getLevel()},a.get=function(e){return i[e]||(i[e]=new s(r({name:e},c.context)))},a.createDefaultHandler=function(r){(r=r||{}).formatter=r.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var o={},s=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(e,t){e=Array.prototype.slice.call(e);var n,i=console.log;t.level===a.TIME?(n=(t.name?"["+t.name+"] ":"")+e[0],"start"===e[1]?console.time?console.time(n):o[n]=(new Date).getTime():console.timeEnd?console.timeEnd(n):s(i,[n+": "+((new Date).getTime()-o[n])+"ms"])):(t.level===a.WARN&&console.warn?i=console.warn:t.level===a.ERROR&&console.error?i=console.error:t.level===a.INFO&&console.info?i=console.info:t.level===a.DEBUG&&console.debug?i=console.debug:t.level===a.TRACE&&console.trace&&(i=console.trace),r.formatter(e,t),s(i,e))}},a.useDefaults=function(e){a.setLevel(e&&e.defaultLevel||a.DEBUG),a.setHandler(a.createDefaultHandler(e))},"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&module.exports?module.exports=a:(a._prevLogger=e.Logger,a.noConflict=function(){return e.Logger=a._prevLogger,a},e.Logger=a)}(this),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Raven=e()}}(function(){return function o(s,a,l){function c(n,e){if(!a[n]){if(!s[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var r=a[n]={exports:{}};s[n][0].call(r.exports,function(e){var t=s[n][1][e];return c(t||e)},r,r.exports,o,s,a,l)}return a[n].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,n){function i(e){this.name="RavenConfigError",this.message=e}(i.prototype=new Error).constructor=i,t.exports=i},{}],2:[function(e,t,n){var l=e(5);t.exports={wrapMethod:function(e,i,r){var o=e[i],s=e;if(i in e){var a="warn"===i?"warning":i;e[i]=function(){var e=[].slice.call(arguments),t=l.safeJoin(e," "),n={level:a,logger:"console",extra:{arguments:e}};"assert"===i?!1===e[0]&&(t="Assertion failed: "+(l.safeJoin(e.slice(1)," ")||"console.assert"),n.extra.arguments=e.slice(1),r&&r(t,n)):r&&r(t,n),o&&Function.prototype.apply.call(o,s,e)}}}}},{5:5}],3:[function(V,$,e){(function(e){var l=V(6),a=V(7),r=V(8),c=V(1),t=V(5),o=t.isErrorEvent,s=t.isDOMError,u=t.isDOMException,h=t.isError,d=t.isObject,f=t.isPlainObject,n=t.isUndefined,p=t.isFunction,g=t.isString,_=t.isArray,m=t.isEmptyObject,v=t.each,S=t.objectMerge,E=t.truncate,y=t.objectFrozen,b=t.hasKey,T=t.joinRegExp,A=t.urlencode,i=t.uuid4,O=t.htmlTreeAsString,C=t.isSameException,I=t.isSameStacktrace,w=t.parseUrl,D=t.fill,M=t.supportsFetch,N=t.supportsReferrerPolicy,R=t.serializeKeysForMessage,L=t.serializeException,x=t.sanitize,H=V(2).wrapMethod,P="source protocol user pass host port path".split(" "),k=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;function G(){return+new Date}var U="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},F=U.document,B=U.navigator;function W(t,n){return p(n)?function(e){return n(e,t)}:n}function j(){for(var e in this._hasJSON=!("object"!=typeof JSON||!JSON.stringify),this._hasDocument=!n(F),this._hasNavigator=!n(B),this._lastCapturedException=null,this._lastData=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={release:U.SENTRY_RELEASE&&U.SENTRY_RELEASE.id,logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],headers:null,collectWindowErrors:!0,captureUnhandledRejections:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1,sanitizeKeys:[]},this._fetchDefaults={method:"POST",referrerPolicy:N()?"origin":""},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=U.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=G(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=U.location,this._lastHref=this._location&&this._location.href,this._resetBackoff(),this._originalConsole)this._originalConsoleMethods[e]=this._originalConsole[e]}(j.prototype={VERSION:"3.27.2",debug:!1,TraceKit:l,config:function(e,t){var n=this;if(n._globalServer)return this._logDebug("error","Error: Raven has already been configured"),n;if(!e)return n;var i=n._globalOptions;t&&v(t,function(e,t){"tags"===e||"extra"===e||"user"===e?n._globalContext[e]=t:i[e]=t}),n.setDSN(e),i.ignoreErrors.push(/^Script error\.?$/),i.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),i.ignoreErrors=T(i.ignoreErrors),i.ignoreUrls=!!i.ignoreUrls.length&&T(i.ignoreUrls),i.whitelistUrls=!!i.whitelistUrls.length&&T(i.whitelistUrls),i.includePaths=T(i.includePaths),i.maxBreadcrumbs=Math.max(0,Math.min(i.maxBreadcrumbs||100,100));var r={xhr:!0,console:!0,dom:!0,location:!0,sentry:!0},o=i.autoBreadcrumbs;"[object Object]"==={}.toString.call(o)?o=S(r,o):!1!==o&&(o=r),i.autoBreadcrumbs=o;var s={tryCatch:!0},a=i.instrument;return"[object Object]"==={}.toString.call(a)?a=S(s,a):!1!==a&&(a=s),i.instrument=a,l.collectWindowErrors=!!i.collectWindowErrors,n},install:function(){var e=this;return e.isSetup()&&!e._isRavenInstalled&&(l.report.subscribe(function(){e._handleOnErrorStackInfo.apply(e,arguments)}),e._globalOptions.captureUnhandledRejections&&e._attachPromiseRejectionHandler(),e._patchFunctionToString(),e._globalOptions.instrument&&e._globalOptions.instrument.tryCatch&&e._instrumentTryCatch(),e._globalOptions.autoBreadcrumbs&&e._instrumentBreadcrumbs(),e._drainPlugins(),e._isRavenInstalled=!0),Error.stackTraceLimit=e._globalOptions.stackTraceLimit,this},setDSN:function(e){var t=this,n=t._parseDSN(e),i=n.path.lastIndexOf("/"),r=n.path.substr(1,i);t._dsn=e,t._globalKey=n.user,t._globalSecret=n.pass&&n.pass.substr(1),t._globalProject=n.path.substr(i+1),t._globalServer=t._getGlobalServer(n),t._globalEndpoint=t._globalServer+"/"+r+"api/"+t._globalProject+"/store/",this._resetBackoff()},context:function(e,t,n){return p(e)&&(n=t||[],t=e,e={}),this.wrap(e,t).apply(this,n)},wrap:function(i,r,o){var s=this;if(n(r)&&!p(i))return i;if(p(i)&&(r=i,i=void 0),!p(r))return r;try{if(r.__raven__)return r;if(r.__raven_wrapper__)return r.__raven_wrapper__}catch(e){return r}function e(){var e=[],t=arguments.length,n=!i||i&&!1!==i.deep;for(o&&p(o)&&o.apply(this,arguments);t--;)e[t]=n?s.wrap(i,arguments[t]):arguments[t];try{return r.apply(this,e)}catch(e){throw s._ignoreNextOnError(),s.captureException(e,i),e}}for(var t in r)b(r,t)&&(e[t]=r[t]);return e.prototype=r.prototype,(r.__raven_wrapper__=e).__raven__=!0,e.__orig__=r,e},uninstall:function(){return l.report.uninstall(),this._detachPromiseRejectionHandler(),this._unpatchFunctionToString(),this._restoreBuiltIns(),this._restoreConsole(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},_promiseRejectionHandler:function(e){this._logDebug("debug","Raven caught unhandled promise rejection:",e),this.captureException(e.reason,{mechanism:{type:"onunhandledrejection",handled:!1}})},_attachPromiseRejectionHandler:function(){return this._promiseRejectionHandler=this._promiseRejectionHandler.bind(this),U.addEventListener&&U.addEventListener("unhandledrejection",this._promiseRejectionHandler),this},_detachPromiseRejectionHandler:function(){return U.removeEventListener&&U.removeEventListener("unhandledrejection",this._promiseRejectionHandler),this},captureException:function(t,e){if(e=S({trimHeadFrames:0},e||{}),o(t)&&t.error)t=t.error;else{if(s(t)||u(t)){var n=t.name||(s(t)?"DOMError":"DOMException"),i=t.message?n+": "+t.message:n;return this.captureMessage(i,S(e,{stacktrace:!0,trimHeadFrames:e.trimHeadFrames+1}))}if(h(t))t=t;else{if(!f(t))return this.captureMessage(t,S(e,{stacktrace:!0,trimHeadFrames:e.trimHeadFrames+1}));e=this._getCaptureExceptionOptionsFromPlainObject(e,t),t=new Error(e.message)}}this._lastCapturedException=t;try{var r=l.computeStackTrace(t);this._handleStackInfo(r,e)}catch(e){if(t!==e)throw e}return this},_getCaptureExceptionOptionsFromPlainObject:function(e,t){var n=Object.keys(t).sort(),i=S(e,{message:"Non-Error exception captured with keys: "+R(n),fingerprint:[r(n)],extra:e.extra||{}});return i.extra.__serialized__=L(t),i},captureMessage:function(e,t){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(e)){var n,i=S({message:e+=""},t=t||{});try{throw new Error(e)}catch(e){n=e}n.name=null;var r=l.computeStackTrace(n),o=_(r.stack)&&r.stack[1];o&&"Raven.captureException"===o.func&&(o=r.stack[2]);var s=o&&o.url||"";if((!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(s))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(s))){if(this._globalOptions.stacktrace||t.stacktrace||""===i.message){i.fingerprint=null==i.fingerprint?e:i.fingerprint,(t=S({trimHeadFrames:0},t)).trimHeadFrames+=1;var a=this._prepareFrames(r,t);i.stacktrace={frames:a.reverse()}}return i.fingerprint&&(i.fingerprint=_(i.fingerprint)?i.fingerprint:[i.fingerprint]),this._send(i),this}}},captureBreadcrumb:function(e){var t=S({timestamp:G()/1e3},e);if(p(this._globalOptions.breadcrumbCallback)){var n=this._globalOptions.breadcrumbCallback(t);if(d(n)&&!m(n))t=n;else if(!1===n)return this}return this._breadcrumbs.push(t),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function(e){var t=[].slice.call(arguments,1);return this._plugins.push([e,t]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function(e){return this._globalContext.user=e,this},setExtraContext:function(e){return this._mergeContext("extra",e),this},setTagsContext:function(e){return this._mergeContext("tags",e),this},clearContext:function(){return this._globalContext={},this},getContext:function(){return JSON.parse(a(this._globalContext))},setEnvironment:function(e){return this._globalOptions.environment=e,this},setRelease:function(e){return this._globalOptions.release=e,this},setDataCallback:function(e){var t=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=W(t,e),this},setBreadcrumbCallback:function(e){var t=this._globalOptions.breadcrumbCallback;return this._globalOptions.breadcrumbCallback=W(t,e),this},setShouldSendCallback:function(e){var t=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=W(t,e),this},setTransport:function(e){return this._globalOptions.transport=e,this},lastException:function(){return this._lastCapturedException},lastEventId:function(){return this._lastEventId},isSetup:function(){return!!this._hasJSON&&(!!this._globalServer||(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),!1))},afterLoad:function(){var e=U.RavenConfig;e&&this.config(e.dsn,e.config).install()},showReportDialog:function(e){if(F){if(!(e=S({eventId:this.lastEventId(),dsn:this._dsn,user:this._globalContext.user||{}},e)).eventId)throw new c("Missing eventId");if(!e.dsn)throw new c("Missing DSN");var t=encodeURIComponent,n=[];for(var i in e)if("user"===i){var r=e.user;r.name&&n.push("name="+t(r.name)),r.email&&n.push("email="+t(r.email))}else n.push(t(i)+"="+t(e[i]));var o=this._getGlobalServer(this._parseDSN(e.dsn)),s=F.createElement("script");s.async=!0,s.src=o+"/api/embed/error-page/?"+n.join("&"),(F.head||F.body).appendChild(s)}},_ignoreNextOnError:function(){var e=this;this._ignoreOnError+=1,setTimeout(function(){e._ignoreOnError-=1})},_triggerEvent:function(e,t){var n,i;if(this._hasDocument){for(i in t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),F.createEvent?(n=F.createEvent("HTMLEvents")).initEvent(e,!0,!0):(n=F.createEventObject()).eventType=e,t)b(t,i)&&(n[i]=t[i]);if(F.createEvent)F.dispatchEvent(n);else try{F.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(e){}}},_breadcrumbEventHandler:function(n){var i=this;return function(e){if(i._keypressTimeout=null,i._lastCapturedEvent!==e){var t;i._lastCapturedEvent=e;try{t=O(e.target)}catch(e){t="<unknown>"}i.captureBreadcrumb({category:"ui."+n,message:t})}}},_keypressEventHandler:function(){var r=this;return function(e){var t;try{t=e.target}catch(e){return}var n=t&&t.tagName;if(n&&("INPUT"===n||"TEXTAREA"===n||t.isContentEditable)){var i=r._keypressTimeout;i||r._breadcrumbEventHandler("input")(e),clearTimeout(i),r._keypressTimeout=setTimeout(function(){r._keypressTimeout=null},1e3)}}},_captureUrlChange:function(e,t){var n=w(this._location.href),i=w(t),r=w(e);this._lastHref=t,n.protocol===i.protocol&&n.host===i.host&&(t=i.relative),n.protocol===r.protocol&&n.host===r.host&&(e=r.relative),this.captureBreadcrumb({category:"navigation",data:{to:t,from:e}})},_patchFunctionToString:function(){var e=this;e._originalFunctionToString=Function.prototype.toString,Function.prototype.toString=function(){return"function"==typeof this&&this.__raven__?e._originalFunctionToString.apply(this.__orig__,arguments):e._originalFunctionToString.apply(this,arguments)}},_unpatchFunctionToString:function(){this._originalFunctionToString&&(Function.prototype.toString=this._originalFunctionToString)},_instrumentTryCatch:function(){var c=this,t=c._wrappedBuiltIns;function e(o){return function(e,t){for(var n=new Array(arguments.length),i=0;i<n.length;++i)n[i]=arguments[i];var r=n[0];return p(r)&&(n[0]=c.wrap({mechanism:{type:"instrument",data:{function:o.name||"<anonymous>"}}},r)),o.apply?o.apply(this,n):o(n[0],n[1])}}var u=this._globalOptions.autoBreadcrumbs;function n(l){var e=U[l]&&U[l].prototype;e&&e.hasOwnProperty&&e.hasOwnProperty("addEventListener")&&(D(e,"addEventListener",function(a){return function(e,t,n,i){try{t&&t.handleEvent&&(t.handleEvent=c.wrap({mechanism:{type:"instrument",data:{target:l,function:"handleEvent",handler:t&&t.name||"<anonymous>"}}},t.handleEvent))}catch(e){}var r,o,s;return u&&u.dom&&("EventTarget"===l||"Node"===l)&&(o=c._breadcrumbEventHandler("click"),s=c._keypressEventHandler(),r=function(e){if(e){var t;try{t=e.type}catch(e){return}return"click"===t?o(e):"keypress"===t?s(e):void 0}}),a.call(this,e,c.wrap({mechanism:{type:"instrument",data:{target:l,function:"addEventListener",handler:t&&t.name||"<anonymous>"}}},t,r),n,i)}},t),D(e,"removeEventListener",function(r){return function(e,t,n,i){try{t=t&&(t.__raven_wrapper__?t.__raven_wrapper__:t)}catch(e){}return r.call(this,e,t,n,i)}},t))}D(U,"setTimeout",e,t),D(U,"setInterval",e,t),U.requestAnimationFrame&&D(U,"requestAnimationFrame",function(t){return function(e){return t(c.wrap({mechanism:{type:"instrument",data:{function:"requestAnimationFrame",handler:t&&t.name||"<anonymous>"}}},e))}},t);for(var i=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],r=0;r<i.length;r++)n(i[r])},_instrumentBreadcrumbs:function(){var a=this,e=this._globalOptions.autoBreadcrumbs,t=a._wrappedBuiltIns;function o(t,e){t in e&&p(e[t])&&D(e,t,function(e){return a.wrap({mechanism:{type:"instrument",data:{function:t,handler:e&&e.name||"<anonymous>"}}},e)})}if(e.xhr&&"XMLHttpRequest"in U){var n=U.XMLHttpRequest&&U.XMLHttpRequest.prototype;D(n,"open",function(n){return function(e,t){return g(t)&&-1===t.indexOf(a._globalKey)&&(this.__raven_xhr={method:e,url:t,status_code:null}),n.apply(this,arguments)}},t),D(n,"send",function(r){return function(){var e=this;function t(){if(e.__raven_xhr&&4===e.readyState){try{e.__raven_xhr.status_code=e.status}catch(e){}a.captureBreadcrumb({type:"http",category:"xhr",data:e.__raven_xhr})}}for(var n=["onload","onerror","onprogress"],i=0;i<n.length;i++)o(n[i],e);return"onreadystatechange"in e&&p(e.onreadystatechange)?D(e,"onreadystatechange",function(e){return a.wrap({mechanism:{type:"instrument",data:{function:"onreadystatechange",handler:e&&e.name||"<anonymous>"}}},e,t)}):e.onreadystatechange=t,r.apply(this,arguments)}},t)}e.xhr&&M()&&D(U,"fetch",function(s){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var n,i=e[0],r="GET";if("string"==typeof i?n=i:"Request"in U&&i instanceof U.Request?(n=i.url,i.method&&(r=i.method)):n=""+i,-1!==n.indexOf(a._globalKey))return s.apply(this,e);e[1]&&e[1].method&&(r=e[1].method);var o={method:r,url:n,status_code:null};return s.apply(this,e).then(function(e){return o.status_code=e.status,a.captureBreadcrumb({type:"http",category:"fetch",data:o}),e}).catch(function(e){throw a.captureBreadcrumb({type:"http",category:"fetch",data:o,level:"error"}),e})}},t),e.dom&&this._hasDocument&&(F.addEventListener?(F.addEventListener("click",a._breadcrumbEventHandler("click"),!1),F.addEventListener("keypress",a._keypressEventHandler(),!1)):F.attachEvent&&(F.attachEvent("onclick",a._breadcrumbEventHandler("click")),F.attachEvent("onkeypress",a._keypressEventHandler())));var i=U.chrome,r=!(i&&i.app&&i.app.runtime)&&U.history&&U.history.pushState&&U.history.replaceState;if(e.location&&r){var s=U.onpopstate;U.onpopstate=function(){var e=a._location.href;if(a._captureUrlChange(a._lastHref,e),s)return s.apply(this,arguments)};var l=function(t){return function(){var e=2<arguments.length?arguments[2]:void 0;return e&&a._captureUrlChange(a._lastHref,e+""),t.apply(this,arguments)}};D(U.history,"pushState",l,t),D(U.history,"replaceState",l,t)}if(e.console&&"console"in U&&console.log){var c=function(e,t){a.captureBreadcrumb({message:e,level:t.level,category:"console"})};v(["debug","info","warn","error","log"],function(e,t){H(console,t,c)})}},_restoreBuiltIns:function(){for(var e;this._wrappedBuiltIns.length;){var t=(e=this._wrappedBuiltIns.shift())[0],n=e[1],i=e[2];t[n]=i}},_restoreConsole:function(){for(var e in this._originalConsoleMethods)this._originalConsole[e]=this._originalConsoleMethods[e]},_drainPlugins:function(){var r=this;v(this._plugins,function(e,t){var n=t[0],i=t[1];n.apply(r,[r].concat(i))})},_parseDSN:function(t){var e=k.exec(t),n={},i=7;try{for(;i--;)n[P[i]]=e[i]||""}catch(e){throw new c("Invalid DSN: "+t)}if(n.pass&&!this._globalOptions.allowSecretKey)throw new c("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return n},_getGlobalServer:function(e){var t="//"+e.host+(e.port?":"+e.port:"");return e.protocol&&(t=e.protocol+":"+t),t},_handleOnErrorStackInfo:function(e,t){(t=t||{}).mechanism=t.mechanism||{type:"onerror",handled:!1},this._ignoreOnError||this._handleStackInfo(e,t)},_handleStackInfo:function(e,t){var n=this._prepareFrames(e,t);this._triggerEvent("handle",{stackInfo:e,options:t}),this._processException(e.name,e.message,e.url,e.lineno,n,t)},_prepareFrames:function(i,e){var r=this,o=[];if(i.stack&&i.stack.length&&(v(i.stack,function(e,t){var n=r._normalizeFrame(t,i.url);n&&o.push(n)}),e&&e.trimHeadFrames))for(var t=0;t<e.trimHeadFrames&&t<o.length;t++)o[t].in_app=!1;return o=o.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function(e,t){var n={filename:e.url,lineno:e.line,colno:e.column,function:e.func||"?"};return e.url||(n.filename=t),n.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(n.filename)||/(Raven|TraceKit)\./.test(n.function)||/raven\.(min\.)?js$/.test(n.filename)),n},_processException:function(e,t,n,i,r,o){var s,a=(e?e+": ":"")+(t||"");if((!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t)&&!this._globalOptions.ignoreErrors.test(a))&&(r&&r.length?(n=r[0].filename||n,r.reverse(),s={frames:r}):n&&(s={frames:[{filename:n,lineno:i,in_app:!0}]}),(!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(n))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(n)))){var l=S({exception:{values:[{type:e,value:t,stacktrace:s}]},transaction:n},o),c=l.exception.values[0];null==c.type&&""===c.value&&(c.value="Unrecoverable error caught"),!l.exception.mechanism&&l.mechanism&&(l.exception.mechanism=l.mechanism,delete l.mechanism),l.exception.mechanism=S({type:"generic",handled:!0},l.exception.mechanism||{}),this._send(l)}},_trimPacket:function(e){var t=this._globalOptions.maxMessageLength;if(e.message&&(e.message=E(e.message,t)),e.exception){var n=e.exception.values[0];n.value=E(n.value,t)}var i=e.request;return i&&(i.url&&(i.url=E(i.url,this._globalOptions.maxUrlLength)),i.Referer&&(i.Referer=E(i.Referer,this._globalOptions.maxUrlLength))),e.breadcrumbs&&e.breadcrumbs.values&&this._trimBreadcrumbs(e.breadcrumbs),e},_trimBreadcrumbs:function(e){for(var t,n,i,r=["to","from","url"],o=0;o<e.values.length;++o)if((n=e.values[o]).hasOwnProperty("data")&&d(n.data)&&!y(n.data)){i=S({},n.data);for(var s=0;s<r.length;++s)t=r[s],i.hasOwnProperty(t)&&i[t]&&(i[t]=E(i[t],this._globalOptions.maxUrlLength));e.values[o].data=i}},_getHttpData:function(){if(this._hasNavigator||this._hasDocument){var e={};return this._hasNavigator&&B.userAgent&&(e.headers={"User-Agent":B.userAgent}),U.location&&U.location.href&&(e.url=U.location.href),this._hasDocument&&F.referrer&&(e.headers||(e.headers={}),e.headers.Referer=F.referrer),e}},_resetBackoff:function(){this._backoffDuration=0,this._backoffStart=null},_shouldBackoff:function(){return this._backoffDuration&&G()-this._backoffStart<this._backoffDuration},_isRepeatData:function(e){var t=this._lastData;return!(!t||e.message!==t.message||e.transaction!==t.transaction)&&(e.stacktrace||t.stacktrace?I(e.stacktrace,t.stacktrace):e.exception||t.exception?C(e.exception,t.exception):!e.fingerprint&&!t.fingerprint||Boolean(e.fingerprint&&t.fingerprint)&&JSON.stringify(e.fingerprint)===JSON.stringify(t.fingerprint))},_setBackoffState:function(e){if(!this._shouldBackoff()){var t=e.status;if(400===t||401===t||429===t){var n;try{n=M()?e.headers.get("Retry-After"):e.getResponseHeader("Retry-After"),n=1e3*parseInt(n,10)}catch(e){}this._backoffDuration=n||(2*this._backoffDuration||1e3),this._backoffStart=G()}}},_send:function(t){var e=this._globalOptions,n={project:this._globalProject,logger:e.logger,platform:"javascript"},i=this._getHttpData();i&&(n.request=i),t.trimHeadFrames&&delete t.trimHeadFrames,(t=S(n,t)).tags=S(S({},this._globalContext.tags),t.tags),t.extra=S(S({},this._globalContext.extra),t.extra),t.extra["session:duration"]=G()-this._startTime,this._breadcrumbs&&0<this._breadcrumbs.length&&(t.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),this._globalContext.user&&(t.user=this._globalContext.user),e.environment&&(t.environment=e.environment),e.release&&(t.release=e.release),e.serverName&&(t.server_name=e.serverName),t=this._sanitizeData(t),Object.keys(t).forEach(function(e){(null==t[e]||""===t[e]||m(t[e]))&&delete t[e]}),p(e.dataCallback)&&(t=e.dataCallback(t)||t),t&&!m(t)&&(p(e.shouldSendCallback)&&!e.shouldSendCallback(t)||(this._shouldBackoff()?this._logDebug("warn","Raven dropped error due to backoff: ",t):"number"==typeof e.sampleRate?Math.random()<e.sampleRate&&this._sendProcessedPayload(t):this._sendProcessedPayload(t)))},_sanitizeData:function(e){return x(e,this._globalOptions.sanitizeKeys)},_getUuid:function(){return i()},_sendProcessedPayload:function(t,n){var i=this,e=this._globalOptions;if(this.isSetup())if(t=this._trimPacket(t),this._globalOptions.allowDuplicates||!this._isRepeatData(t)){this._lastEventId=t.event_id||(t.event_id=this._getUuid()),this._lastData=t,this._logDebug("debug","Raven about to send:",t);var r={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};this._globalSecret&&(r.sentry_secret=this._globalSecret);var o=t.exception&&t.exception.values[0];this._globalOptions.autoBreadcrumbs&&this._globalOptions.autoBreadcrumbs.sentry&&this.captureBreadcrumb({category:"sentry",message:o?(o.type?o.type+": ":"")+o.value:t.message,event_id:t.event_id,level:t.level||"error"});var s=this._globalEndpoint;(e.transport||this._makeRequest).call(this,{url:s,auth:r,data:t,options:e,onSuccess:function(){i._resetBackoff(),i._triggerEvent("success",{data:t,src:s}),n&&n()},onError:function(e){i._logDebug("error","Raven transport failed to send: ",e),e.request&&i._setBackoffState(e.request),i._triggerEvent("failure",{data:t,src:s}),e=e||new Error("Raven send failed (no additional details provided)"),n&&n(e)}})}else this._logDebug("warn","Raven dropped repeat event: ",t)},_makeRequest:function(n){var e=n.url+"?"+A(n.auth),t=null,i={};if(n.options.headers&&(t=this._evaluateHash(n.options.headers)),n.options.fetchParameters&&(i=this._evaluateHash(n.options.fetchParameters)),M()){i.body=a(n.data);var r=S({},this._fetchDefaults),o=S(r,i);return t&&(o.headers=t),U.fetch(e,o).then(function(e){if(e.ok)n.onSuccess&&n.onSuccess();else{var t=new Error("Sentry error code: "+e.status);t.request=e,n.onError&&n.onError(t)}}).catch(function(){n.onError&&n.onError(new Error("Sentry error code: network unavailable"))})}var s=U.XMLHttpRequest&&new U.XMLHttpRequest;s&&(("withCredentials"in s||"undefined"!=typeof XDomainRequest)&&("withCredentials"in s?s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status)n.onSuccess&&n.onSuccess();else if(n.onError){var e=new Error("Sentry error code: "+s.status);e.request=s,n.onError(e)}}:(s=new XDomainRequest,e=e.replace(/^https?:/,""),n.onSuccess&&(s.onload=n.onSuccess),n.onError&&(s.onerror=function(){var e=new Error("Sentry error code: XDomainRequest");e.request=s,n.onError(e)})),s.open("POST",e),t&&v(t,function(e,t){s.setRequestHeader(e,t)}),s.send(a(n.data))))},_evaluateHash:function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];t[n]="function"==typeof i?i():i}return t},_logDebug:function(e){this._originalConsoleMethods[e]&&(this.debug||this._globalOptions.debug)&&Function.prototype.apply.call(this._originalConsoleMethods[e],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function(e,t){n(t)?delete this._globalContext[e]:this._globalContext[e]=S(this._globalContext[e]||{},t)}}).setUser=j.prototype.setUserContext,j.prototype.setReleaseContext=j.prototype.setRelease,$.exports=j}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1,2:2,5:5,6:6,7:7,8:8}],4:[function(o,s,e){(function(e){var t=o(3),n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},i=n.Raven,r=new t;r.noConflict=function(){return n.Raven=i,r},r.afterLoad(),s.exports=r,s.exports.Client=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{3:3}],5:[function(S,E,e){(function(e){var s=S(7),i="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function r(e){return void 0===e}function a(e){return"[object Object]"===Object.prototype.toString.call(e)}function l(e){return"[object String]"===Object.prototype.toString.call(e)}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function t(){if(!("fetch"in i))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function o(e,t){var n,i;if(r(e.length))for(n in e)u(e,n)&&t.call(null,n,e[n]);else if(i=e.length)for(n=0;n<i;n++)t.call(null,n,e[n])}function n(e,t){if("number"!=typeof t)throw new Error("2nd argument to `truncate` function should be a number");return"string"!=typeof e||0===t?e:e.length<=t?e:e.substr(0,t)+""}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function h(e){for(var t,n=[],i=0,r=e.length;i<r;i++)l(t=e[i])?n.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&n.push(t.source);return new RegExp(n.join("|"),"i")}function d(e){var t,n,i,r,o,s=[];if(!e||!e.tagName)return"";if(s.push(e.tagName.toLowerCase()),e.id&&s.push("#"+e.id),(t=e.className)&&l(t))for(n=t.split(/\s+/),o=0;o<n.length;o++)s.push("."+n[o]);var a=["type","name","title","alt"];for(o=0;o<a.length;o++)i=a[o],(r=e.getAttribute(i))&&s.push("["+i+'="'+r+'"]');return s.join("")}function f(e,t){return!!(!!e^!!t)}function p(e,t){if(f(e,t))return!1;var n,i,r=e.frames,o=t.frames;if(void 0===r||void 0===o)return!1;if(r.length!==o.length)return!1;for(var s=0;s<r.length;s++)if(n=r[s],i=o[s],n.filename!==i.filename||n.lineno!==i.lineno||n.colno!==i.colno||n.function!==i.function)return!1;return!0}var g=3,_=51200;function m(e){return t=JSON.stringify(e),~-encodeURI(t).split(/%..|./).length;var t}function v(e){if("string"==typeof e){return n(e,40)}if("number"==typeof e||"boolean"==typeof e||void 0===e)return e;var t=Object.prototype.toString.call(e);return"[object Object]"===t?"[Object]":"[object Array]"===t?"[Array]":"[object Function]"===t?e.name?"[Function: "+e.name+"]":"[Function]":e}E.exports={isObject:function(e){return"object"==typeof e&&null!==e},isError:function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}},isErrorEvent:function(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)},isDOMError:function(e){return"[object DOMError]"===Object.prototype.toString.call(e)},isDOMException:function(e){return"[object DOMException]"===Object.prototype.toString.call(e)},isUndefined:r,isFunction:function(e){return"function"==typeof e},isPlainObject:a,isString:l,isArray:c,isEmptyObject:function(e){if(!a(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},supportsErrorEvent:function(){try{return new ErrorEvent(""),!0}catch(e){return!1}},supportsDOMError:function(){try{return new DOMError(""),!0}catch(e){return!1}},supportsDOMException:function(){try{return new DOMException(""),!0}catch(e){return!1}},supportsFetch:t,supportsReferrerPolicy:function(){if(!t())return!1;try{return new Request("pickleRick",{referrerPolicy:"origin"}),!0}catch(e){return!1}},supportsPromiseRejectionEvent:function(){return"function"==typeof PromiseRejectionEvent},wrappedCallback:function(i){return function(e,t){var n=i(e)||e;return t&&t(n)||n}},each:o,objectMerge:function(n,e){return e&&o(e,function(e,t){n[e]=t}),n},truncate:n,objectFrozen:function(e){return!!Object.isFrozen&&Object.isFrozen(e)},hasKey:u,joinRegExp:h,urlencode:function(e){var n=[];return o(e,function(e,t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}),n.join("&")},uuid4:function(){var e=i.crypto||i.msCrypto;if(r(e)||!e.getRandomValues)return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});var t=new Uint16Array(8);e.getRandomValues(t),t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;var n=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return n(t[0])+n(t[1])+n(t[2])+n(t[3])+n(t[4])+n(t[5])+n(t[6])+n(t[7])},htmlTreeAsString:function(e){for(var t,n=[],i=0,r=0,o=" > ".length;e&&i++<5&&!("html"===(t=d(e))||1<i&&80<=r+n.length*o+t.length);)n.push(t),r+=t.length,e=e.parentNode;return n.reverse().join(" > ")},htmlElementAsString:d,isSameException:function(e,t){return!f(e,t)&&(e=e.values[0],t=t.values[0],e.type===t.type&&e.value===t.value&&(n=e.stacktrace,i=t.stacktrace,(!r(n)||!r(i))&&p(e.stacktrace,t.stacktrace)));var n,i},isSameStacktrace:p,parseUrl:function(e){if("string"!=typeof e)return{};var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/),n=t[6]||"",i=t[8]||"";return{protocol:t[2],host:t[4],path:t[5],relative:t[5]+n+i}},fill:function(e,t,n,i){if(null!=e){var r=e[t];e[t]=n(r),e[t].__raven__=!0,e[t].__orig__=r,i&&i.push([e,t,r])}},safeJoin:function(e,t){if(!c(e))return"";for(var n=[],i=0;i<e.length;i++)try{n.push(String(e[i]))}catch(e){n.push("[value cannot be serialized]")}return n.join(t)},serializeException:function e(t,n,i){if(!a(t))return t;i="number"!=typeof(n="number"!=typeof n?g:n)?_:i;var r=function n(i,r){return 0===r?v(i):a(i)?Object.keys(i).reduce(function(e,t){return e[t]=n(i[t],r-1),e},{}):Array.isArray(i)?i.map(function(e){return n(e,r-1)}):v(i)}(t,n);return m(s(r))>i?e(t,n-1):r},serializeKeysForMessage:function(e,t){if("number"==typeof e||"string"==typeof e)return e.toString();if(!Array.isArray(e))return"";if(0===(e=e.filter(function(e){return"string"==typeof e})).length)return"[object has no keys]";if(t="number"!=typeof t?40:t,e[0].length>=t)return e[0];for(var n=e.length;0<n;n--){var i=e.slice(0,n).join(", ");if(!(i.length>t))return n===e.length?i:i+""}return""},sanitize:function(t,e){if(!c(e)||c(e)&&0===e.length)return t;var n,r=h(e),o="********";try{n=JSON.parse(s(t))}catch(e){return t}return function n(i){return c(i)?i.map(function(e){return n(e)}):a(i)?Object.keys(i).reduce(function(e,t){return r.test(t)?e[t]=o:e[t]=n(i[t]),e},{}):i}(n)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{7:7}],6:[function(t,n,e){(function(e){var p=t(5),g={collectWindowErrors:!0,debug:!1},i="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},a=[].slice,_=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function v(){return"undefined"==typeof document||null==document.location?"":document.location.href}g.report=function(){var u,t,r=[],o=null,s=null,h=null;function d(e,t){var n=null;if(!t||g.collectWindowErrors){for(var i in r)if(r.hasOwnProperty(i))try{r[i].apply(null,[e].concat(a.call(arguments,2)))}catch(e){n=e}if(n)throw n}}function n(e,t,n,i,r){var o=p.isErrorEvent(r)?r.error:r,s=p.isErrorEvent(e)?e.message:e;if(h)g.computeStackTrace.augmentStackTraceWithInitialElement(h,t,n,s),f();else if(o&&p.isError(o))d(g.computeStackTrace(o),!0);else{var a,l={url:t,line:n,column:i},c=void 0;if("[object String]"==={}.toString.call(s))(a=s.match(_))&&(c=a[1],s=a[2]);l.func="?",d({name:c,message:s,url:v(),stack:[l]},!0)}return!!u&&u.apply(this,arguments)}function f(){var e=h,t=o;d.apply(s=h=o=null,[e,!1].concat(t))}function e(e,t){var n=a.call(arguments,1);if(h){if(s===e)return;f()}var i=g.computeStackTrace(e);if(h=i,s=e,o=n,setTimeout(function(){s===e&&f()},i.incomplete?2e3:0),!1!==t)throw e}return e.subscribe=function(e){t||(u=i.onerror,i.onerror=n,t=!0),r.push(e)},e.unsubscribe=function(e){for(var t=r.length-1;0<=t;--t)r[t]===e&&r.splice(t,1)},e.uninstall=function(){t&&(i.onerror=u,t=!1,u=void 0),r=[]},e}(),g.computeStackTrace=function(){function i(e){if(void 0!==e.stack&&e.stack){for(var t,n,i,r=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,o=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx(?:-web)|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,s=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,a=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,l=/\((\S*)(?::(\d+))(?::(\d+))\)/,c=e.stack.split("\n"),u=[],h=(/^(.*) is undefined$/.exec(e.message),0),d=c.length;h<d;++h){if(n=r.exec(c[h])){var f=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(t=l.exec(n[2]))&&(n[2]=t[1],n[3]=t[2],n[4]=t[3]),i={url:f?null:n[2],func:n[1]||"?",args:f?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=o.exec(c[h]))i={url:n[2],func:n[1]||"?",args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=s.exec(c[h])))continue;n[3]&&-1<n[3].indexOf(" > eval")&&(t=a.exec(n[3]))?(n[3]=t[1],n[4]=t[2],n[5]=null):0!==h||n[5]||void 0===e.columnNumber||(u[0].column=e.columnNumber+1),i={url:n[3],func:n[1]||"?",args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}if(!i.func&&i.line&&(i.func="?"),i.url&&"blob:"===i.url.substr(0,5)){var p=new XMLHttpRequest;if(p.open("GET",i.url,!1),p.send(null),200===p.status){var g=p.responseText||"",_=(g=g.slice(-300)).match(/\/\/# sourceMappingURL=(.*)$/);if(_){var m=_[1];"~"===m.charAt(0)&&(m=("undefined"==typeof document||null==document.location?"":document.location.origin?document.location.origin:document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:""))+m.slice(1)),i.url=m.slice(0,-4)}}}u.push(i)}return u.length?{name:e.name,message:e.message,url:v(),stack:u}:null}}function u(e,t,n,i){var r={url:t,line:n};if(r.url&&r.line){if(e.incomplete=!1,r.func||(r.func="?"),0<e.stack.length&&e.stack[0].url===r.url){if(e.stack[0].line===r.line)return!1;if(!e.stack[0].line&&e.stack[0].func===r.func)return e.stack[0].line=r.line,!1}return e.stack.unshift(r),e.partial=!0}return!(e.incomplete=!0)}function h(e,t){for(var n,i,r=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,o=[],s={},a=!1,l=h.caller;l&&!a;l=l.caller)if(l!==d&&l!==g.report){if(i={url:null,func:"?",line:null,column:null},l.name?i.func=l.name:(n=r.exec(l.toString()))&&(i.func=n[1]),void 0===i.func)try{i.func=n.input.substring(0,n.input.indexOf("{"))}catch(e){}s[""+l]?a=!0:s[""+l]=!0,o.push(i)}t&&o.splice(0,t);var c={name:e.name,message:e.message,url:v(),stack:o};return u(c,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),c}function d(e,t){var n=null;t=null==t?0:+t;try{if(n=i(e))return n}catch(e){if(g.debug)throw e}try{if(n=h(e,t+1))return n}catch(e){if(g.debug)throw e}return{name:e.name,message:e.message,url:v()}}return d.augmentStackTraceWithInitialElement=u,d.computeStackTraceFromStackProp=i,d}(),n.exports=g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{5:5}],7:[function(e,t,n){function a(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}function r(i,r){var o=[],s=[];return null==r&&(r=function(e,t){return o[0]===t?"[Circular ~]":"[Circular ~."+s.slice(0,a(o,t)).join(".")+"]"}),function(e,t){if(0<o.length){var n=a(o,this);~n?o.splice(n+1):o.push(this),~n?s.splice(n,1/0,e):s.push(e),~a(o,t)&&(t=r.call(this,e,t))}else o.push(t);return null==i?t instanceof Error?function(e){var t={stack:e.stack,message:e.message,name:e.name};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(t):t:i.call(this,e,t)}}(t.exports=function(e,t,n,i){return JSON.stringify(e,r(t,i),n)}).getSerialize=r},{}],8:[function(e,t,n){function h(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e,t,n,i,r,o){return h((s=h(h(t,e),h(i,o)))<<(a=r)|s>>>32-a,n);var s,a}function d(e,t,n,i,r,o,s){return a(t&n|~t&i,e,t,r,o,s)}function f(e,t,n,i,r,o,s){return a(t&i|n&~i,e,t,r,o,s)}function p(e,t,n,i,r,o,s){return a(t^n^i,e,t,r,o,s)}function g(e,t,n,i,r,o,s){return a(n^(t|~i),e,t,r,o,s)}function l(e,t){var n,i,r,o,s;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var a=1732584193,l=-271733879,c=-1732584194,u=271733878;for(n=0;n<e.length;n+=16)l=g(l=g(l=g(l=g(l=p(l=p(l=p(l=p(l=f(l=f(l=f(l=f(l=d(l=d(l=d(l=d(r=l,c=d(o=c,u=d(s=u,a=d(i=a,l,c,u,e[n],7,-680876936),l,c,e[n+1],12,-389564586),a,l,e[n+2],17,606105819),u,a,e[n+3],22,-1044525330),c=d(c,u=d(u,a=d(a,l,c,u,e[n+4],7,-176418897),l,c,e[n+5],12,1200080426),a,l,e[n+6],17,-1473231341),u,a,e[n+7],22,-45705983),c=d(c,u=d(u,a=d(a,l,c,u,e[n+8],7,1770035416),l,c,e[n+9],12,-1958414417),a,l,e[n+10],17,-42063),u,a,e[n+11],22,-1990404162),c=d(c,u=d(u,a=d(a,l,c,u,e[n+12],7,1804603682),l,c,e[n+13],12,-40341101),a,l,e[n+14],17,-1502002290),u,a,e[n+15],22,1236535329),c=f(c,u=f(u,a=f(a,l,c,u,e[n+1],5,-165796510),l,c,e[n+6],9,-1069501632),a,l,e[n+11],14,643717713),u,a,e[n],20,-373897302),c=f(c,u=f(u,a=f(a,l,c,u,e[n+5],5,-701558691),l,c,e[n+10],9,38016083),a,l,e[n+15],14,-660478335),u,a,e[n+4],20,-405537848),c=f(c,u=f(u,a=f(a,l,c,u,e[n+9],5,568446438),l,c,e[n+14],9,-1019803690),a,l,e[n+3],14,-187363961),u,a,e[n+8],20,1163531501),c=f(c,u=f(u,a=f(a,l,c,u,e[n+13],5,-1444681467),l,c,e[n+2],9,-51403784),a,l,e[n+7],14,1735328473),u,a,e[n+12],20,-1926607734),c=p(c,u=p(u,a=p(a,l,c,u,e[n+5],4,-378558),l,c,e[n+8],11,-2022574463),a,l,e[n+11],16,1839030562),u,a,e[n+14],23,-35309556),c=p(c,u=p(u,a=p(a,l,c,u,e[n+1],4,-1530992060),l,c,e[n+4],11,1272893353),a,l,e[n+7],16,-155497632),u,a,e[n+10],23,-1094730640),c=p(c,u=p(u,a=p(a,l,c,u,e[n+13],4,681279174),l,c,e[n],11,-358537222),a,l,e[n+3],16,-722521979),u,a,e[n+6],23,76029189),c=p(c,u=p(u,a=p(a,l,c,u,e[n+9],4,-640364487),l,c,e[n+12],11,-421815835),a,l,e[n+15],16,530742520),u,a,e[n+2],23,-995338651),c=g(c,u=g(u,a=g(a,l,c,u,e[n],6,-198630844),l,c,e[n+7],10,1126891415),a,l,e[n+14],15,-1416354905),u,a,e[n+5],21,-57434055),c=g(c,u=g(u,a=g(a,l,c,u,e[n+12],6,1700485571),l,c,e[n+3],10,-1894986606),a,l,e[n+10],15,-1051523),u,a,e[n+1],21,-2054922799),c=g(c,u=g(u,a=g(a,l,c,u,e[n+8],6,1873313359),l,c,e[n+15],10,-30611744),a,l,e[n+6],15,-1560198380),u,a,e[n+13],21,1309151649),c=g(c,u=g(u,a=g(a,l,c,u,e[n+4],6,-145523070),l,c,e[n+11],10,-1120210379),a,l,e[n+2],15,718787259),u,a,e[n+9],21,-343485551),a=h(a,i),l=h(l,r),c=h(c,o),u=h(u,s);return[a,l,c,u]}function c(e){var t,n="",i=32*e.length;for(t=0;t<i;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function u(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var i=8*e.length;for(t=0;t<i;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function i(e){var t,n,i="0123456789abcdef",r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+=i.charAt(t>>>4&15)+i.charAt(15&t);return r}function r(e){return unescape(encodeURIComponent(e))}function o(e){return c(l(u(t=r(e)),8*t.length));var t}function s(e,t){return function(e,t){var n,i,r=u(e),o=[],s=[];for(o[15]=s[15]=void 0,16<r.length&&(r=l(r,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^r[n],s[n]=1549556828^r[n];return i=l(o.concat(u(t)),512+8*t.length),c(l(s.concat(i),640))}(r(e),r(t))}t.exports=function(e,t,n){return t?n?s(t,e):i(s(t,e)):n?o(e):i(o(e))}},{}]},{},[4])(4)}),function(){function a(){var e,t,n,i,r,o;return void 0===s&&(t=document.createElement("p"),n=document.createElement("p"),i=document.createTextNode("aa"),r=document.createTextNode("aa"),o=document.createRange(),s={},t.appendChild(i),n.appendChild(r),document.body.appendChild(t),document.body.appendChild(n),o.setStart(i,1),o.setEnd(r,1),s.getClientRects=s.getBoundingClientRect=2<o.getClientRects().length,s.getBoundingClientRect||(o.setEnd(i,1),e=o.getBoundingClientRect(),s.getBoundingClientRect=0===e.top&&0===e.left),document.body.removeChild(t),document.body.removeChild(n)),s}var s,e={getClientRects:function(e){var t,n,i,r;if(!a().getClientRects)return e.getClientRects();for(t=[],n=e.endContainer,i=e.endOffset,r=document.createRange();n!==e.commonAncestorContainer;)r.setStart(n,0),r.setEnd(n,i),Array.prototype.push.apply(t,r.getClientRects()),i=Array.prototype.indexOf.call(n.parentNode.childNodes,n),n=n.parentNode;return(r=e.cloneRange()).setEnd(n,i),Array.prototype.push.apply(t,r.getClientRects()),t},getBoundingClientRect:function(e){var t,n,i,r,o=this.getClientRects(e),s=e.getBoundingClientRect();if(0===o.length)return null;if(!a().getBoundingClientRect)return s;if(0===s.width&&0===s.height)return o[0];for(t=0,n=o.length;t<n;t++)r=o[t],i?(i.left=Math.min(i.left,r.left),i.top=Math.min(i.top,r.top),i.right=Math.max(i.right,r.right),i.bottom=Math.max(i.bottom,r.bottom)):i={left:r.left,top:r.top,right:r.right,bottom:r.bottom};return i&&(i.width=i.right-i.left,i.height=i.bottom-i.top),i}};window.RangeFix=e}();var ChromeLocalStorageHandler,GistnoteHighlighter={NOTE_CLASS_NAME:"writio-highlight-note ",IGNORE_TAG_NAME:["A","B","I","SUP","ABBR","BIG","CENTER","CITE","CODE","EM","MARK","Q","S","SMALL","SPAN","STRONG","SUB","U","GISTNOTE"],HIGHLIGHT_CLASS_NAME:"gistnote-highlight",_getLastSpan:function(e){for(var t=e;t.nextSpan;)t=t.nextSpan;return t},_doCreate:function(e,t,n){if(!e.collapsed){var i=e.startContainer,r=e.endContainer,o=e.commonAncestorContainer,s=!0;if(0===e.endOffset){for(;!r.previousSibling&&r.parentNode!==o;)r=r.parentNode;r=r.previousSibling}else r.nodeType===Node.TEXT_NODE?e.endOffset<r.nodeValue.length&&r.splitText(e.endOffset):0<e.endOffset&&(r=r.childNodes.item(e.endOffset-1));i.nodeType===Node.TEXT_NODE?e.startOffset===i.nodeValue.length?s=!1:0<e.startOffset&&r===(i=i.splitText(e.startOffset)).previousSibling&&(r=i):e.startOffset<i.childNodes.length?i=i.childNodes.item(e.startOffset):s=!1,e.setStart(e.startContainer,0),e.setEnd(e.startContainer,0);var a=!1,l=i;do{if(s&&l.nodeType===Node.TEXT_NODE&&!(l.parentNode instanceof HTMLTableElement)&&!(l.parentNode instanceof HTMLTableRowElement)&&!(l.parentNode instanceof HTMLTableColElement)&&!(l.parentNode instanceof HTMLTableSectionElement)){var c=l.previousSibling;c&&c===t.lastSpan||(c=n(l),l.parentNode.insertBefore(c,l)),c.appendChild(l),l=c.lastChild,s=!1}l!==r||r.hasChildNodes()&&s||(a=!0),(l instanceof HTMLScriptElement||l instanceof HTMLStyleElement||l instanceof HTMLSelectElement)&&(s=!1),s&&l.hasChildNodes()?l=l.firstChild:null!==l.nextSibling?(l=l.nextSibling,s=!0):null===l.nextSibling&&(l=l.parentNode,s=!1)}while(!a)}},_darkenHighlight:function(e){var t=e.style.backgroundColor;e.setAttribute("original-color",t),e.style.backgroundColor=GistnoteDomUtil.shadeRGBColor(t,-.07)},isGistNote:function(e){return e&&e.nodeType===Node.ELEMENT_NODE&&"GISTNOTE"===e.nodeName&&void 0!==e.attributes.highlightId},addNoteToHighlight:function(e){for(var t=$("gistnote[highlightId = "+e+"]"),n=0;n<t.length;n++){var i=t[n];i.className=this.NOTE_CLASS_NAME+i.className}},removeNoteFromHighlight:function(e){for(var t=$("gistnote[highlightId = "+e+"]"),n=0;n<t.length;n++){var i=t[n];i.className=i.className.replace(this.NOTE_CLASS_NAME,"")}},createOneHighlightInDom:function(e,t,n,i,r){var o=this.HIGHLIGHT_CLASS_NAME;if(r&&(o=this.NOTE_CLASS_NAME+o),!e||e.collapsed)return!1;var s=document.createElement("gistnote");s.className=o,s.setAttribute("highlightId",t),s.setAttribute("colorNum",n),s.style.backgroundColor=i;var a={firstSpan:null,lastSpan:null};return this._doCreate(e,a,function(){var e=s.cloneNode(!1);return a.firstSpan||(a.firstSpan=e,a.firstSpan.id=t),a.lastSpan&&(a.lastSpan.nextSpan=e),(a.lastSpan=e).firstSpan=a.firstSpan,e}),{el:a.firstSpan}},saveHighlightOrderInDom:function(){for(var e=$("gistnote"),t=[],n=0;n<e.length;n++)e[n].id&&t.push(e[n].id);return t},createAllHighlightsInDomDeprecated:function(e){var t=!0;for(var n in e){var i=GistnoteDomUtil.getNodeFromXPath(n);i?i.innerHTML=e[n].replace(/(<span)( class="writio-highlight[^<]*)(<\/span>)/g,"<gistnote$2</gistnote>"):t=!1}return t},createAllHighlightsInDom:function(e,t,n){var i=performance.now(),r=i,o=!0,s=Object.keys(e),a={};if(n)for(var l=$(".page"),c=0;c<l.length;c++){var u=l[c].id,h=l[c],d=$(window).scrollTop(),f=($(window).height(),$(h).offset().top);$(h).height();a[u]=h}var p=performance.now();Logger.debug("[Highlighter] Querying all PDF pages took "+(p-r).toFixed(4)+" ms. Totally took "+(p-i).toFixed(4)+" ms"),r=p;for(c=0;c<s.length;c++){var g=s[c],_=e[g];h=null;if(_.pdfPageNumber){if(!a["pageContainer"+_.pdfPageNumber]){o=!1;continue}h=a["pageContainer"+_.pdfPageNumber]}if(""!=_.text){var m=GistNoteDomSearch.searchRange(_.text,_.startStr,_.endStr,h);if(m){var v=t[_.colorNum-1];this.createOneHighlightInDom(m,g,_.colorNum,v,_.note)}else o=!1}}p=performance.now();return Logger.debug("[Highlighter] Create all highlights took "+(p-r).toFixed(4)+" ms. Totally took "+(p-i).toFixed(4)+" ms"),o},updateHighlightColorInDom:function(e,t,n){for(var i=$("gistnote[highlightId = "+e+"]"),r=0;r<i.length;r++){var o=i[r];if(!this.isGistNote(o))return!1;o.style.backgroundColor=t,o.setAttribute("colorNum",n),o.setAttribute("original-color",t)}return!0},mouseEnterHighlightInDom:function(e){for(var t=$("gistnote[highlightId = "+e+"]"),n=0;n<t.length;n++){var i=t[n];this.isGistNote(i)&&!i.hasAttribute("original-color")&&this._darkenHighlight(i)}},mouseLeaveHighlightInDom:function(e){for(var t=$("gistnote[highlightId = "+e+"]"),n=0;n<t.length;n++){var i=t[n];this.isGistNote(i)&&i.hasAttribute("original-color")&&!i.hasAttribute("clicked")&&(i.style.backgroundColor=i.attributes["original-color"].value,i.removeAttribute("original-color"))}},lightUpHighlightInDom:function(e){for(var t=$("gistnote[highlightId = "+e+"]"),n=0;n<t.length;n++){var i=t[n];this.isGistNote(i)&&!i.hasAttribute("clicked")&&(i.setAttribute("clicked",""),i.hasAttribute("original-color")||this._darkenHighlight(i))}},lightDownAllHighlightsInDom:function(){for(var e=$("gistnote"),t=0;t<e.length;t++){var n=e[t];this.isGistNote(n)&&n.hasAttribute("original-color")&&(n.style.backgroundColor=n.attributes["original-color"].value,n.removeAttribute("original-color"),n.removeAttribute("clicked"))}},deleteHighlightInDom:function(e,t){function n(e){e.nodeType===Node.TEXT_NODE&&(e.nextSibling&&e.nextSibling.nodeType===Node.TEXT_NODE&&(e.textContent+=e.nextSibling.textContent,e.nextSibling.parentNode.removeChild(e.nextSibling)),e.previousSibling&&e.previousSibling.nodeType===Node.TEXT_NODE&&(e.previousSibling.textContent+=e.textContent,e.parentNode.removeChild(e)))}t=t||null;for(var i=$("gistnote[highlightId = "+e+"]"),r=0;r<i.length;r++){var o=i[r];if(t&&t.resolve(),this.isGistNote(o)){for(;o.hasChildNodes();){n(o.parentNode.insertBefore(o.firstChild,o))}var s=o.previousSibling;o.parentNode.removeChild(o),s&&n(s)}}t&&t.resolve()},deleteAllHighlightsInDom:function(){var e=function(){for(var e=$("gistnote"),t=[],n=0;n<e.length;n++){var i=e[n];if(i.id){var r=$.Deferred();t.push(r),GistnoteHighlighter.deleteHighlightInDom(i.id,r)}}return $.when.apply($,t)},t=this;null!=this.deferred?this.deferred.then(function(){t.deferred=e()}):this.deferred=e()},getRange:function(e){for(var t=$("gistNote[highlightId = "+e+"]"),n=document.createRange(),i=0;i<t.length;i++){var r=t[i];this.isGistNote(r)&&(n.collapsed&&n.setStartBefore(r),n.setEndAfter(r))}return n},getColorCode:function(e){var t=e.style.backgroundColor;return t?GistnoteDomUtil.rgb2hex(t).toUpperCase():null},scrollToHighlightInDom:function(e,t){var n=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if((n=parseInt(n[2],10))<=60)var i="body";else i="html";if(!t){var r=$("#"+e);if(0!==r.length){var o=$(i),s=$(window).scrollTop(),a=r.offset().top-window.innerHeight/2.5;a<0&&(a=0),a-1<=s&&s<=a+1&&o.animate({scrollTop:$(window).scrollTop()+50},100),o.animate({scrollTop:a},"slow")}return null!==r}PdfMessageSender.goToHighlight(t,e)},getContainingPdfPageNumber:function(e){for(var t=null,n=document.getElementsByClassName("page"),i=0;i<n.length;i++){var r=n[i];if(r.contains(e)){t=r.getAttribute("data-page-number");break}}return t}},GistnoteUUID={pattern:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",replacements:{x:"0123456789abcdef",y:"89ab"},pattern_re:/[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[89ab][a-f0-9]{3}-[a-f0-9]{12}/,_getRandomCharacter:function(e){var t=Math.floor(Math.random()*e.length);return e.charAt(t)},_getPatternCharacter:function(e){return e in GistnoteUUID.replacements?GistnoteUUID._getRandomCharacter(GistnoteUUID.replacements[e]):e},validate:function(e){return GistnoteUUID.pattern_re.test(e)},generate:function(){return GistnoteUUID.pattern.split("").map(GistnoteUUID._getPatternCharacter).join("")}},GistNoteDomSearch={_MIN_SEARCH_STR_LENGTH:5,_createRange:function(e,t,n,i){var r=document.createRange();return r.setStart(e,t),r.setEnd(n,i),r},_getStartOffset:function(e,t,n){n=n||!1,e=e.toLowerCase();var i=-1;do{if(-1!==(i=e.indexOf(t[0],i+1))){var r=e.substr(i);if(r=GistnoteStringUtil.normalise(r),n&&t.substr(0,r.length)===r)return{startOffset:i,remainingSearchString:t.substr(r.length)};if(!n&&r.substr(0,t.length)===t)return{startOffset:i,remainingSearchString:""}}}while(-1!==i);return!1},_getEndOffset:function(e,t){e=e.toLowerCase();var n=t[t.length-1],i=-1;do{if(i=e.indexOf(n,i+1),-1!==GistnoteStringUtil.normalise(e.substr(0,i+1)).indexOf(t))return i+1}while(-1!==i);throw"Fail to get endOffset. Textnode does not contain concatSearchStr"},_isTrailing:function(e,t){if(!GistnoteDomUtil.isTextNode(e))return!1;var n=this._getStartOffset(e.data,t,!0);return!(!n||""===n.remainingSearchString)&&n},_isLeading:function(e,t){var n=e.data,i=GistnoteStringUtil.normalise(n);if(0===i.indexOf(t))return{node:e,endOffset:this._getEndOffset(n,t)};if(0!==t.indexOf(i))return null;var r=t.substr(i.length),o=GistnoteDomUtil.getNextTextNode(e);return o?this._isLeading(o,r):null},_searchRecursive:function(e,t){var n=[];if(GistnoteDomUtil.isTextNode(e)){var i=GistnoteStringUtil.normalise(e.data);if(i.length<=0)return n;var r=-1;do{if(0<=(r=i.indexOf(t,r+1))){var o=this._getStartOffset(e.data,t),s=this._getEndOffset(e.data,t),a=this._createRange(e,o.startOffset,e,s);n.push(a)}else{var l=this._isTrailing(e,t);if(l){var c=GistnoteDomUtil.getNextTextNode(e);if(!c)return n;var u=this._isLeading(c,l.remainingSearchString);if(u){a=this._createRange(e,l.startOffset,u.node,u.endOffset);n.push(a)}}}}while(-1!==r);return n}if(GistnoteDomUtil.isExpandable(e)){for(var h=e.childNodes,d=0;d<h.length;++d){var f=h[d],p=this._searchRecursive(f,t);n=n.concat(p)}return n}return n},_filterRange:function(e,t,n){if(0===e.length)return null;if(1===e.length)return e[0];for(var i=0,r=null,o=0;o<e.length;o++){var s=1,a=e[o],l=GistnoteDomUtil.getTextBeforeRange(a,t.length),c=GistnoteDomUtil.getTextAfterRange(a,n.length);if(s+=GistnoteStringUtil.similarity(l,t),3===(s+=GistnoteStringUtil.similarity(c,n)))return a;i<s&&(i=s,r=a)}return r},searchRange:function(e,t,n,i){if(i=i||document.getElementsByTagName("body")[0],""===e)throw"searchStr cannot be empty";var r=GistnoteStringUtil.normalise(e),o=0,s=0;if(e.length<=this._MIN_SEARCH_STR_LENGTH){if(t.length>=this._MIN_SEARCH_STR_LENGTH){o=this._MIN_SEARCH_STR_LENGTH;var a=t.length-this._MIN_SEARCH_STR_LENGTH;r=t.substr(a)+r,t=t.substr(0,a)}else o=t.length,r=t+r,t="";if(n.length>=this._MIN_SEARCH_STR_LENGTH){s=this._MIN_SEARCH_STR_LENGTH;a=this._MIN_SEARCH_STR_LENGTH;r+=n.substr(0,a),n=n.substr(a)}else s=n.length,r+=n,n=""}var l=this._searchRecursive(i,r);if(!l.length)return!1;var c,u=this._filterRange(l,t,n);try{c=GistnoteDomUtil.trimRange(u,o,s)}catch(e){Logger.error(e)}return!(!c||c.collapsed)&&c}},keyMirror=function(e){var t,n={};if(!(e instanceof Object)||Array.isArray(e))throw new Error("keyMirror(...): Argument must be an object.");for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n},GistnoteDomUtil={ELEMENT_NODE_TYPE:1,TEXT_NODE_TYPE:3,UNEXPANDABLE:/(script|style|svg|audio|canvas|figure|video|select|input|textarea)/i,MAX_CHAR:30,_isVisible:function(e){return!window.getComputedStyle(e)||""==window.getComputedStyle(e).getPropertyValue("display")||"none"!=window.getComputedStyle(e).getPropertyValue("display")},_getFirstTextNode:function(e){if(this.isTextNode(e)&&0<e.nodeValue.replace(/\s/g,"").length)return e;if(!this.isExpandable(e))return null;for(var t=e.childNodes,n=0;n<t.length;++n){var i=t[n],r=this._getFirstTextNode(i);if(r)return r}},_getLastTextNode:function(e){if(this.isTextNode(e)&&0<e.nodeValue.replace(/\s/g,"").length)return e;if(this.isExpandable(e))for(var t=e.childNodes,n=t.length-1;0<=n;--n){var i=t[n],r=this._getLastTextNode(i);if(r)return r}return null},_isMarker:function(e){return e&&e.nodeType===Node.ELEMENT_NODE&&"GISTMARKER"===e.nodeName},isEditing:function(){var e=document.activeElement;return e&&~["input","textarea"].indexOf(e.tagName.toLowerCase())?!e.readOnly&&!e.disabled:(e=getSelection().anchorNode)?(e=e.parentNode).isContentEditable:void 0},isSelectingText:function(){if(GistnoteDomUtil.isEditing())return!1;var e=window.getSelection();if(e.isCollapsed)return!1;var t=e.toString();return t&&0<t.replace(/\s/g,"").length},isExpandable:function(e){return e&&e.nodeType===this.ELEMENT_NODE_TYPE&&e.childNodes&&!this.UNEXPANDABLE.test(e.tagName)&&this._isVisible(e)},isTextNode:function(e){return e&&e.nodeType===this.TEXT_NODE_TYPE},getFavIcon:function(){var i="";return $("link").each(function(e,t){var n=$(t).attr("rel");n&&-1!==n.indexOf("icon")&&(i=t.href)}),i},getNodeFromXPath:function(e){var t;try{t=document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(e){Logger.warn("[XPath] Fail to evaluate xpath")}return t},getSelectionStatus:function(){if(this.isSelectingText()){var e=window.getSelection().toString().trim(),t=this.getFineTunedRange();return{selectedText:e,startStr:this.getTextBeforeRange(t),endStr:this.getTextAfterRange(t),selectionRange:t}}return{selectedText:"",startStr:"",endStr:"",selectionRange:null}},getFineTunedRange:function(){if(this.isSelectingText()){var e=window.getSelection();if(e&&0<e.rangeCount){var t=e.getRangeAt(0);return t=this.trimRange(t)}}return null},_trimStart:function(e){var t,n=e.cloneRange();if(GistnoteDomUtil.isTextNode(n.startContainer))n.startOffset+1>=n.startContainer.data.length?(t=GistnoteDomUtil.getNextTextNode(n.startContainer))?n.setStart(t,0):n=null:n.setStart(n.startContainer,n.startOffset+1);else{var i=n.startContainer.childNodes[n.startOffset]||n.startContainer;(t=GistnoteDomUtil._getFirstTextNode(i))||(t=GistnoteDomUtil.getNextTextNode(i)),t?n.setStart(t,0):n=null}return!n||n.collapsed?this._trimSpaces(e,!0):this._trimSpaces(n)},_trimEnd:function(e){var t=e.cloneRange();if(GistnoteDomUtil.isTextNode(t.endContainer))if(0<t.endOffset)t.setEnd(t.endContainer,t.endOffset-1);else{(n=GistnoteDomUtil.getPreviousTextNode(t.endContainer))?t.setEnd(n,n.data.length):t=null}else{var n,i=t.endContainer.childNodes[t.endOffset]||t.endContainer;(n=GistnoteDomUtil.getPreviousTextNode(i))?t.setEnd(n,n.data.length):t=null}return!t||t.collapsed?this._trimSpaces(e,!0):this._trimSpaces(t)},_trimSpaces:function(e,t){if(e.collapsed||t)return e;var n=e.cloneRange();if(!GistnoteDomUtil.isTextNode(n.startContainer)||n.startOffset>=n.startContainer.data.length)return this._trimStart(e);var i=n.startContainer.data[n.startOffset];if(!GistnoteStringUtil.removeSpaces(i).length)return this._trimStart(e);if(!GistnoteDomUtil.isTextNode(n.endContainer)||0===n.endOffset)return this._trimEnd(e);var r=n.endContainer.data[n.endOffset-1];return GistnoteStringUtil.removeSpaces(r).length?n:this._trimEnd(e)},trimRange:function(e,t,n){if(t=t||0,n=n||0,e.collapsed)return console.error("Cannot trim collapsed range"),e;for(var i=this._trimSpaces(e);0<t;)i=this._trimStart(i),t--;for(;0<n;)i=this._trimEnd(i),n--;return i},getTextBeforeRange:function(e,t){t=t||this.MAX_CHAR;var n=e.cloneRange();if(0===n.startOffset){var i=this.getPreviousTextNode(e.startContainer);if(!i)return"";n.setStartBefore(i)}else{if(!e.startContainer.parentNode)return"";n.setStartBefore(e.startContainer)}n.setEnd(e.startContainer,e.startOffset);var r=GistnoteStringUtil.normalise(n.toString());if(r.length>=t)return r.substr(r.length-t);var o=t-r.length;return this.getTextBeforeRange(n,o)+r},getTextAfterRange:function(e,t){t=t||this.MAX_CHAR;var n=e.cloneRange();if(n.endOffset===n.endContainer.length){var i=this.getNextTextNode(e.endContainer);if(!i)return"";n.setEndAfter(i)}else{if(!e.endContainer.parentNode)return"";n.setEndAfter(e.endContainer)}n.setStart(e.endContainer,e.endOffset);var r=GistnoteStringUtil.normalise(n.toString());if(r.length>=t)return r.substr(0,t);var o=t-r.length;return r+this.getTextAfterRange(n,o)},getPreviousTextNode:function(e){if(!e)return null;for(;null!==e.previousSibling;){e=e.previousSibling;var t=this._getLastTextNode(e);if(t)return t}var n=e.parentNode;return n?this.getPreviousTextNode(n):null},getNextTextNode:function(e){if(!e)return null;for(;null!==e.nextSibling;){e=e.nextSibling;var t=this._getFirstTextNode(e);if(t)return t}var n=e.parentNode;return n?this.getNextTextNode(n):null},rgb2hex:function(e){function t(e){return("0"+parseInt(e).toString(16)).slice(-2)}return"#"+t((e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))[1])+t(e[2])+t(e[3])},shadeColor:function(e,t){var n=parseInt(e.slice(1),16),i=t<0?0:255,r=t<0?-1*t:t,o=n>>16,s=n>>8&255,a=255&n;return"#"+(16777216+65536*(Math.round((i-o)*r)+o)+256*(Math.round((i-s)*r)+s)+(Math.round((i-a)*r)+a)).toString(16).slice(1)},shadeRGBColor:function(e,t){var n=e.split(","),i=t<0?0:255,r=t<0?-1*t:t,o=parseInt(n[0].slice(4)),s=parseInt(n[1]),a=parseInt(n[2]);return"rgb("+(Math.round((i-o)*r)+o)+","+(Math.round((i-s)*r)+s)+","+(Math.round((i-a)*r)+a)+")"},getWrappedRange:function(){var n=function(e){if(e.collapsed)return e;var t=e.cloneRange();if(GistnoteDomUtil.isTextNode(t.startContainer)&&t.startOffset<t.startContainer.data.length-1&&!GistnoteStringUtil.isAlphanumberic(t.startContainer.data[t.startOffset]))return t.setStart(t.startContainer,t.startOffset+1),n(t);if(this._isMarker(t.startContainer.previousSibling))GistnoteDomUtil.getPreviousTextNode(t.startContainer.previousSibling);return GistnoteDomUtil.isTextNode(t.endContainer)&&0<t.endOffset&&!GistnoteStringUtil.isAlphanumberic(t.endContainer.data[t.endOffset-1])?(t.setEnd(t.endContainer,t.endOffset-1),n(t)):t},e=this.getFineTunedRange();return!!e&&n(e)},selectRange:function(e){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}},GistnoteStringUtil={_editDistance:function(e,t){e=e.toLowerCase(),t=t.toLowerCase();for(var n=new Array,i=0;i<=e.length;i++){for(var r=i,o=0;o<=t.length;o++)if(0==i)n[o]=o;else if(0<o){var s=n[o-1];e.charAt(i-1)!=t.charAt(o-1)&&(s=Math.min(Math.min(s,r),n[o])+1),n[o-1]=r,r=s}0<i&&(n[t.length]=r)}return n[t.length]},isAlphanumberic:function(e){return/^[a-z0-9()\[\]]+$/i.test(e)},removeSpaces:function(e){return e.replace(/\s/g,"")},normalise:function(e){return this.removeSpaces(e).toLowerCase()},similarity:function(e,t){var n=e,i=t;e.length<t.length&&(n=t,i=e);var r=n.length;return 0==r?1:(r-this._editDistance(n,i))/parseFloat(r)}},ChromeBackgroundMessageIds={INIT_STORES:"INIT_STORES",SHOW_LOCAL_ACCESS_MODAL:"SHOW_LOCAL_ACCESS_MODAL",SHOW_NOTIFICATION:"SHOW_NOTIFICATION",SCROLL_TO_HIGHLIGHT:"SCROLL_TO_HIGHLIGHT",UNLOAD:"UNLOAD",RELOAD:"RELOAD",NESTED_COLLECTION_LIMITED:"NESTED_COLLECTION_LIMITED",SEND_TO_WEBAPP:"SEND_TO_WEBAPP",CONTEXT_MENU_CREATE_HIGHLIGHT:"CONTEXT_MENU_CREATE_HIGHLIGHT",ALERT:"ALERT",PROMPT_LOGIN:"PROMPT_LOGIN"},MessageSender={server:"",pdfViewerURL:"chrome-extension://cbnaodkpfinfiipjblikofhlhlcickei/src/pdfviewer/web/viewer.html?file=",_sendMessage:function(t,e){t.documentUrl=document.URL,t.isInsideWebApp=0<t.documentUrl.indexOf("webapp=true"),0===t.documentUrl.indexOf(this.pdfViewerURL)&&t.isInsideWebApp&&(t.documentUrl=UrlUtil.getOriginalUrlForPDF(t.documentUrl)),t.websiteTitle=document.title;try{chrome.runtime.sendMessage(t,e),Logger.debug("[MessageGateway] <== Send Message: "+t.id)}catch(e){Logger.warn("[MessageGateway] Fail to send message "+t.id)}},sendToWebAppAction:function(e){window.parent&&window.parent.postMessage({detail:e},this.server)},redirectMessage:function(e){this._sendMessage(e)},sendActualFacebookShareMessage:function(){this._sendMessage({id:"ACTUAL_FACEBOOK_SHARE"})},sendHidePaymentModalMessage:function(){this._sendMessage({id:"HIDE_PAYMENT_MODAL"})},sendOpenWITHDefaultPdfViewerMessage:function(e,t){var n={id:"OPEN_OR_SWITCH_TO_URL",url:e,newTab:t};this._sendMessage(n)},sendCheckTabSettingMessage:function(t){this._sendMessage({id:"CHECK_TAB_SETTING"},function(e){t(e)})},sendCreateHighlightInDatabaseMessage:function(e,t,n,i){var r={id:"CREATE_HIGHLIGHT",highlightId:e,highlight:t,isOnboardingPage:n,pageHTML:i};this._sendMessage(r)},sendCreateImageInDatabaseMessage:function(e,t,n){var i={id:"CREATE_IMAGE",imageId:e,image:t,base64String:n};this._sendMessage(i)},sendUpdateHighlightColorInDatabaseMessage:function(e,t){var n={id:"UPDATE_HIGHLIGHT_COLOR",highlightId:e,colorNum:t};this._sendMessage(n)},sendEditWebsiteInDatabaseMessage:function(e,t,n,i){var r={id:"EDIT_WEBSITE",websiteId:e,title:t,description:n,highlightOrder:i};this._sendMessage(r)},sendDeleteHighlightInDatabaseMessage:function(e,t){var n={id:"DELETE_HIGHLIGHT_IN_DB",websiteId:t,highlightId:e};this._sendMessage(n)},sendUpdateHighlightsInDatabaseMessage:function(e,t){var n={id:"UPDATE_HIGHLIGHTS_IN_DB",highlights:e,pathToHTML:t};this._sendMessage(n)},sendSwitchFolderMessage:function(e){var t={id:"SWITCH_FOLDER",folderId:e};this._sendMessage(t)},sendCreateNotificationMessage:function(e){var t={id:"CREATE_NOTIFICATION",message:e};this._sendMessage(t)},sendLogEventMessage:function(e,t){var n={id:"LOG_EVENT",event:e,meta:t};this._sendMessage(n)},sendShowSideBarMessage:function(){this._sendMessage({id:"SHOW_SIDEBAR"})},sendShowSideBarAndMenuMessage:function(){this._sendMessage({id:"SHOW_SIDEBAR_AND_MENU"})},sendHideSideBarMessage:function(){this._sendMessage({id:"HIDE_SIDEBAR_IF_NOT_PINNED"})},sendSaveWebsiteMessage:function(e,t,n,i){var r={id:"SAVE_WEBSITE",folderId:e,title:t,favIconUrl:n,description:i};this._sendMessage(r)},sendHighlightModeSettings:function(e){var t={id:"HIGHLIGHT_MODE_SETTINGS",highlightModeSettings:e};this._sendMessage(t)},sendLogPdfErrorMessage:function(e){var t={id:"PDF_ERROR",log:e};this._sendMessage(t)},sendMoveHighlightAndSwitchFolderMessage:function(e,t,n,i){var r={id:"MOVE_HIGHLIGHT_AND_SWITCH_FOLDER",fromFolderId:e,toFolderId:t,website:n,highlight:i};this._sendMessage(r)},sendOpenPdfViewerMessage:function(){this._sendMessage({id:"OPEN_PDF_VIEWER"})},sendSkipGuideMessage:function(){this._sendMessage({id:"SKIP_GUIDE"})},sendAddColorReferralEmailMessage:function(e){var t={id:"SEND_ADD_COLOR_REFERRAL_EMAIL",emails:e};this._sendMessage(t)},sendGrantGmailAccessMessage:function(e){this._sendMessage({id:"GRANT_GMAIL_ACCESS"})}},MessageHandler={initiated:!1,init:function(){MessageHandler.initiated=!0,chrome.runtime.onMessage.addListener(MessageHandler.onRuntimeMessage)},onRuntimeMessage:function(e,t,n){switch(e.id){case ChromeBackgroundMessageIds.SEND_TO_WEBAPP:var i=document.getElementById("weava-message-listener");i&&i.dispatchEvent(new CustomEvent("WeavaMessage",{detail:e.message}));break;case ChromeBackgroundMessageIds.SCROLL_TO_HIGHLIGHT:GistnoteHighlighter.scrollToHighlightInDom(e.highlightId,e.pdfPageNumber);break;case ChromeBackgroundMessageIds.SHOW_NOTIFICATION:NotificationStoreActions.showNotification(e.message);break;case ChromeBackgroundMessageIds.UNLOAD:GistnoteContentScriptApp.destroy();break;case ChromeBackgroundMessageIds.RELOAD:GistnoteContentScriptApp.reload();break;case ChromeBackgroundMessageIds.NESTED_COLLECTION_LIMITED:SettingStoreActions.showPaymentModel();break;case ChromeBackgroundMessageIds.CONTEXT_MENU_CREATE_HIGHLIGHT:var r=GistnoteUUID.generate();PopoverStoreActions.createHighlight(r,e.colorNum,"","CONTEXT_MENU");break;case ChromeBackgroundMessageIds.PROMPT_LOGIN:PopoverStoreActions.hidePopover(),SidebarStoreActions.showSidebar(),NotificationStoreActions.createNotification(NotificationMessageConstants.PROMPT_LOGIN),MessageSender.sendLogEventMessage("PROMPT_LOGIN")}Logger.debug("[MessageGateway] ==> Received Message: "+e.id)}};ChromeLocalStorageHandler={folderUpdateTimeout:null,dataReducerUpdateTimeout:null,init:function(){chrome.storage.local.get("reducers",function(e){for(var t=e.reducers,n=0;n<t.length;n++){var i=t[n];chrome.storage.local.get(i,function(e){ChromeLocalStorageHandler.handleReducerChange(Object.keys(e)[0],e[Object.keys(e)[0]])})}}),chrome.storage.onChanged.removeListener(ChromeLocalStorageHandler.listener),chrome.storage.onChanged.addListener(ChromeLocalStorageHandler.listener)},listener:function(e,t){"local"===t&&ChromeLocalStorageHandler.onChromeStorageChange(e)},onChromeStorageChange:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var i=t[n],r=e[i].newValue;ChromeLocalStorageHandler.handleReducerChange(i,r)}},handleReducerChange:function(e,t){switch(e){case"workspaceReducer":SidebarStoreActions.setSideBarDisplayStatus(t.sidebarStatus[GistnoteContentScriptApp.TAB_ID]),1===t.autoPdf&&(t.autoPdf=!0),t.highlightMode&&(t.highlightMode=!0),SettingStoreActions.updateWorkSpace({extensionHighlightModeSettings:{pdf:t.autoPdf,highlighter:t.highlightMode},commands:t.commands}),GistnoteContentScriptApp.PDF_MODE&&initPDFCheckBox(t.autoPdf),t.showPaymentModal?SettingStoreActions.showPaymentModel():SettingStoreActions.hidePaymentModel();break;case"firebaseAuthReducer":-1!==t.authStatus.indexOf("TRIGGERING")?-1===t.authStatus.indexOf("TRIGGERING_FORGET_PASSWORD")&&SidebarStoreActions.showConnectingScreen():chrome.storage.local.get("isAnonymous",function(e){t.user&&(t.user.isAnonymous=e.isAnonymous||!1),SettingStoreActions.updateUser(t.user,t.token,t.customToken,t.userMeta)}),t.signupError&&SidebarStoreActions.showSignUpMessage(t.signupError),t.loginError&&SidebarStoreActions.showLoginMessage(t.loginError);break;case"dataReducer":0!==Object.keys(t.folderMetaMap).length&&(clearTimeout(this.dataReducerUpdateTimeout),this.dataReducerUpdateTimeout=setTimeout(function(){var e=this.modifyActiveFolderStructure(t.folderMetaMap,t.activeFolderMap,t.activeWebsiteBodyMap,t.nonActiveWebsiteBodyMap,t.websiteListPaginationMap,t.searchState);SettingStoreActions.updateFolder(e,t.folderMetaMap,t.sharingFolderUserMeta,t.sharingFolderInvitedMeta,t.activeFolderUserMeta,t.folderInvitations)}.bind(this),500));break;case"stripeReducer":SettingStoreActions.updateStripe(t.stripeData);break;case"questionnaireReducer":SettingStoreActions.updateQuestionnaire(t.answer);break;case"onboardingReducer":SettingStoreActions.updateOnboarding(t.onboarding);break;case"syncProcessReducer":"ERROR"!==t.syncProcessStatus&&"RETRY"!==t.syncProcessStatus||SidebarStoreActions.showLoginMessage(t.error),SettingStoreActions.toggleConnectionStatus(!t.offline)}},modifyActiveFolderStructure:function(e,t,n,i,r,o){var s=Object.keys(t);if(0===s.length)return null;var a=t[s[0]];a.folderId=s[0],a.websiteListPagination=r;for(var l=[],c=Object.keys(n),u=0;u<c.length;u++)n[c[u]].websiteId=c[u],n[c[u]].activeWebsite=!0,UrlUtil.getOriginalUrlForPDF(n[c[u]].url)===UrlUtil.getOriginalUrlForPDF(document.URL)&&(a.activeWebsite=n[c[u]]),n[c[u]].url&&l.push(n[c[u]]);var h=Object.keys(i);for(u=0;u<h.length;u++){if(i[h[u]].websiteId=h[u],i[h[u]].activeWebsite=!1,o.searchResult.websiteIds)for(var d=o.searchResult.websiteIds,f=0;f<d.length;f++)if(d[f].websiteId===h[u]){i[h[u]].score=d[f].score;break}i[h[u]].url&&-1===c.indexOf(h[u])&&l.push(i[h[u]])}a.websites=l,a.searchState=o;var p=function(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;n++)t[n]===a.folderId?(a.folderMetaMap=e[t[n]].folderMetaMap,a.shared=e[t[n]].shared):p(e[t[n]].folderMetaMap)};return p(e),a},destroy:function(){chrome.storage.onChanged.removeListener(ChromeLocalStorageHandler.listener)}};var messageChannel=document.getElementById("gistnote-pdf-render-msg"),PdfMessageHandler={init:function(e){if(messageChannel){messageChannel.addEventListener("onPDFMessage",function(e){var t=e.data;switch(t.id){case"RENDER":HighlightStoreActions.renderHighlights(t.pageNumber);break;case"OPEN_WEBSITE":MessageSender.sendOpenWITHDefaultPdfViewerMessage(t.url,!1)}});var t=document.createEvent("Event");t.initEvent("onExtensionMessage",!0,!0),t.data={id:"READY",isInsideWebApp:e},messageChannel.dispatchEvent(t)}else MessageSender.sendOpenWITHDefaultPdfViewerMessage(document.URL,!1)}},PdfMessageSender={goToHighlight:function(e,t){var n=document.createEvent("Event");n.initEvent("onExtensionMessage",!0,!0),n.data={id:"GO_TO_HIGHLIGHT",page:e,highlightId:t},messageChannel.dispatchEvent(n)},cacheHighlights:function(e,t){var n=document.createEvent("Event");n.initEvent("onExtensionMessage",!0,!0),n.data={id:"CACHE_HIGHLIGHTS",highlights:e,colorCodes:t},messageChannel.dispatchEvent(n)}},IframeMessageHandler={_iframeMessageListenerRef:null,_EXTENSION_DOMAIN:"chrome-extension://"+chrome.runtime.id,_active:!0,_iframeMessageListener:function(e){var t=e.data;if(this._active&&t){switch(t.id){case"SHOW_SHARE_WEBSITE_MODAL":SettingStoreActions.showShareWebsiteModel();break;case"CLOSE_REFERRAL_PROMOTION":SettingStoreActions.hideSocialShareModel();break;case"REFERRAL_PROMOTION_CLICKED":SettingStoreActions.showSocialShareModel();break;case"SHOW_UPGRADE_ANONYMOUS_MODAL":SettingStoreActions.showUpgradeAnonymousModalMessage();break;case"PROMPT_LOGIN":PopoverStoreActions.hidePopover(),SidebarStoreActions.showSidebar(),NotificationStoreActions.createNotification(NotificationMessageConstants.PROMPT_LOGIN),MessageSender.sendLogEventMessage("PROMPT_LOGIN");break;case"PROMPT_CONNECTING":PopoverStoreActions.hidePopover(),SidebarStoreActions.showSidebar(),NotificationStoreActions.createNotification(NotificationMessageConstants.PROMPT_CONNECTING),MessageSender.sendLogEventMessage("PROMPT_CONNECTING");break;case"PROMPT_NETWORK":PopoverStoreActions.hidePopover(),SidebarStoreActions.showSidebar(),NotificationStoreActions.createNotification(NotificationMessageConstants.PROMPT_NETWORK),MessageSender.sendLogEventMessage("PROMPT_NETWORK");break;case"POP_UPDATE_HIGHLIGHT":PopoverStoreActions.updateHighlightColor(t.colorNum);break;case"POP_CREATE_HIGHLIGHT":var n=GistnoteUUID.generate();PopoverStoreActions.createHighlight(n,t.colorNum,t.colorCode);break;case"POP_DELETE_HIGHLIGHT":PopoverStoreActions.deleteHighlight();break;case"POP_NOTE_HEIGHT_FEEDBACK":PopoverStoreActions.updateNoteHeight(t.noteHeight);break;case"POP_CLICKED_ACTIVE_FOLDER":SidebarStoreActions.showSidebar(),SidebarStoreActions.showSidebarMenu();break;case"POP_CLICKED_EDIT_COLOR":break;case"POP_CREATE_FOLDER":PopoverStoreActions.createFolder();break;case"POP_SWITCH_FOLDER":HighlightStoreActions.switchFolder(t.folderId);break;case"POP_TOGGLE_SETTING":PopoverStoreActions.toggleSetting(t.show);break;case"SAVE_WEBSITE":SidebarStoreActions.saveWebsite(t.folderId,document.title,GistnoteDomUtil.getFavIcon(),"");break;case"DELETE_HIGHLIGHT":SidebarStoreActions.deleteHighlight(t.highlightId,t.websiteId);break;case"CREATE_NOTIFICATION":NotificationStoreActions.createNotification(t.notificationMessage);break;case"HIDE_LOCAL_ACCESS_IFRAME":SettingStoreActions.hideLocalAccessModal();break;case"FACEBOOK_REFERRAL":MessageSender.sendLogEventMessage("FACEBOOK_REFERRAL"),GeneralActions.redirectMessage(t),SettingStoreActions.hidePaymentModel(),MessageSender.sendHidePaymentModalMessage();break;case"TWITTER_REFERRAL":MessageSender.sendLogEventMessage("TWITTER_REFERRAL"),GeneralActions.redirectMessage(t),SettingStoreActions.hidePaymentModel(),MessageSender.sendHidePaymentModalMessage();break;case"RELOAD_EXTENSION":GeneralActions.redirectMessage(t),setTimeout(function(){location.reload()},5e3);break;case"EDIT_FOLDER":PopoverStoreActions.hidePopover(),GeneralActions.redirectMessage(t);break;case"LOGIN":case"FORGET_PASSWORD":case"SIGNUP":case"CREATE_FOLDER":case"CREATE_NESTED_FOLDER":case"DELETE_FOLDER":case"EDIT_NOTE":case"UPDATE_FOLDERS_ORDER":case"EDIT_WEBSITE":case"OPEN_OR_SWITCH_TO_URL":case"OPEN_OR_SWITCH_TO_WEAVA_URL":case"GOOGLE_LOGIN":case"GO_TO_LOGIN_PAGE":case"FACEBOOK_LOGIN":case"SIGN_OUT":case"SWITCH_FOLDER":case"DELETE_WEBSITE":case"MOVE_HIGHLIGHT":case"MOVE_WEBSITE":case"MOVE_FOLDER":case"LOG_EVENT":case"LOG_AB_TESTING_GROUP_EVENT":case"HIGHLIGHT_MODE_SETTINGS":case"CLOSE_NOTIFICATION_MODAL":case"SUBMIT_QUESTIONNAIRE":case"WEBSITE_LIST_NEXT_PAGE":case"CHANGE_WEBSITE_ORDER":case"TOGGLE_PIN_MODE_BY_SIDEBAR":case"SEARCH_IN_FOLDER":case"EXIT_SEARCH_MODE":case"DELETE_IMAGE":case"QUERY_FOLDER_COLLABORATION_INFO":case"RESET_FOLDER_COLLABORATION_INFO":case"INVITE_COLLABORATOR":case"DELETE_COLLABORATORS":case"FETCH_TOKEN":case"CREATE_WEBSITE":case"GO_TO_LINK_ACCOUNT_PAGE":case"CLOSE_HIGHLIGHT_MODE_GUIDE":GeneralActions.redirectMessage(t);break;case"SHOW_IFRAME_MENU":SidebarStoreActions.showSidebarMenu();break;case"HIDE_IFRAME_MENU":SidebarStoreActions.hideSidebarMenu();break;case"COLOR_LIMIT_EXCEED_REFERRAL":SettingStoreActions.showSocialShareModel();break;case"SHOW_PAYMENT_MODEL":SettingStoreActions.showPaymentModel();break;case"WEB_APP_SCROLL_TO_HIGHLIGHT":GistnoteHighlighter.scrollToHighlightInDom(t.highlightId,t.pdfPageNumber);break;default:return}this._debug("[IframeMessage] ==> Received Message: "+t.id+" from "+t.source)}},_debug:function(e){StaticConstants.IFRAME_MESSAGE_HANDLER_DEBUG_MODE&&Logger.debug(e)},init:function(){this._active=!0,this._iframeMessageListenerRef&&window.removeEventListener("message",this._iframeMessageListenerRef),this._iframeMessageListenerRef=this._iframeMessageListener.bind(this),window.addEventListener("message",this._iframeMessageListenerRef)},destroy:function(){this._debug("Destroying Iframe Message Handler..."),this._active=!1,window.removeEventListener("message",this._iframeMessageListenerRef)}},OnBoardArrow=function(t){this._ID="gistnote-highlight-onboard-arrow",this._HTML="src/pdfviewer/onboardArrow/onboardArrow.html",this._$arrowWrapper=null,chrome.storage.local.get("onboarding",function(e){(e.onboarding?e.onboarding.pdfArrow:null)||(this._$arrowWrapper=$("<div>",{id:this._ID}).appendTo(t),this._$arrowWrapper.load(chrome.extension.getURL(this._HTML),function(){this._bindListeners()}.bind(this)))}.bind(this))};OnBoardArrow.prototype._clickListener=function(){this._$arrowWrapper.hide(),chrome.storage.local.get("onboarding",function(e){chrome.storage.local.set({onboarding:Object.assign({},e,{pdfArrow:!0})})})},OnBoardArrow.prototype._bindListeners=function(){this._$arrowWrapper.on("click",this._clickListener.bind(this))};var HighlightPdfButton=function(e){if(this._BUTTON_ID="gistnote-highlight-pdf-button",this._BUTTON_HTML="src/pdfviewer/highlightPdfButton/highlight-pdf-button.html",this._VIEWER_URL=chrome.extension.getURL("src/pdfviewer/web/viewer.html"),this._$buttonEl=null,!$("#"+this._BUTTON_ID).length){var t=$("<div>",{id:this._BUTTON_ID});t.appendTo(e),t.load(chrome.extension.getURL(this._BUTTON_HTML),function(){this._$buttonEl=$(".switch-pdf-viewer-button"),this._bindEvents()}.bind(this))}};HighlightPdfButton.prototype={_getViewerURL:function(e){return this._VIEWER_URL+"?file="+e},_buttonClickListener:function(){chrome.storage.local.get("onboarding",function(e){chrome.storage.local.set({onboarding:Object.assign({},e,{pdfArrow:!0})})}),MessageSender.sendOpenPdfViewerMessage()},_bindEvents:function(){this._$buttonEl.on("click.weava",this._buttonClickListener.bind(this))},show:function(){this._$buttonEl&&this._$buttonEl[0]?this._$buttonEl[0].style.setProperty("display","block","important"):console.warn("PDF button not exist")},hide:function(){this._$buttonEl&&this._$buttonEl[0]||console.warn("PDF button not exist")}};var HighlightPdfButtonManager=function(e,t){this._HIDE_TIMEOUT=2e3,this._FORCE_HIDE_TIMEOUT=1e3,this._SHOW_VELOCITY=10,this._TOP_TOOLBAR_REVEAL_DISTANCE=100,this._SIDE_TOOLBAR_REVEAL_DISTANCE_RIGHT=150,this._SIDE_TOOLBAR_REVEAL_DISTANCE_BOTTOM=250,this._SIDE_TOOLBAR_DISTANCE_RIGHT_START=83,this._SIDE_TOOLBAR_DISTANCE_RIGHT_END=49,this._SIDE_TOOLBAR_DISTANCE_BOTTOM_START=190,this._SIDE_TOOLBAR_DISTANCE_BOTTOM_END=155,this._window=e,this._button=t,this._buttonTimeout=null,this.isMouseNearTopToolbar_=!1,this.isMouseNearSideToolbar_=!1,this._sideToolbarAllowedOnly=!1,this._sideToolbarAllowedOnlyTimer=null,this._keyboardNavigationActive=!1,this._lastMovementTimestamp=null,this._bindEvents(),this._hideButtonAfterTimeout()};HighlightPdfButtonManager.prototype={_isRTL:function(){return"rtl"==document.documentElement.dir},_isMouseNearTopToolbar:function(e){return e.target!==this._button&&e.y<this._TOP_TOOLBAR_REVEAL_DISTANCE},_isMouseNearSideToolbar:function(e,t){var n=e.x>t.innerWidth-this._SIDE_TOOLBAR_REVEAL_DISTANCE_RIGHT;this._isRTL()&&(n=e.x<this._SIDE_TOOLBAR_REVEAL_DISTANCE_RIGHT);var i=e.y>t.innerHeight-this._SIDE_TOOLBAR_REVEAL_DISTANCE_BOTTOM;return n&&i},_isMouseOnFitToScreen:function(e,t){var n=e.x>t.innerWidth-this._SIDE_TOOLBAR_DISTANCE_RIGHT_START&&e.x<t.innerWidth-this._SIDE_TOOLBAR_DISTANCE_RIGHT_END;this._isRTL()&&(n=e.x<this._SIDE_TOOLBAR_DISTANCE_RIGHT_START&&e.x>this._SIDE_TOOLBAR_DISTANCE_RIGHT_END);var i=e.y>t.innerHeight-this._SIDE_TOOLBAR_DISTANCE_BOTTOM_START&&e.y<t.innerHeight-this._SIDE_TOOLBAR_DISTANCE_BOTTOM_END;return n&&i},_isHighVelocityMouseMove:function(e){if("mousemove"==e.type)if(null==this._lastMovementTimestamp)this._lastMovementTimestamp=this._getCurrentTimestamp();else{var t=Math.sqrt(e.movementX*e.movementX+e.movementY*e.movementY),n=this._getCurrentTimestamp(),i=n-this._lastMovementTimestamp;if(this._lastMovementTimestamp=n,0!=i)return t/i>this._SHOW_VELOCITY}return!1},_getCurrentTimestamp:function(){return Date.now()},_showButton:function(){this._button.show()},_showButtonForKeyboardNavigation:function(){this._keyboardNavigationActive=!0,this._showButton()},_hideToolbarsForMouseOut:function(){this.isMouseNearTopToolbar_=!1,this.isMouseNearSideToolbar_=!1,this._hideButtonAfterTimeout()},_hideButton:function(){this.isMouseNearSideToolbar_||this.isMouseNearTopToolbar_||this._keyboardNavigationActive||this._button.hide()},_hideButtonAfterTimeout:function(){this._buttonTimeout&&this._window.clearTimeout(this._buttonTimeout),this._buttonTimeout=this._window.setTimeout(this._hideButton.bind(this),this._HIDE_TIMEOUT)},_hideSingleToolbarLayer:function(){},_forceHideTopToolbar:function(){console.warn("...FORCE TOOL BAR"),this._sideToolbarAllowedOnly=!0,this._sideToolbarAllowedOnlyTimer=this._window.setTimeout(function(){this._sideToolbarAllowedOnlyTimer=null}.bind(this),this._FORCE_HIDE_TIMEOUT)},_shouldIgnoreKeyEvents:function(e){for(;null!=e.shadowRoot&&null!=e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e.isContentEditable||"INPUT"==e.tagName||"TEXTAREA"==e.tagName},_handleMouseClick:function(e){this.isMouseOnFitToScreen_=this._isMouseOnFitToScreen(e,this._window),this.isMouseOnFitToScreen_&&this._hideButton()},_handleMouseMove:function(e){this.isMouseNearTopToolbar_=this._isMouseNearTopToolbar(e),this.isMouseNearSideToolbar_=this._isMouseNearSideToolbar(e,this._window),this._keyboardNavigationActive=!1;var t=e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents;this.isMouseNearSideToolbar_||this._sideToolbarAllowedOnlyTimer||(this._sideToolbarAllowedOnly=!1),this.isMouseNearTopToolbar_&&(this._sideToolbarAllowedOnly=!1),(this.isMouseNearTopToolbar_||this.isMouseNearSideToolbar_||this._isHighVelocityMouseMove(e)||t)&&(this._sideToolbarAllowedOnly?console.warn("SHOW ZOOM BAR!!!"):this._showButton()),this._hideButtonAfterTimeout()},_handleKeyEvent:function(e){if(!this._shouldIgnoreKeyEvents(document.activeElement)&&!e.defaultPrevented){switch(this._hideButtonAfterTimeout(e),e.keyCode){case 9:return void this._showButtonForKeyboardNavigation();case 27:return void this._hideButton();case 71:return void((e.ctrlKey||e.metaKey)&&e.altKey&&this._showButton())}e.shiftKey||e.ctrlKey||e.altKey||this._showButton()}},_handleMouseEvent:function(e){"mousemove"==e.type?this._handleMouseMove(e):"mouseout"==e.type&&this._hideToolbarsForMouseOut()},_bindEvents:function(){document.addEventListener("keydown",this._handleKeyEvent.bind(this)),document.addEventListener("mousemove",this._handleMouseEvent.bind(this)),document.addEventListener("mouseout",this._handleMouseEvent.bind(this))}};var GistnoteDispatcher={registeredCallbacks:[],_dispatch:function(e){for(var t=0;t<this.registeredCallbacks.length;t++)this.registeredCallbacks[t](e)},register:function(e){this.registeredCallbacks.push(e)},unRegister:function(e){var t=this.registeredCallbacks.indexOf(e);-1!==t&&this.registeredCallbacks.splice(t,1)},handleViewAction:function(e){this._dispatch({source:"VIEW_ACTION",action:e})},handleServerAction:function(e){this._dispatch({source:"SERVER_ACTION",action:e})}};NotificationActionConstants=keyMirror({SHOW_NOTIFICATION:null,HIDE_NOTIFICATION:null,SHOW_LOCAL_NOTIFICATION:null}),NotificationDisplayStateConstants=keyMirror({HIDDEN:null,SHOWN:null}),NotificationMessageConstants=keyMirror({PROMPT_NETWORK:null,PROMPT_LOGIN:null,PROMPT_CONNECTING:null,COPY_HIGHLIGHT:null,HIGHLIGHT_MODE_ON:null,HIGHLIGHT_MODE_OFF:null}),PopoverActionConstants=keyMirror({BODY_MOUSE_DOWN:null,BODY_MOUSE_UP:null,WINDOW_SCROLLED:null,HIDE_POPOVER:null,TEMP_HIDE_POPOVER:null,UPDATE_HIGHLIGHT_COLOR:null,CREATE_HIGHLIGHT:null,DELETE_CLICKED_HIGHLIGHT:null,TOGGLE_FOLDER_DROPDOWN:null,POPOVER_CREATE_FOLDER:null,UPDATE_NOTE_HEIGHT:null,SCROLL:null,SELECTION_CHANGED:null,TOUCH_END:null,POPOVER_TOGGLE_SETTING:null}),SidebarActionConstants=keyMirror({SET_SIDEBAR_DISPLAY_STATUS:null,SHOW_LOGIN_MESSAGE:null,SHOW_SIGNUP_MESSAGE:null,SHOW_RESET_PASSWORD_MESSAGE:null,SHOW_SIDEBAR_MENU:null,HIDE_SIDEBAR_MENU:null,SET_CONNECTING_PAGE:null}),SidebarDisplayStateConstants=keyMirror({HIDDEN:null,SHOWN:null,PINNED:null}),SidebarLocationPathConstants={CONNECTING:"/",SIGNUP:"/login",LOGIN:"/login",RESET_PASSWORD:"/login",MAIN:"/main",QUESTIONNAIRE:"/questionnaire",BLANK:"BLANK"},SettingActionConstants=keyMirror({UPDATE_WORKSPACE:null,TOGGLE_CONNECTION_STATUS:null,UPDATE_CURRENT_URL:null,UPDATE_FOLDER:null,UPDATE_WEBSITES:null,UPDATE_USER:null,UPDATE_QUESTIONNAIRE:null,SHOW_LOCAL_ACCESS_MODAL:null,HIDE_LOCAL_ACCESS_MODAL:null,SHOW_PAYMENT_MODEL:null,HIDE_PAYMENT_MODEL:null,SHOW_SOCIAL_SHARE_MODEL:null,HIDE_SOCIAL_SHARE_MODEL:null,SHOW_UPGRADE_ANONYMOUS_MODAL:null,HIDE_UPGRADE_ANONYMOUS_MODAL:null,UPDATE_STRIPE:null,UPDATE_ONBOARDING:null,SHOW_SHARE_WEBSITE_MODEL:null,HIDE_SHARE_WEBSITE_MODEL:null}),GeneralActionConstants=keyMirror({INIT_STORES:null}),EnvironmentConstants=keyMirror({DEV:null,UAT:null,PROD:null}),UiConstants={PDF_CONTAINER_ID:"viewerContainer",UI_WRAPPER_ID:"weava-ui-wrapper",NOTIFICATION_IFRAME_ID:"weava-notification-frame",SIDEBAR_IFRAME_ID:"weava-sidebar-iframe",POPOVER_IFRAME_ID:"weava-popover-iframe",PAYMENT_IFRAME_ID:"weava-payment-frame",SOCIAL_SHARE_IFRAME_ID:"weava-social-share-frame",SHARE_WEBSITE_IFRAME_ID:"weava-share-website-frame",UPGRADE_ANONYMOUS_ID:"weava-upgrade-anonymous-frame",LOCAL_FILE_ACCESS_IFRAME_ID:"weava-local-file-access-frame",GUIDE_VIEW_ID:"weava-guide-view-frame"},SourcePathConstants={SHARE_WEBSITE_SRC:"src/iframe/shareWebsiteIframe/share-website-index.html",SOCIAL_SHARE_SRC:"src/iframe/socialShareIframe/social-share-index.html",NOTIFICATION_SRC:"src/iframe/notificationIframe/notification-index.html",GUIDE_VIEW_SRC:"src/iframe/guideViewIframe/guide-view-index.html",SIDEBAR_SRC:"src/iframe/sidebarIframe/sidebar-index.html",POPOVER_SRC:"src/iframe/popoverIframe/popover-index.html",UPGRADE_ANONYMOUS_SRC:"src/iframe/upgradeAnonymousIframe/upgrade-anonymous-index.html",PAYMENT_SRC:"src/iframe/paymentIframe/payment-index.html",LOCAL_FILE_ACCESS_SRC:"src/iframe/localFileAccessIframe/local-file-access-index.html"},HighlightActionConstants=keyMirror({CLICKED_HIGHLIGHT:null,DELETE_HIGHLIGHT:null,RENDER_HIGHLIGHTS:null,SWITCH_FOLDER:null}),ImageClipperActionConstants=keyMirror({HOVER_OVER_IMAGE:null,MOUSE_LEAVE_IMAGE:null,MOUSE_ENTER_BUTTON:null,MOUSE_CLICK_BUTTON:null});var NotificationStoreActions={createNotification:function(e){MessageSender.sendCreateNotificationMessage(e)},showLocalNotification:function(e){GistnoteDispatcher.handleViewAction({actionType:NotificationActionConstants.SHOW_LOCAL_NOTIFICATION,message:e})},hideNotification:function(){GistnoteDispatcher.handleViewAction({actionType:NotificationActionConstants.HIDE_NOTIFICATION})},showNotification:function(e){GistnoteDispatcher.handleViewAction({actionType:NotificationActionConstants.SHOW_NOTIFICATION,message:e})}},PopoverStoreActions={bodyMouseDown:function(e){GistnoteDispatcher.handleViewAction({actionType:PopoverActionConstants.BODY_MOUSE_DOWN,event:e})},bodyMouseUp:function(e){GistnoteDispatcher.handleViewAction({actionType:PopoverActionConstants.BODY_MOUSE_UP,event:e})},bodyTouchEnd:function(e){GistnoteDispatcher.handleViewAction({actionType:PopoverActionConstants.TOUCH_END,event:e})},scroll:function(e){GistnoteDispatcher.handleViewAction({actionType:PopoverActionConstants.SCROLL,scrolledDirection:e})},selectionChanged:function(e){GistnoteDispatcher.handleViewAction({actionType:PopoverActionConstants.SELECTION_CHANGED,event:e})},updateHighlightColor:function(e){MessageSender.sendLogEventMessage("POP_UPDATE_HIGHLIGHT"),GistnoteDispatcher.handleViewAction({actionType:PopoverActionConstants.UPDATE_HIGHLIGHT_COLOR,colorNum:e})},createHighlight:function(e,t,n,i){i=i||"POPOVER";var r=UrlUtil.isOnboardingPage(document.URL);MessageSender.sendLogEventMessage("POP_CREATE_HIGHLIGHT",{source:i,onboarding:r,pdfMode:GistnoteContentScriptApp.PDF_MODE}),GistnoteDispatcher.handleViewAction({actionType:PopoverActionConstants.CREATE_HIGHLIGHT,highlightId:e,colorNum:t,colorCode:n,isOnboardingPage:r})},deleteHighlight:function(){MessageSender.sendLogEventMessage("POP_DELETE_HIGHLIGHT"),GistnoteDispatcher.handleViewAction({actionType:PopoverActionConstants.DELETE_CLICKED_HIGHLIGHT})},hidePopover:function(){GistnoteDispatcher.handleViewAction({actionType:PopoverActionConstants.HIDE_POPOVER})},tempHidePopover:function(){GistnoteDispatcher.handleViewAction({actionType:PopoverActionConstants.TEMP_HIDE_POPOVER})},toggleFolderDropDown:function(){GistnoteDispatcher.handleViewAction({actionType:PopoverActionConstants.TOGGLE_FOLDER_DROPDOWN})},createFolder:function(){MessageSender.sendLogEventMessage("POP_CREATE_FOLDER"),GistnoteDispatcher.handleViewAction({actionType:SidebarActionConstants.SHOW_SIDEBAR_MENU}),GistnoteDispatcher.handleViewAction({actionType:PopoverActionConstants.POPOVER_CREATE_FOLDER})},updateNoteHeight:function(e){GistnoteDispatcher.handleViewAction({actionType:PopoverActionConstants.UPDATE_NOTE_HEIGHT,noteHeight:e})},toggleSetting:function(e){GistnoteDispatcher.handleViewAction({actionType:PopoverActionConstants.POPOVER_TOGGLE_SETTING,show:e})}},SettingStoreActions={toggleConnectionStatus:function(e){GistnoteDispatcher.handleServerAction({actionType:SettingActionConstants.TOGGLE_CONNECTION_STATUS,connectionStatus:e})},updateFolder:function(e,t,n,i,r,o){GistnoteDispatcher.handleServerAction({actionType:SettingActionConstants.UPDATE_FOLDER,activeFolder:e,folderList:t,sharingFolderUserMeta:n,sharingFolderInvitedMeta:i,activeFolderUserMeta:r,folderInvitations:o})},updateUser:function(e,t,n,i){GistnoteDispatcher.handleServerAction({actionType:SettingActionConstants.UPDATE_USER,user:e,token:t,customToken:n,userMeta:i})},updateWorkSpace:function(e){GistnoteDispatcher.handleServerAction({actionType:SettingActionConstants.UPDATE_WORKSPACE,workspace:e})},updateQuestionnaire:function(e){GistnoteDispatcher.handleServerAction({actionType:SettingActionConstants.UPDATE_QUESTIONNAIRE,questionnaire:e})},showLocalAccessModal:function(){GistnoteDispatcher.handleServerAction({actionType:SettingActionConstants.SHOW_LOCAL_ACCESS_MODAL})},hideLocalAccessModal:function(){GistnoteDispatcher.handleServerAction({actionType:SettingActionConstants.HIDE_LOCAL_ACCESS_MODAL})},showPaymentModel:function(){GistnoteDispatcher.handleServerAction({actionType:SettingActionConstants.SHOW_PAYMENT_MODEL})},hidePaymentModel:function(){GistnoteDispatcher.handleServerAction({actionType:SettingActionConstants.HIDE_PAYMENT_MODEL})},showSocialShareModel:function(){GistnoteDispatcher.handleServerAction({actionType:SettingActionConstants.SHOW_SOCIAL_SHARE_MODEL})},hideSocialShareModel:function(){GistnoteDispatcher.handleServerAction({actionType:SettingActionConstants.HIDE_SOCIAL_SHARE_MODEL})},showShareWebsiteModel:function(){GistnoteDispatcher.handleServerAction({actionType:SettingActionConstants.SHOW_SHARE_WEBSITE_MODEL})},hideShareWebsiteModel:function(){GistnoteDispatcher.handleServerAction({actionType:SettingActionConstants.HIDE_SHARE_WEBSITE_MODEL})},showUpgradeAnonymousModalMessage:function(){GistnoteDispatcher.handleServerAction({actionType:SettingActionConstants.SHOW_UPGRADE_ANONYMOUS_MODAL})},hideUpgradeAnonymousModalMessage:function(){GistnoteDispatcher.handleServerAction({actionType:SettingActionConstants.HIDE_UPGRADE_ANONYMOUS_MODAL})},updateStripe:function(e){GistnoteDispatcher.handleServerAction({actionType:SettingActionConstants.UPDATE_STRIPE,stripeData:e})},updateOnboarding:function(e){GistnoteDispatcher.handleServerAction({actionType:SettingActionConstants.UPDATE_ONBOARDING,onboarding:e})}},SidebarStoreActions={showConnectingScreen:function(){GistnoteDispatcher.handleServerAction({actionType:SidebarActionConstants.SET_CONNECTING_PAGE})},showSidebar:function(){MessageSender.sendShowSideBarMessage()},saveWebsite:function(e,t,n,i){MessageSender.sendSaveWebsiteMessage(e,t,n,i)},deleteHighlight:function(e,t){MessageSender.sendDeleteHighlightInDatabaseMessage(e,t)},setSideBarDisplayStatus:function(e){GistnoteDispatcher.handleServerAction({actionType:SidebarActionConstants.SET_SIDEBAR_DISPLAY_STATUS,status:e})},showLoginMessage:function(e){GistnoteDispatcher.handleServerAction({actionType:SidebarActionConstants.SHOW_LOGIN_MESSAGE,errorMessage:e})},showSignUpMessage:function(e){GistnoteDispatcher.handleServerAction({actionType:SidebarActionConstants.SHOW_SIGNUP_MESSAGE,errorMessage:e})},showResetPasswordMessage:function(e){GistnoteDispatcher.handleServerAction({actionType:SidebarActionConstants.SHOW_RESET_PASSWORD_MESSAGE,errorMessage:e})},showSidebarMenu:function(){GistnoteDispatcher.handleServerAction({actionType:SidebarActionConstants.SHOW_SIDEBAR_MENU})},hideSidebarMenu:function(){GistnoteDispatcher.handleServerAction({actionType:SidebarActionConstants.HIDE_SIDEBAR_MENU})}},GeneralActions={redirectMessage:function(e){MessageSender.redirectMessage(e)}},HighlightStoreActions={clickedHighlight:function(e,t,n,i,r,o,s){GistnoteDispatcher.handleViewAction({actionType:HighlightActionConstants.CLICKED_HIGHLIGHT,highlightId:e,colorNum:t,selectedText:n,selectionRange:i,mouseX:r,mouseY:o,highlight:s})},deleteHighlight:function(e){GistnoteDispatcher.handleViewAction({actionType:HighlightActionConstants.DELETE_HIGHLIGHT,highlightId:e})},switchFolder:function(e){MessageSender.sendLogEventMessage("POP_SWITCH_FOLDER"),GistnoteDispatcher.handleViewAction({actionType:HighlightActionConstants.SWITCH_FOLDER,folderId:e})},renderHighlights:function(e){GistnoteDispatcher.handleViewAction({actionType:HighlightActionConstants.RENDER_HIGHLIGHTS,pageNumber:e})}},ImageClipperStoreActions={hoverOverImage:function(e){GistnoteDispatcher.handleServerAction({actionType:ImageClipperActionConstants.HOVER_OVER_IMAGE,event:e})},mouseLeaveImage:function(e){GistnoteDispatcher.handleServerAction({actionType:ImageClipperActionConstants.MOUSE_LEAVE_IMAGE,event:e})},mouseEnterButton:function(e){GistnoteDispatcher.handleServerAction({actionType:ImageClipperActionConstants.MOUSE_ENTER_BUTTON,event:e})},mouseClickButton:function(e,t){GistnoteDispatcher.handleServerAction({actionType:ImageClipperActionConstants.MOUSE_CLICK_BUTTON,imageId:e,url:t})}},ControllerView=function(r,e){this._DEBUG_MODE=e||!1,this._getStates=function(){for(var e={},t=0;t<r.length;t++){var n=r[t].getStates();for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e},this._states=this._getStates(),this._registerEventListener(r)};ControllerView.prototype._onChange=function(e){this._states=this._getStates(),this._render(e)},ControllerView.prototype._registerEventListener=function(e){for(var t=0;t<e.length;t++)e[t].addChangeListener(this._onChange.bind(this))},ControllerView.prototype._render=function(e){throw new Error("Calling abstract method")},ControllerView.prototype._debug=function(e){this._DEBUG_MODE&&Logger.debug(e)};var IframeView=function(e,t,n,i,r){ControllerView.call(this,e,r),this._iframeId=n,this._iframeSrcPath=i,this._uiWrapperId=t,this._EXTENSION_DOMAIN="chrome-extension://"+chrome.runtime.id,this._$iframe=null,this._iframeLoaded=!1,this._bindEvents()};IframeView.prototype=Object.create(ControllerView.prototype),IframeView.prototype._bindEvents=function(){},IframeView.prototype._createFrameEl=function(){this._$iframe=$("<iframe>",{id:this._iframeId,scrolling:"no",frameBorder:"0",src:chrome.runtime.getURL(this._iframeSrcPath)}).appendTo("#"+this._uiWrapperId),this._$iframe.load(function(){this._iframeLoaded=!0,this._renderFrame()}.bind(this))},IframeView.prototype._showFrame=function(){this._$iframe?this._renderFrame():this._createFrameEl()},IframeView.prototype._renderFrame=function(){},IframeView.prototype._hideFrame=function(){},IframeView.prototype._postMessageToIframe=function(e){if(this._$iframe&&this._$iframe[0]&&null!==this._$iframe[0].contentWindow&&this._iframeLoaded)try{this._$iframe[0].contentWindow.postMessage(e,this._EXTENSION_DOMAIN)}catch(e){}};var ShadowDomView=function(e,t,n,i,r){ControllerView.call(this,e,r),this._FRAME_OPACITY="0.99",this._hostElId=n,this._uiWrapperId=t,this._htmlFilePath=i,this._$host=null,this._$root=null};ShadowDomView.prototype=Object.create(ControllerView.prototype),ShadowDomView.prototype._createFrameEl=function(){this._$host=$("<div>",{id:this._hostElId}).appendTo("#"+this._uiWrapperId);var e=this._$host[0].attachShadow({mode:"open"});this._$root=$(e),this._$root.load(chrome.runtime.getURL(this._htmlFilePath),function(){this._bindEvents(),this._renderRoot()}.bind(this))},ShadowDomView.prototype._bindEvents=function(){},ShadowDomView.prototype._hideFrame=function(){this._$host&&(this._$host[0].style.setProperty("opacity","0","important"),this._$host[0].style.setProperty("visibility","hidden","important"))},ShadowDomView.prototype._renderRoot=function(){},ShadowDomView.prototype._showFrame=function(){this._$host?this._renderRoot():this._createFrameEl(),this._$host[0].style.setProperty("opacity",this._FRAME_OPACITY,"important"),this._$host[0].style.setProperty("visibility","visible","important")};var NotificationView=function(e,t,n,i,r){ShadowDomView.call(this,e,t,n,i,r),this._FRAME_OPACITY="0.97"};NotificationView.prototype=Object.create(ShadowDomView.prototype),NotificationView.prototype._bindEvents=function(){this._$root[0].addEventListener("click",function(){NotificationStoreActions.hideNotification()})},NotificationView.prototype._lastMessage=null,NotificationView.prototype._renderContent=function(e){var t=e?"block":"none",n=e?"none":"block";this._$root.find("#mock-popover-wrapper")[0].style.setProperty("display",t,"important"),this._$root.find("#weava-icon")[0].style.setProperty("display",n,"important"),e&&this._states.workspace&&this._states.workspace.commands&&this._states.workspace.commands.TOGGLE_HIGHLIGHT_MODE_BY_SHORTCUT&&this._$root.find(".tips").text("Shortcut: "+this._states.workspace.commands.TOGGLE_HIGHLIGHT_MODE_BY_SHORTCUT)},NotificationView.prototype._renderRoot=function(){if(this._lastMessage!==this._states.notificationContent)switch(this._lastMessage=this._states.notificationContent,this._$root.find(".message").hide(),this._states.notificationContent){case NotificationMessageConstants.PROMPT_NETWORK:this._renderContent(!1),this._$root.find("#prompt-network").show();break;case NotificationMessageConstants.PROMPT_LOGIN:this._renderContent(!1),this._$root.find("#prompt-login").show();break;case NotificationMessageConstants.PROMPT_CONNECTING:this._renderContent(!1),this._$root.find("#prompt-connecting").show();break;case NotificationMessageConstants.HIGHLIGHT_MODE_ON:this._renderContent(!0),this._$root.find("#mock-popover-wrapper")[0].style.setProperty("opacity",0,"important"),this._$root.find("#mock-popover-wrapper").delay(500).animate({opacity:1},2e3),this._$root.find("#highlight_mode_on").show();break;case NotificationMessageConstants.HIGHLIGHT_MODE_OFF:this._renderContent(!0),this._$root.find("#mock-popover-wrapper")[0].style.setProperty("opacity",1,"important"),this._$root.find("#mock-popover-wrapper").delay(500).animate({opacity:0},2e3),this._$root.find("#highlight_mode_off").show();break;case NotificationMessageConstants.COPY_HIGHLIGHT:this._renderContent(!1),this._$root.find("#copy-highlight").show()}},NotificationView.prototype._render=function(){GistnoteContentScriptApp.PDF_MODE||this._states.notificationDisplayState!==NotificationDisplayStateConstants.SHOWN?(this._hideFrame(),this._lastMessage=null):this._showFrame()};var PopoverView=function(e,t,n,i,r){IframeView.call(this,e,t,n,i,r),this._IFRAME_ORIGINIAL_HEIGHT=52,this._IFRAME_COLOR_ROW_HEIGHT=25,this._IFRAME_FOLDERLIST_ITEM_HEIGHT=18,this._IFRAME_SETTING_HEIGHT=101,this._IFRAME_NOTE_HEIGHT=105,this.scrollTimeout=null,this.lastScrollPos=0};PopoverView.prototype=Object.create(IframeView.prototype),PopoverView.prototype._syncIframeStates=function(){var e=$.extend({},this._states);delete e.selectionRange,this._postMessageToIframe({id:"POPOVER_IFRAME_SYNC_STATES",states:e})},PopoverView.prototype._getSettingHeight=function(){return this._IFRAME_SETTING_HEIGHT+6*this._IFRAME_COLOR_ROW_HEIGHT},PopoverView.prototype._getColorRowHeight=function(){return Math.ceil(this._states.colorCodes.length/5)*this._IFRAME_COLOR_ROW_HEIGHT},PopoverView.prototype._resizeIframe=function(){var e,t=this._IFRAME_ORIGINIAL_HEIGHT;this._states.showFolderList&&(e=this._states.folderList&&0!==Object.keys(this._states.folderList).length?6<Object.keys(this._states.folderList).length?5:Object.keys(this._states.folderList).length:1,t+=this._IFRAME_FOLDERLIST_ITEM_HEIGHT*e);this._states.showSetting?t+=this._getSettingHeight():(this._states.highlightId&&(t+=this._IFRAME_NOTE_HEIGHT),t+=this._getColorRowHeight()),t+="px",this._$iframe[0].style.setProperty("height",t,"important")},PopoverView.prototype._getHighlightMode=function(){return!GistnoteContentScriptApp.IS_TOP_FRAME||!(this._states.workspace&&this._states.workspace.extensionHighlightModeSettings&&!this._states.workspace.extensionHighlightModeSettings.highlighter&&!GistnoteContentScriptApp.PDF_MODE)},PopoverView.prototype._bindEvents=function(){var e=$("body");e.on("mousedown.weava touchstart.weava",function(e){"GISTNOTE"!==e.target.nodeName&&PopoverStoreActions.bodyMouseDown(e)}),e.on("mouseup.weava",function(e){"GISTNOTE"!==e.target.nodeName&&PopoverStoreActions.bodyMouseUp(e)}),e.on("touchend.weava",function(e){"GISTNOTE"!==e.target.nodeName&&PopoverStoreActions.bodyTouchEnd(e)}),$(document).on("selectionchange.weava",function(e){this._states.popoverDisplayState&&PopoverStoreActions.selectionChanged(e)}.bind(this));var t=function(e){var t=this,n=window.scrollY,i=n<t.lastScrollPos?"UP":"DOWN";t.lastScrollPos=n,this._states.popoverDisplayState?(PopoverStoreActions.tempHidePopover(),this.scrollTimeout=setTimeout(function(){PopoverStoreActions.scroll(i),t.scrollTimeout=null},200)):this.scrollTimeout&&(clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){PopoverStoreActions.scroll(i),t.scrollTimeout=null},200))}.bind(this);GistnoteContentScriptApp.PDF_MODE?$("#viewerContainer").on("scroll.weava",t):$(window).on("scroll.weava",t)},PopoverView.prototype._hideFrame=function(){GistnoteHighlighter.lightDownAllHighlightsInDom(),this._$iframe&&(this._$iframe.hide(),this._syncIframeStates())},PopoverView.prototype._renderFrame=function(){this._resizeIframe(),this._syncIframeStates();var e=this._states.coordinates.top;this._states.pointerAtTop||(this._states.showSetting?e-=this._getSettingHeight():(this._states.highlightId&&(e-=this._IFRAME_NOTE_HEIGHT),e-=this._getColorRowHeight())),this._$iframe.css({top:e,left:this._states.coordinates.left}),this._$iframe.show()},PopoverView.prototype._render=function(e){this._debug("[PopoverView] render event: "+e),this._debug(this._states),this._states.popoverDisplayState&&this._getHighlightMode()?this._showFrame():this._hideFrame()};var SidebarView=function(e,t,n,i,r){IframeView.call(this,e,t,n,i,r),chrome.storage.local.get("WEAVA_INSTALLATION_SHOW_SIDEBAR",function(e){e&&e.WEAVA_INSTALLATION_SHOW_SIDEBAR&&(chrome.storage.local.set({WEAVA_INSTALLATION_SHOW_SIDEBAR:null}),SidebarStoreActions.showSidebar())})};SidebarView.prototype=Object.create(IframeView.prototype),SidebarView.prototype._syncIframeStates=function(){this._postMessageToIframe({id:"SIDEBAR_IFRAME_SYNC_STATES",states:this._states,StaticConstants:StaticConstants})},SidebarView.prototype._syncIframeModels=function(){this._postMessageToIframe({id:"SIDEBAR_IFRAME_SYNC_MODELS",states:this._states})},SidebarView.prototype._activateNewCollectionInputArea=function(){this._postMessageToIframe({id:"ACTIVATE_NEW_COLLECTION_INPUT_AREA"})},SidebarView.prototype._doRender=function(){switch(this._states.sidebarDisplayState){case SidebarDisplayStateConstants.SHOWN:case SidebarDisplayStateConstants.PINNED:this._showFrame();break;case SidebarDisplayStateConstants.HIDDEN:this._hideFrame()}},SidebarView.prototype._bindEvents=function(){$("body").on("mousedown.weava",function(e){e.target&&e.target.id&&(e.target.id===UiConstants.NOTIFICATION_IFRAME_ID||e.target.id===UiConstants.PAYMENT_IFRAME_ID||e.target.id===UiConstants.SOCIAL_SHARE_IFRAME_ID)||e.target.id===UiConstants.UPGRADE_ANONYMOUS_ID||!this._states.onboarding||this._states.onboarding.extensionGuideState&&3<=this._states.onboarding.extensionGuideState&&this._states.onboarding.extensionGuideState<4||MessageSender.sendHideSideBarMessage()}.bind(this))},SidebarView.prototype._renderFrame=function(){this._syncIframeModels(),this._syncIframeStates(),this._states.sidebarMenuDisplayState?this._$iframe[0].style.setProperty("right","0px","important"):this._$iframe[0].style.setProperty("right","-240px","important")},SidebarView.prototype._hideFrame=function(){this._$iframe&&this._$iframe[0].style.setProperty("right","-700px","important")},SidebarView.prototype._render=function(e){switch(this._debug("[SidebarView] render event: "+e),this._debug(this._states),e){case GeneralActionConstants.INIT_STORES:case SettingActionConstants.UPDATE_USER:case SettingActionConstants.UPDATE_FOLDER:case SettingActionConstants.UPDATE_STRIPE:case SettingActionConstants.UPDATE_WORKSPACE:case SettingActionConstants.UPDATE_ONBOARDING:case SettingActionConstants.UPDATE_QUESTIONNAIRE:this._doRender();break;case PopoverActionConstants.POPOVER_CREATE_FOLDER:this._activateNewCollectionInputArea();break;default:this._doRender()}};var HighlightView=function(e,t){ControllerView.call(this,e,t),this._timer=null,this._timerId="",this._TIMER_DELAY=50,this._syncHighlightsTimeout=null,$("body").on({"click.weava":this._clickedHighlightEventHandler.bind(this),"mouseenter.weava":this._enterHighlightEventHandler.bind(this),"mouseleave.weava":this._leaveHighlightEventHandler.bind(this)},"gistnote")};HighlightView.prototype=Object.create(ControllerView.prototype),HighlightView.prototype._enterHighlightEventHandler=function(e){var t=e.target.attributes.highlightId.nodeValue;t===this._timerId&&clearTimeout(this._timer),GistnoteHighlighter.mouseEnterHighlightInDom(t)},HighlightView.prototype._leaveHighlightEventHandler=function(e){var t=e.target.attributes.highlightId.nodeValue;t!==this.clickedHighlightId&&(this._timerId=t,this._timer=setTimeout(function(){GistnoteHighlighter.mouseLeaveHighlightInDom(t)},this._TIMER_DELAY))},HighlightView.prototype._clickedHighlightEventHandler=function(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)){var t=e.target.attributes.highlightId.nodeValue;if(GistnoteHighlighter.lightUpHighlightInDom(t),t in this._states.highlights){var n=parseInt(e.target.attributes.colorNum.nodeValue),i=this._states.highlights[t].text,r=GistnoteHighlighter.getRange(t),o=e.clientX,s=e.clientY,a=this._states.highlights[t];if(HighlightStoreActions.clickedHighlight(t,n,i,r,o,s,a),this._states.workspace&&!this._states.workspace.extensionHighlightModeSettings.highlighter){var l={pdf:this._states.workspace.extensionHighlightModeSettings.pdf,highlighter:!0};MessageSender.sendHighlightModeSettings(l)}}}},HighlightView.prototype._syncHighlights=function(){clearTimeout(this._syncHighlightsTimeout),this._syncHighlightsTimeout=setTimeout(function(){this._doSyncHighlights(this._states.highlights,this._states.redrawPageNumber,this._states.colorCodes,this._states.website)||GistnoteContentScriptApp.PDF_MODE||Logger.warn("[HighlightView] Some highlights cannot be redrawn in this website.")}.bind(this),500)},HighlightView.prototype._doSyncHighlights=function(e,t,n,i){i&&t&&(document.title=i.title,document.getElementById("document-title").innerHTML=i.title),GistnoteContentScriptApp.PDF_MODE&&PdfMessageSender.cacheHighlights(e,n);for(var r=$.extend({},e),o=$("gistnote[id]"),s=0;s<o.length;s++){var a=o[s];if((u=a.id)in r){r[u].note&&-1===a.className.indexOf(GistnoteHighlighter.NOTE_CLASS_NAME)&&GistnoteHighlighter.addNoteToHighlight(u),r[u].note||GistnoteHighlighter.removeNoteFromHighlight(u);var l=r[u].colorNum,c=n[l-1];c!==GistnoteHighlighter.getColorCode(a)&&GistnoteHighlighter.updateHighlightColorInDom(u,c,l),delete r[u]}else GistnoteHighlighter.deleteHighlightInDom(u)}for(var u in r)"image"===r[u].type&&delete r[u];return GistnoteHighlighter.createAllHighlightsInDom(r,n,GistnoteContentScriptApp.PDF_MODE)},HighlightView.prototype._render=function(e){switch(e){case GeneralActionConstants.INIT_STORES:case SettingActionConstants.UPDATE_FOLDER:case SettingActionConstants.UPDATE_USER:case HighlightActionConstants.RENDER_HIGHLIGHTS:case PopoverActionConstants.UPDATE_HIGHLIGHT_COLOR:this._syncHighlights();break;default:return!0}this._debug("[HighlightView] render event: "+e)};var PaymentView=function(e,t,n,i,r){ShadowDomView.call(this,e,t,n,i,r),this._FRAME_OPACITY="1",this._hideFrame()};PaymentView.prototype=Object.create(ShadowDomView.prototype),PaymentView.prototype._onBodyClick=function(){MessageSender.sendLogEventMessage("HIDE_PAYMENT_MODAL"),MessageSender.sendHidePaymentModalMessage(),SettingStoreActions.hidePaymentModel()},PaymentView.prototype._onPaymentClick=function(){MessageSender.sendLogEventMessage("GO_TO_PREMIUM_PAGE",{source:"PAYMENT_MODAL"}),window.open(StaticConstants.SERVER_BASE_PATH+"premium"),MessageSender.sendHidePaymentModalMessage(),SettingStoreActions.hidePaymentModel()},PaymentView.prototype._onReferralClick=function(){MessageSender.sendLogEventMessage("GO_TO_REFERRAL_PAGE"),window.open(StaticConstants.APP_BASE_PATH+"app/referral"),MessageSender.sendHidePaymentModalMessage(),SettingStoreActions.hidePaymentModel()},PaymentView.prototype._bindEvents=function(){this._$root.find("#payment-modal-dim-background").on("click.weava",this._onBodyClick.bind(this)),this._$root.find("#pay-btn").on("click.weava",this._onPaymentClick.bind(this)),this._$root.find("#referral-btn").on("click.weava",this._onReferralClick.bind(this))},PaymentView.prototype._render=function(){this._states.paymentModelShown?this._showFrame():this._hideFrame()};var SocialShareView=function(e,t,n,i,r){ShadowDomView.call(this,e,t,n,i,r),this._FRAME_OPACITY="1",this._hideFrame()};SocialShareView.prototype=Object.create(ShadowDomView.prototype),SocialShareView.prototype._onShareCodeClick=function(){this._$root.find("#referral-code").select(),document.execCommand("Copy"),MessageSender.sendLogEventMessage("COPY_REFERRAL_LINK",{source:"SHARE_MODAL"}),this._$root.find("#copy-btn").html("Copied!")},SocialShareView.prototype._bindEvents=function(){this._$root.find("#share-code-btn").on("click.weava",this._onShareCodeClick.bind(this)),this._$root.find("#guide-btn").on("click.weava",function(){MessageSender.sendLogEventMessage("GO_TO_GUIDE",{source:"REDEEM_REFERRAL_GUIDE"})}),this._$root.find("#pay-btn").on("click.weava",function(){MessageSender.sendLogEventMessage("GO_TO_PREMIUM_PAGE",{source:"SHARE_MODAL"})}),this._$root.find("#social-share-modal-close-btn").on("click.weava",function(){SettingStoreActions.hideSocialShareModel()}),this._$root.find("#send-btn").on("click.weava",function(){MessageSender.sendLogEventMessage("SEND_REFERRAL_EMAIL_BUTTON_CLICKED",{source:"SHARE_MODAL"});for(var e=this._$root.find("#referral-emails").val().split(",").filter(function(e){return 0<e.length}),t=0;t<e.length;t++){var n=e[t];if(!n.match(/.*@.*\..*/))return void alert('"'+n+'" is not a valid email address.');console.log(n)}0<e.length&&(MessageSender.sendLogEventMessage("SEND_REFERRAL_EMAILS",{source:"SHARE_MODAL",num:e.length}),alert("Sent invitation to "+e.length+" friends."),this._$root.find("#send-btn").html("Sent!"),MessageSender.sendAddColorReferralEmailMessage(e))}.bind(this))},SocialShareView.prototype._render=function(){this._states.socialShareModalShown?(this._showFrame(),this._$root.find("#copy-btn").html("Copy code"),this._$root.find("#send-btn").html("Send invitation"),setTimeout(function(){this._states.user.uid;var e="ad_"+this._states.user.uid;this._$root.find("#referral-code").val(e)}.bind(this),500)):this._hideFrame()};var ShareWebsiteView=function(e,t,n,i,r){ShadowDomView.call(this,e,t,n,i,r),this._FRAME_OPACITY="1",this._hideFrame()};ShareWebsiteView.prototype=Object.create(ShadowDomView.prototype),ShareWebsiteView.prototype._bindEvents=function(){this._$root.find("#yes-btn").on("click.weava",function(){MessageSender.sendLogEventMessage("SHARE_WEBSITE_QUESTION",{answer:"yes"}),SettingStoreActions.hideShareWebsiteModel(),window.open("https://weava.typeform.com/to/Emq8dK")}),this._$root.find("#no-btn").on("click.weava",function(){MessageSender.sendLogEventMessage("SHARE_WEBSITE_QUESTION",{answer:"no"}),SettingStoreActions.hideShareWebsiteModel()})},ShareWebsiteView.prototype._render=function(){this._states.shareWebsiteModalShown?this._showFrame():this._hideFrame()};var UpgradeAnonymousView=function(e,t,n,i,r){ShadowDomView.call(this,e,t,n,i,r),this._FRAME_OPACITY="1",this._hideFrame()};UpgradeAnonymousView.prototype=Object.create(ShadowDomView.prototype),UpgradeAnonymousView.prototype._onBodyClick=function(){MessageSender.sendLogEventMessage("HIDE_UPGRADE_ANONYMOUS_MODAL"),SettingStoreActions.hideUpgradeAnonymousModalMessage()},UpgradeAnonymousView.prototype._onLinkClick=function(){MessageSender.sendLogEventMessage("GO_TO_LINK_ACCOUNT_PAGE",{source:"UPGRADE_ACCOUNT_MODAL"}),MessageSender.redirectMessage({id:"GO_TO_LINK_ACCOUNT_PAGE"})},UpgradeAnonymousView.prototype._onLoginClick=function(){MessageSender.sendLogEventMessage("GO_TO_LOGIN_PAGE",{source:"UPGRADE_ACCOUNT_MODAL"}),MessageSender.redirectMessage({id:"GO_TO_LOGIN_PAGE"})},UpgradeAnonymousView.prototype._bindEvents=function(){this._$root.find("#payment-modal-dim-background").on("click.weava",this._onBodyClick.bind(this)),this._$root.find("#link-btn").on("click.weava",this._onLinkClick.bind(this)),this._$root.find("#login-btn").on("click.weava",this._onLoginClick.bind(this))},UpgradeAnonymousView.prototype._render=function(){this._states.upgradeAnonymousModelShown?this._showFrame():this._hideFrame()};var LocalFileAccessView=function(e,t,n,i,r){ShadowDomView.call(this,e,t,n,i,r),this._hideFrame()};LocalFileAccessView.prototype=Object.create(ShadowDomView.prototype),LocalFileAccessView.prototype._render=function(e){this._states.localAccessModalShown?this._showFrame():this._hideFrame()};var ImageClipperView=function(e,t,n){ControllerView.call(this,e,n),this._LOGO_PATH="static/images/logo2.png",this.urlString="url("+chrome.extension.getURL(this._LOGO_PATH)+")",this.PROTOCOL=window.location.protocol,this.PATH_NAME=this.PROTOCOL+"//"+window.location.host+"/",this._AREA_HIDDEN_POSITION="-70px",this._AREA_SHOWN_POSITION="-20px",this._AREA_HOVER_POSITION="-10px",this.url="",this._start(t)};ImageClipperView.prototype=Object.create(ControllerView.prototype),ImageClipperView.prototype._start=function(e){var t=$("body");this._$dropArea=$("<div>",{class:"weava-drop-area-wrapper"}),this._$dropArea.load(chrome.extension.getURL("static/html/dropArea.html")),this._$dropArea.on("dragover.weava",this._boxDragOverListener.bind(this)),this._$dropArea.on("dragleave.weava",this._boxDragLeave.bind(this)),this._$dropArea.on("drop.weava",this._boxDroppedImage.bind(this)),this._$dropArea.appendTo("#"+e),t.on({"dragstart.weava":this._imageDragStartListener.bind(this),"dragend.weava":this._imageDragEndListener.bind(this)},"img")},ImageClipperView.prototype._boxDragOverListener=function(e){e.preventDefault(),this._$dropArea.css("left",this._AREA_HOVER_POSITION)},ImageClipperView.prototype._boxDragLeave=function(e){e.preventDefault(),this._$dropArea.css("left",this._AREA_SHOWN_POSITION)},ImageClipperView.prototype._boxDroppedImage=function(e){e.preventDefault();var t=null!==this._states.subscription;MessageSender.sendLogEventMessage("[IMAGE] DROP IMAGE",{paid:t}),t?this._createImage():SettingStoreActions.showPaymentModel()},ImageClipperView.prototype._createImage=function(){if(this.url.includes("https://")||this.url.includes("http://"));else if(this.url.includes("//"))this.url=this.PROTOCOL+this.url.substring(2);else{var e=this.url.substring(1);this.url=this.PATH_NAME+e}var t=GistnoteUUID.generate(),n={date:Date.now(),type:"image",base64String:null};this._getBase64String(this.url,function(e){MessageSender.sendCreateImageInDatabaseMessage(t,n,e)})},ImageClipperView.prototype._getHighlightMode=function(){return!GistnoteContentScriptApp.IS_TOP_FRAME||!(this._states.workspace&&this._states.workspace.extensionHighlightModeSettings&&!this._states.workspace.extensionHighlightModeSettings.highlighter)},ImageClipperView.prototype._getBase64String=function(t,e){if(t.includes(";base64,"))e(this.url);else{var n=document.createElement("IMG"),i=document.createElement("CANVAS"),r=i.getContext("2d"),o="";n.crossOrigin="Anonymous";var s=0;n.onload=function(){i.height=this.height,i.width=this.width,r.drawImage(this,0,0),o=i.toDataURL("image/jpeg"),e(o)},n.onerror=function(e){if(console.log(e),0===s)return s++,void(n.src=t);MessageSender.sendLogEventMessage("[IMAGE] FAIL_TO_CLIP",{error:e,imageUrl:t}),alert("Cannot save this image.")},n.src="https://cors-anywhere.herokuapp.com/"+t}},ImageClipperView.prototype._imageDragStartListener=function(e){this._getHighlightMode()&&(MessageSender.sendLogEventMessage("[IMAGE] DRAG IMAGE"),this.url=e.target.src,this._$dropArea.fadeIn(100),this._$dropArea.css("left",this._AREA_SHOWN_POSITION),$(".weava-drop-area").css("background-image",this.urlString))},ImageClipperView.prototype._imageDragEndListener=function(e){this._$dropArea.css("left",this._AREA_HIDDEN_POSITION),this._$dropArea.fadeOut(100)},ImageClipperView.prototype._render=function(e){return!0};var GuideView=function(e,t,n,i,r){ShadowDomView.call(this,e,t,n,i,r),this._FRAME_OPACITY="1",this._currentGuideState=null};GuideView.prototype=Object.create(ShadowDomView.prototype),GuideView.prototype._bindEvents=function(){this._$root.find(".skip-guide-btn").on("click",function(){MessageSender.sendLogEventMessage("GUIDE_SKIPPED",this._currentGuideState),MessageSender.sendSkipGuideMessage()}.bind(this))},GuideView.prototype._renderRoot=function(){this._states.onboarding.extensionGuideState!==this._currentGuideState&&(this._$host[0].style.setProperty("right","-300px","important"),this._$host[0].style.setProperty("top","-300px","important"),this._currentGuideState=this._states.onboarding.extensionGuideState,setTimeout(function(){switch(this._currentGuideState){case 2:this._$root.find("#guide-2").show(),this._$root.find("#guide-3").hide(),this._$host[0].style.setProperty("width","310px","important"),this._$host[0].style.setProperty("height","200px","important"),this._$host[0].style.setProperty("right","5px","important"),this._$host[0].style.setProperty("top","5px","important");break;case 3:this._$root.find("#guide-2").hide(),this._$root.find("#guide-3").show(),SidebarStoreActions.setSideBarDisplayStatus(SidebarDisplayStateConstants.SHOWN),this._$host[0].style.setProperty("width","310px","important"),this._$host[0].style.setProperty("height","200px","important"),this._$host[0].style.setProperty("right","-20px","important"),this._$host[0].style.setProperty("top","45px","important")}}.bind(this),500))},GuideView.prototype._render=function(){this._states.onboarding&&this._states.onboarding.extensionGuideState&&1.5<this._states.onboarding.extensionGuideState&&this._states.onboarding.extensionGuideState<4?this._showFrame():this._hideFrame()};var Store=function(e){this._DEBUG_MODE=e||!1,this._states={},this._registeredListeners=[],this._handleActionRef=this.handleActions.bind(this),GistnoteDispatcher.register(this._handleActionRef)};Store.prototype.unload=function(){GistnoteDispatcher.unRegister(this._handleActionRef)},Store.prototype._debug=function(e){this._DEBUG_MODE&&Logger.debug(e)},Store.prototype._setStates=function(e){if(!(e instanceof Object)||Array.isArray(e))throw new Error("States must be an object.");for(var t in e){if(!(e.hasOwnProperty(t)&&t in e))throw new Error("Error occurs when setting states for "+t);this._states[t]=e[t]}},Store.prototype._emitChange=function(e){for(var t=0;t<this._registeredListeners.length;t++)this._registeredListeners[t](e)},Store.prototype.handleActions=function(e){throw new Error("Abstract method!")},Store.prototype.getStates=function(){return this._states},Store.prototype.addChangeListener=function(e){this._registeredListeners.push(e)};var NotificationStore=function(e){Store.call(this,e),this._timeout=null,this._states={notificationDisplayState:NotificationDisplayStateConstants.HIDDEN,notificationContent:""}};NotificationStore.prototype=Object.create(Store.prototype),NotificationStore.prototype._handleNewNotification=function(e){this._setStates({notificationDisplayState:NotificationDisplayStateConstants.SHOWN,notificationContent:e});var t=this;this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){t._states.notificationDisplayState===NotificationDisplayStateConstants.SHOWN&&NotificationStoreActions.hideNotification()},3e3)},NotificationStore.prototype._hideNotification=function(){this._setStates({notificationDisplayState:NotificationDisplayStateConstants.HIDDEN,notificationContent:""})},NotificationStore.prototype.handleActions=function(e){var t=e.source,n=e.action;switch(n.actionType){case NotificationActionConstants.SHOW_NOTIFICATION:case NotificationActionConstants.SHOW_LOCAL_NOTIFICATION:this._handleNewNotification(n.message);break;case NotificationActionConstants.HIDE_NOTIFICATION:this._hideNotification();break;default:return!0}return this._debug("[NotificationStore] handled "+t+": "+n.actionType),this._emitChange(),!0};var PopoverStore=function(e){Store.call(this,e),this._POPOVER_IFRAME_HEIGHT=52,this._POPOVER_IFRAME_WIDTH=178,this._POPOVER_ELEMENT_HEIGHT=64,this._POPOVER_MARGIN=11,this._POINTER_TOP="-5px",this._POINTER_BOTTOM="-5px",this._states={popoverDisplayState:!1,lightedUpCircle:null,coordinates:{top:0,left:0},pointerAtTop:!0,pointerCoordinates:this._POINTER_TOP,showFolderList:!1,showSetting:!1}};PopoverStore.prototype=Object.create(Store.prototype),PopoverStore.prototype._getPopoverPosition=function(e,t,n,i){var r=function(e,t,n,i){if(e.top<this._POPOVER_ELEMENT_HEIGHT)return!1;if($(window).height()-t.bottom<this._POPOVER_ELEMENT_HEIGHT)return!0;var r=Math.abs(i-e.top),o=Math.abs(i-t.top);return r<o-9||!(o+9<r)&&Math.abs(n-e.left)<Math.abs(n-t.right)}.bind(this);if(e){var o,s={},a=RangeFix.getClientRects(e),l=a[0],c=a[a.length-1];o=i?"UP"===i:r(l,c,t,n),s.pointerAtTop=o?(s.coordinates={top:a[0].top-this._POPOVER_IFRAME_HEIGHT,left:a[0].left-this._POPOVER_IFRAME_WIDTH/2},s.pointerCoordinates=this._POINTER_BOTTOM,!1):(s.coordinates={top:a[a.length-1].bottom+3,left:a[a.length-1].right-this._POPOVER_IFRAME_WIDTH/2},s.pointerCoordinates=this._POINTER_TOP,!0);var u=$(window).width();return u-s.coordinates.left<this._POPOVER_IFRAME_WIDTH/2-this._POPOVER_MARGIN?s.coordinates.left=u-this._POPOVER_IFRAME_WIDTH:s.coordinates.left<-this._POPOVER_MARGIN&&(s.coordinates.left=0),s}},PopoverStore.prototype._getFineTunedPopoverPos=function(e,t,n){e=e||0,t=t||0;var i=GistnoteDomUtil.getFineTunedRange();return i?this._getPopoverPosition(i,e,t,n):null},PopoverStore.prototype._mouseUpHandler=function(e,t){if(1===e.which){var n=e.clientX,i=e.clientY;setTimeout(function(){t(this._getFineTunedPopoverPos(n,i))}.bind(this),0)}else t(!1)},PopoverStore.prototype._clearPopoverStates=function(){this._setStates({popoverDisplayState:!1,lightedUpCircle:null,showFolderList:!1,note:null,highlightId:null,showSetting:!1})},PopoverStore.prototype._getHighlightMode=function(){return!GistnoteContentScriptApp.IS_TOP_FRAME||!(this._states.workspace&&this._states.workspace.extensionHighlightModeSettings&&!this._states.workspace.extensionHighlightModeSettings.highlighter)},PopoverStore.prototype.handleActions=function(e){var t=e.source,n=e.action;switch(n.actionType){case GeneralActionConstants.INIT_STORES:case SettingActionConstants.UPDATE_WORKSPACE:return void this._setStates({workspace:n.workspace});case PopoverActionConstants.BODY_MOUSE_DOWN:if(!this._getHighlightMode())return;!n.event.shiftKey&&1===n.event.which&&this._clearPopoverStates();break;case PopoverActionConstants.BODY_MOUSE_UP:return void this._mouseUpHandler(n.event,function(e){e?this._setStates({coordinates:e.coordinates,popoverDisplayState:!0,pointerAtTop:e.pointerAtTop,pointerCoordinates:e.pointerCoordinates}):this._setStates({popoverDisplayState:!1}),this._emitChange(n.actionType)}.bind(this));case HighlightActionConstants.CLICKED_HIGHLIGHT:(r=this._getPopoverPosition(n.selectionRange,n.mouseX,n.mouseY))&&this._setStates({coordinates:r.coordinates,popoverDisplayState:!0,pointerAtTop:r.pointerAtTop,pointerCoordinates:r.pointerCoordinates,lightedUpCircle:n.colorNum,note:n.highlight.note,highlightId:n.highlightId});break;case PopoverActionConstants.CREATE_HIGHLIGHT:this._clearPopoverStates();break;case PopoverActionConstants.UPDATE_HIGHLIGHT_COLOR:this._setStates({lightedUpCircle:n.colorNum});break;case PopoverActionConstants.DELETE_CLICKED_HIGHLIGHT:case PopoverActionConstants.HIDE_POPOVER:this._clearPopoverStates();break;case PopoverActionConstants.TEMP_HIDE_POPOVER:this._setStates({popoverDisplayState:!1});break;case PopoverActionConstants.TOGGLE_FOLDER_DROPDOWN:case PopoverActionConstants.POPOVER_CREATE_FOLDER:case HighlightActionConstants.SWITCH_FOLDER:this._setStates({showFolderList:!this._states.showFolderList});break;case PopoverActionConstants.SCROLL:if(this._states.highlightId){var i=GistnoteHighlighter.getRange(this._states.highlightId);r=this._getPopoverPosition(i,0,0,n.scrolledDirection)}else r=this._getFineTunedPopoverPos(0,0,n.scrolledDirection);r?this._setStates({coordinates:r.coordinates,popoverDisplayState:!0,pointerAtTop:r.pointerAtTop,pointerCoordinates:r.pointerCoordinates}):this._setStates({popoverDisplayState:!1});break;case PopoverActionConstants.SELECTION_CHANGED:(r=this._getFineTunedPopoverPos())&&this._setStates({coordinates:r.coordinates,popoverDisplayState:!0,pointerAtTop:r.pointerAtTop,pointerCoordinates:r.pointerCoordinates});break;case PopoverActionConstants.TOUCH_END:var r;(r=this._getFineTunedPopoverPos(n.event.clientX,n.event.clientY))?this._setStates({coordinates:r.coordinates,popoverDisplayState:!0,pointerAtTop:r.pointerAtTop,pointerCoordinates:r.pointerCoordinates}):this._setStates({popoverDisplayState:!1});break;case PopoverActionConstants.POPOVER_TOGGLE_SETTING:this._setStates({showSetting:n.show});break;default:return!0}return this._debug("[PopoverStore] handled "+t+": "+n.actionType),this._emitChange(n.actionType),!0};var SidebarStore=function(e){Store.call(this,e),this._states={sidebarDisplayState:SidebarDisplayStateConstants.HIDDEN,sidebarMenuDisplayState:!1,locationPath:{path:SidebarLocationPathConstants.SIGNUP,errorMessage:""},hasUser:!1,hasFolderList:!1,hasActiveFolder:!1,connectionStatus:!0}};SidebarStore.prototype=Object.create(Store.prototype),SidebarStore.prototype._getLocationPath=function(e,t,n){return e&&(t||n)?SidebarLocationPathConstants.MAIN:e&&!t?SidebarLocationPathConstants.CONNECTING:SidebarLocationPathConstants.SIGNUP},SidebarStore.prototype.handleActions=function(e){var t=e.source,n=e.action;switch(n.actionType){case SettingActionConstants.TOGGLE_CONNECTION_STATUS:n.connectionStatus?this._setStates({connectionStatus:n.connectionStatus}):this._setStates({locationPath:{path:SidebarLocationPathConstants.CONNECTING,errorMessage:""}});break;case SettingActionConstants.UPDATE_USER:var i=null!=n.user,r=!!i&&this._states.hasActiveFolder,o=!!i&&this._states.hasFolderList,s=this._getLocationPath(i,r,o);this._setStates({locationPath:{path:s,errorMessage:""},hasUser:i,hasActiveFolder:r,hasFolderList:o});break;case SettingActionConstants.UPDATE_FOLDER:r=null!=n.activeFolder,o=null!=n.folderList;s=this._getLocationPath(this._states.hasUser,r,o);this._setStates({locationPath:{path:s,errorMessage:""},hasActiveFolder:r,hasFolderList:o});break;case SidebarActionConstants.SET_SIDEBAR_DISPLAY_STATUS:this._setStates({sidebarDisplayState:n.status||SidebarDisplayStateConstants.HIDDEN});break;case SidebarActionConstants.SHOW_LOGIN_MESSAGE:this._setStates({locationPath:{path:SidebarLocationPathConstants.LOGIN,errorMessage:n.errorMessage}});break;case SidebarActionConstants.SHOW_SIGNUP_MESSAGE:this._setStates({locationPath:{path:SidebarLocationPathConstants.SIGNUP,errorMessage:n.errorMessage}});break;case SidebarActionConstants.SHOW_RESET_PASSWORD_MESSAGE:this._setStates({locationPath:{path:SidebarLocationPathConstants.RESET_PASSWORD,errorMessage:n.errorMessage}});break;case SidebarActionConstants.SHOW_SIDEBAR_MENU:this._states.sidebarDisplayState===SidebarDisplayStateConstants.HIDDEN?this._setStates({sidebarMenuDisplayState:!0,sidebarDisplayState:SidebarDisplayStateConstants.SHOWN}):this._setStates({sidebarMenuDisplayState:!0});break;case PopoverActionConstants.BODY_MOUSE_DOWN:case SidebarActionConstants.HIDE_SIDEBAR_MENU:this._setStates({sidebarMenuDisplayState:!1});break;case PopoverActionConstants.POPOVER_CREATE_FOLDER:break;case SidebarActionConstants.SET_CONNECTING_PAGE:this._setStates({locationPath:{path:SidebarLocationPathConstants.CONNECTING,errorMessage:""}});break;default:return!0}return this._debug("[SidebarStore] handled "+t+": "+n.actionType),this._debug(n),this._emitChange(n.actionType),!0};var SettingStore=function(e){Store.call(this,e),this._WEAVA_COLOR_PLATTE=["#FFCAD7","#FFDE70","#FFFB78","#D1FF61","#B4FFEB","#F8CEFF","#A9DFFF","#B9BEFF","#FFA4BE","#DADADA"],this._DEFAULT_COLOR_CODES=this._WEAVA_COLOR_PLATTE.slice(0,5),this._states={user:null,token:null,customToken:null,connectionStatus:!0,currentUrl:"",activeFolder:null,colorCodes:this._DEFAULT_COLOR_CODES.slice(),COLOR_PROFILE:this._WEAVA_COLOR_PLATTE.slice(),folderList:{},workspace:null,onboarding:null,statistics:null,subscription:null,questionnaire:null,firebaseChangeEvent:null,localAccessModalShown:!1,paymentModelShown:!1,upgradeAnonymousModelShown:!1,socialShareModalShown:!1,shareWebsiteModalShown:!1,sharingFolderUserMeta:null,sharingFolderInvitedMeta:null,activeFolderUserMeta:null,folderInvitations:null}};SettingStore.prototype=Object.create(Store.prototype),SettingStore.prototype._getColorCodesFromFolder=function(e){return e&&e.colorCodes?e.colorCodes:this._DEFAULT_COLOR_CODES.slice()},SettingStore.prototype.handleActions=function(e){var t=e.source,n=e.action;switch(n.actionType){case SettingActionConstants.SHOW_UPGRADE_ANONYMOUS_MODAL:this._setStates({upgradeAnonymousModelShown:!0});break;case SettingActionConstants.HIDE_UPGRADE_ANONYMOUS_MODAL:this._setStates({upgradeAnonymousModelShown:!1});break;case SettingActionConstants.SHOW_PAYMENT_MODEL:this._setStates({paymentModelShown:!0});break;case SettingActionConstants.HIDE_PAYMENT_MODEL:this._setStates({paymentModelShown:!1});break;case SettingActionConstants.SHOW_SOCIAL_SHARE_MODEL:this._setStates({socialShareModalShown:!0});break;case SettingActionConstants.HIDE_SOCIAL_SHARE_MODEL:this._setStates({socialShareModalShown:!1});break;case SettingActionConstants.SHOW_SHARE_WEBSITE_MODEL:this._setStates({shareWebsiteModalShown:!0});break;case SettingActionConstants.HIDE_SHARE_WEBSITE_MODEL:this._setStates({shareWebsiteModalShown:!1});break;case SettingActionConstants.SHOW_LOCAL_ACCESS_MODAL:this._setStates({localAccessModalShown:!0});break;case SettingActionConstants.HIDE_LOCAL_ACCESS_MODAL:this._setStates({localAccessModalShown:!1});break;case SettingActionConstants.UPDATE_STRIPE:this._setStates({subscription:n.stripeData.plan&&"Free"!==n.stripeData.plan.name?n.stripeData:null});break;case SettingActionConstants.UPDATE_ONBOARDING:this._setStates({onboarding:n.onboarding});break;case SettingActionConstants.UPDATE_QUESTIONNAIRE:this._setStates({questionnaire:n.questionnaire});break;case SettingActionConstants.UPDATE_WORKSPACE:this._setStates({workspace:n.workspace});break;case SettingActionConstants.TOGGLE_CONNECTION_STATUS:this._setStates({connectionStatus:n.connectionStatus});break;case SettingActionConstants.UPDATE_CURRENT_URL:var i=UrlUtil.getOriginalUrlForPDF(document.URL);this._setStates({currentUrl:i});break;case SettingActionConstants.UPDATE_FOLDER:var r={colorCodes:this._getColorCodesFromFolder(n.activeFolder)};return r.activeFolder=n.activeFolder,r.folderList=n.folderList,r.sharingFolderUserMeta=n.sharingFolderUserMeta,r.sharingFolderInvitedMeta=n.sharingFolderInvitedMeta,r.activeFolderUserMeta=n.activeFolderUserMeta,r.folderInvitations=n.folderInvitations,void this._setStates(r);case SettingActionConstants.UPDATE_USER:n.user?this._setStates({user:n.user,token:n.token,customToken:n.customToken,userMeta:n.userMeta}):this._setStates({user:n.user,token:n.token,customToken:n.customToken,activeFolder:null,colorCodes:this._getColorCodesFromFolder(null),folderList:{}});break;default:return!0}return this._debug("[SettingStore] handled "+t+": "+n.actionType),this._debug(this._states),this._emitChange(n.actionType),!0};var HighlightStore=function(e){Store.call(this,e),this._states={},this._initUIStates(),this._initRenderStates(),this._initModel()};HighlightStore.prototype=Object.create(Store.prototype),HighlightStore.prototype._initUIStates=function(){this._setStates({selectedText:"",startStr:"",endStr:"",selectionRange:null})},HighlightStore.prototype._initRenderStates=function(){this._setStates({deletingLegacyHighlights:!1,clickedHighlightId:null,redrawPageNumber:null})},HighlightStore.prototype._initModel=function(){this._setStates({highlights:{},cachedPathToHTML:{},activeFolder:null,website:null})},HighlightStore.prototype._clearStates=function(){this._initUIStates(),this._initRenderStates(),this._initModel()},HighlightStore.prototype._getStatesFromFolder=function(e,t){var n,i,r=e.activeWebsite;return{activeFolder:e,cachedPathToHTML:r?(n=r.savedPathToHTML,i={},_.forEach(n,function(e){i[e.path]=e.html}),i):{},highlights:r&&r.highlights?r.highlights:{},website:r,redrawPageNumber:null}},HighlightStore.prototype._checkMigration=function(){var n=function(e){var t,n,i=GistnoteHighlighter.getRange(e);return n=i.collapsed?t="":(t=GistnoteDomUtil.getTextBeforeRange(i),GistnoteDomUtil.getTextAfterRange(i)),{startStr:t,endStr:n}}.bind(this),i=function(){if(this._states.deletingLegacyHighlights)return!1;this._states.deletingLegacyHighlights=!0;var e=[];for(var t in this._states.highlights)this._states.highlights[t].status&&"TO_BE_REMOVED"===this._states.highlights[t].status&&e.push(t);for(var n=0;n<e.length;n++){var i=e[n];this._deleteHighlight(i)}this._states.deletingLegacyHighlights=!1}.bind(this),e=function(){for(var e in GistnoteHighlighter.deleteAllHighlightsInDom(),GistnoteHighlighter.createAllHighlightsInDomDeprecated(this._states.cachedPathToHTML),i(),this._states.highlights)if(this._states.highlights.hasOwnProperty(e)){var t=n(e);this._states.highlights[e].startStr=t.startStr,this._states.highlights[e].endStr=t.endStr}this._states.cachedPathToHTML={}}.bind(this);this._states.cachedPathToHTML&&0!==Object.keys(this._states.cachedPathToHTML).length&&(MessageSender.sendLogEventMessage("[MIGRATION] HIGHLIGHT_V_0.0.31"),e(),MessageSender.sendUpdateHighlightsInDatabaseMessage(this._states.highlights,this._states.cachedPathToHTML))},HighlightStore.prototype._createHighlight=function(e,t,n){var i=GistnoteHighlighter.createOneHighlightInDom(this._states.selectionRange,e,t,n).el;if(GistnoteContentScriptApp.PDF_MODE)var r=GistnoteHighlighter.getContainingPdfPageNumber(i);var o={colorNum:t,text:this._states.selectedText,startStr:this._states.startStr,endStr:this._states.endStr,date:Date.now(),pdfPageNumber:r};return window.getSelection().removeAllRanges(),o},HighlightStore.prototype._createImage=function(e,t){this._states.highlights[e]={type:"image",date:Date.now(),url:t}},HighlightStore.prototype._updateHighlightColor=function(e){if(!(this._states.clickedHighlightId in this._states.highlights))throw"The highlight does not exist in database";this._states.highlights[this._states.clickedHighlightId].colorNum=e},HighlightStore.prototype._deleteHighlight=function(e){delete this._states.highlights[e],GistnoteHighlighter.deleteHighlightInDom(e)},HighlightStore.prototype.handleActions=function(e){var t=e.source,n=e.action;switch(n.actionType){case GeneralActionConstants.INIT_STORES:case SettingActionConstants.UPDATE_FOLDER:if(n.activeFolder){var i=UrlUtil.getOriginalUrlForPDF(document.URL);r=this._getStatesFromFolder(n.activeFolder,i),this._setStates(r)}else this._clearStates();this._checkMigration();break;case SettingActionConstants.UPDATE_USER:n.user?this._checkMigration():this._clearStates();break;case PopoverActionConstants.BODY_MOUSE_UP:case PopoverActionConstants.TOUCH_END:null===(r=GistnoteDomUtil.getSelectionStatus()).selectionRange&&GistnoteHighlighter.isGistNote(n.event.target)||(r.clickedHighlightId=null),this._setStates(r);break;case PopoverActionConstants.SELECTION_CHANGED:var r=GistnoteDomUtil.getSelectionStatus();this._setStates(r);break;case HighlightActionConstants.CLICKED_HIGHLIGHT:this._setStates({clickedHighlightId:n.highlightId,selectedText:n.selectedText,selectionRange:n.selectionRange});break;case PopoverActionConstants.UPDATE_HIGHLIGHT_COLOR:this._updateHighlightColor(n.colorNum),MessageSender.sendUpdateHighlightColorInDatabaseMessage(this._states.clickedHighlightId,n.colorNum);break;case PopoverActionConstants.CREATE_HIGHLIGHT:this._states.clickedHighlightId=n.highlightId;var o=this._createHighlight(n.highlightId,n.colorNum,n.colorCode);this._states.highlights[n.highlightId]=o,MessageSender.sendCreateHighlightInDatabaseMessage(n.highlightId,o,n.isOnboardingPage,document.getElementsByTagName("html")[0].innerHTML);break;case PopoverActionConstants.DELETE_CLICKED_HIGHLIGHT:this._deleteHighlight(this._states.clickedHighlightId),MessageSender.sendDeleteHighlightInDatabaseMessage(this._states.clickedHighlightId);break;case HighlightActionConstants.SWITCH_FOLDER:if(this._states.clickedHighlightId){var s=this._states.highlights[this._states.clickedHighlightId];s.highlightId=this._states.clickedHighlightId,MessageSender.sendMoveHighlightAndSwitchFolderMessage(this._states.activeFolder.folderId,n.folderId,this._states.activeFolder.activeWebsite,s)}else MessageSender.sendSwitchFolderMessage(n.folderId);break;case HighlightActionConstants.DELETE_HIGHLIGHT:this._deleteHighlight(n.highlightId),MessageSender.sendDeleteHighlightInDatabaseMessage(n.highlightId);break;case HighlightActionConstants.RENDER_HIGHLIGHTS:this._setStates({redrawPageNumber:n.pageNumber});break;case ImageClipperActionConstants.MOUSE_CLICK_BUTTON:this._createImage(n.imageId,n.url);break;default:return!0}return this._debug("[HighlightStore] handled "+t+": "+n.actionType),this._debug(this._states),this._emitChange(n.actionType),!0};var ImageClipperStore=function(e){Store.call(this,e),this._states={url:null}};ImageClipperStore.prototype=Object.create(Store.prototype),ImageClipperStore.prototype.handleActions=function(e){var t=e.source,n=e.action;switch(n.actionType){case ImageClipperActionConstants.HOVER_OVER_IMAGE:this._setStates({url:n.event.target.src});break;case ImageClipperActionConstants.MOUSE_LEAVE_IMAGE:break;default:return!0}return this._debug("[ImageClipperStore] handled "+t+": "+n.actionType),this._emitChange(),!0};var GistnoteUI={init:function(e,t){$("#"+UiConstants.UI_WRAPPER_ID).remove(),$("<div>",{id:UiConstants.UI_WRAPPER_ID}).appendTo("body"),this._settingStore=new SettingStore(StaticConstants.SETTING_DEBUG_MODE),this._notificationStore=new NotificationStore(StaticConstants.NOTIFICATION_DEBUG_MODE),this._sidebarStore=new SidebarStore(StaticConstants.SIDEBAR_DEBUG_MODE),this._popoverStore=new PopoverStore(StaticConstants.POPOVER_DEBUG_MODE),this._highlightStore=new HighlightStore(StaticConstants.HIGHLIGHT_DEBUG_MODE),this._ImageClipperStore=new ImageClipperStore(StaticConstants.CLIP_BUTTON_DEBUG_MODE);var n=window===window.top;if(n&&new NotificationView([this._notificationStore,this._settingStore],UiConstants.UI_WRAPPER_ID,UiConstants.NOTIFICATION_IFRAME_ID,SourcePathConstants.NOTIFICATION_SRC,StaticConstants.NOTIFICATION_DEBUG_MODE),!t&&n&&new SidebarView([this._sidebarStore,this._settingStore],UiConstants.UI_WRAPPER_ID,UiConstants.SIDEBAR_IFRAME_ID,SourcePathConstants.SIDEBAR_SRC,StaticConstants.SIDEBAR_DEBUG_MODE),new PopoverView([this._popoverStore,this._settingStore],UiConstants.UI_WRAPPER_ID,UiConstants.POPOVER_IFRAME_ID,SourcePathConstants.POPOVER_SRC,StaticConstants.POPOVER_DEBUG_MODE),new HighlightView([this._highlightStore,this._settingStore],StaticConstants.HIGHLIGHT_DEBUG_MODE),new PaymentView([this._settingStore],UiConstants.UI_WRAPPER_ID,UiConstants.PAYMENT_IFRAME_ID,SourcePathConstants.PAYMENT_SRC,StaticConstants.PAYMENT_DEBUG_MODE),new SocialShareView([this._settingStore],UiConstants.UI_WRAPPER_ID,UiConstants.SOCIAL_SHARE_IFRAME_ID,SourcePathConstants.SOCIAL_SHARE_SRC,StaticConstants.SOCIAL_SHARE_DEBUG_MODE),new ShareWebsiteView([this._settingStore],UiConstants.UI_WRAPPER_ID,UiConstants.SHARE_WEBSITE_IFRAME_ID,SourcePathConstants.SHARE_WEBSITE_SRC,StaticConstants.SHARE_WEBSITE_DEBUG_MODE),new UpgradeAnonymousView([this._settingStore],UiConstants.UI_WRAPPER_ID,UiConstants.UPGRADE_ANONYMOUS_ID,SourcePathConstants.UPGRADE_ANONYMOUS_SRC,StaticConstants.UPGRADE_ANONYMOUS_DEBUG_MODE),new LocalFileAccessView([this._settingStore],UiConstants.UI_WRAPPER_ID,UiConstants.LOCAL_FILE_ACCESS_IFRAME_ID,SourcePathConstants.LOCAL_FILE_ACCESS_SRC,StaticConstants.LOCAL_FILE_ACCESS_DEBUG_MODE),GistnoteContentScriptApp.IS_TOP_FRAME&&-1===document.URL.indexOf("weavatools")&&new GuideView([this._settingStore],UiConstants.UI_WRAPPER_ID,UiConstants.GUIDE_VIEW_ID,SourcePathConstants.GUIDE_VIEW_SRC,StaticConstants.GUIDE_VIEW_DEBUG_MODE),new ImageClipperView([this._ImageClipperStore,this._settingStore],UiConstants.UI_WRAPPER_ID,StaticConstants.CLIP_BUTTON_DEBUG_MODE),"DEFAULT"===e){Logger.debug("Default Pdf Mode");var i=new HighlightPdfButton("body");new HighlightPdfButtonManager(window,i),new OnBoardArrow("body")}},destroy:function(){Logger.debug("Destroying Weava UI..."),$("body").off(".weava"),$(document).off(".weava"),$(window).off(".weava"),GistnoteContentScriptApp.PDF_MODE&&$("#viewerContainer").off(".weava");try{$("#"+UiConstants.UI_WRAPPER_ID).remove()}catch(e){Logger.warn(e)}try{$("#clipperButton").remove()}catch(e){Logger.warn(e)}try{$("#gistnote-highlight-pdf-button").remove()}catch(e){Logger.warn(e)}try{$("#"+UiConstants.POPOVER_IFRAME_ID).remove()}catch(e){Logger.warn(e)}if(this._highlightStore){GistnoteDispatcher.registeredCallbacks=[];try{this._highlightStore.unload(),this._notificationStore.unload(),this._sidebarStore.unload(),this._settingStore.unload(),this._popoverStore.unload(),this._ImageClipperStore.unload(),delete this._highlightStore,delete this._notificationStore,delete this._sidebarStore,delete this._settingStore,delete this._popoverStore,delete this._ImageClipperStore}catch(e){Logger.warn(e)}}}},GistnoteContentScriptApp={extensionInitTime:null,_unloaded:!1,PDF_MODE:!1,TAB_ID:null,IS_TOP_FRAME:window===window.top,init:function(e){window.onunload=function(){GistnoteContentScriptApp._unloaded=!0};var t=chrome.runtime.getManifest().version;if(Logger.useDefaults(),Logger.setLevel(Logger[StaticConstants.LOG_LEVEL]),e||(Logger.debug("*******************************************************************"),Logger.debug("************ Weava Content Script App Initiating... ************"),Logger.debug("*******************************************************************"),Logger.debug("               Version: "+t+"      Environment: "+StaticConstants.ENVIRONMENT),Logger.debug("*******************************************************************"),Logger.debug("***** Running at Frame: "+document.URL),Logger.debug("\n")),GistnoteContentScriptApp.extensionInitTime=Date.now(),document.getElementById("weava-permanent-marker")?$("#weava-permanent-marker").attr("date",GistnoteContentScriptApp.extensionInitTime):$("<div>",{id:"weava-permanent-marker",date:GistnoteContentScriptApp.extensionInitTime}).appendTo("body"),StaticConstants.SETUP_RAVEN)try{Raven.config(StaticConstants.RAVEN_API_KEY,{release:t,environment:StaticConstants.ENVIRONMENT}).install()}catch(e){Logger.error(e)}StaticConstants.SERVER_BASE_PATH&&(MessageSender.server=StaticConstants.SERVER_BASE_PATH),function(){var i=Date.now();MessageSender.sendCheckTabSettingMessage(function(e){this.TAB_ID=e.tabId;var t=(Date.now()-i)/1e3;if(8<=t&&MessageSender.sendLogEventMessage("ABNORMAL_CASE",{reason:"CHECK_TAB_RESPONSE_TIME_TOO_LONG",value:t,url:document.URL}),$("[id]").each(function(){if(-1!==this.id.indexOf("weava")||-1!==this.id.indexOf("gistnote")){var e=$('[id="'+this.id+'"]');1<e.length&&e[0]==this&&MessageSender.sendLogEventMessage("ABNORMAL_CASE",{reason:"DUPLICATE_DOM_ID",value:this.id,url:document.URL})}}),e.isBlacklisted)Logger.warn("This website is banned by GistNote: "+document.URL);else{if(e.isActive){var n=0===document.URL.indexOf("file:///");"PDF_JS"===e.pdfMode&&(Logger.debug("PDF JS MODE: inside webapp? ",e.isInsideWebApp),this.PDF_MODE=!0,PdfMessageHandler.init(e.isInsideWebApp)),IframeMessageHandler.init(),GistnoteUI.init(e.pdfMode,n),ChromeLocalStorageHandler.init()}else GistnoteContentScriptApp._unloaded=!0;MessageHandler.initiated||MessageHandler.init()}}.bind(this))}.bind(this)()},reload:function(){this.IS_TOP_FRAME&&this._unloaded&&(this.init(!0),this._unloaded=!1)},destroy:function(){if(this.IS_TOP_FRAME&&!GistnoteContentScriptApp._unloaded){try{GistnoteUI.destroy(),IframeMessageHandler.destroy(),ChromeLocalStorageHandler.destroy()}catch(e){}GistnoteContentScriptApp._unloaded=!0}}};$(function(){var e=window===window.top;if(-1===document.URL.indexOf("chrome-extension://cbnaodkpfinfiipjblikofhlhlcickei"))try{if(!e&&document.URL===window.top.document.URL)return;if(!e&&(window.innerHeight<300||window.innerWidth<300))return;GistnoteContentScriptApp.init()}catch(e){return}else GistnoteContentScriptApp.init()}),-1!==document.URL.indexOf("facebook.com/sharer")&&-1!==document.URL.indexOf("weava")&&$(window).on("load",function(){var e="Check out this cool productivity tool for research! I've been using Weava and it's a huge time-saver. Weava allows me to highlight and organize articles & PDFs easily for research and studies. You should definitely try it out and let me know what you think :) My referral code: "+purl(document.URL).data.param.query.uid;document.getElementsByClassName("mentionsHidden")[0].value=e,document.getElementsByClassName("uiTextareaNoResize uiTextareaAutogrow input mentionsTextarea textInput")[0].value=e,document.getElementsByClassName("uiTextareaNoResize uiTextareaAutogrow input mentionsTextarea textInput")[0].focus(),document.getElementsByClassName("uiContextualLayerPositioner uiLayer")[0].style.display="none",document.getElementById("u_0_a").click(),document.getElementsByClassName("_54nc _54nu _48t_")[1].click(),document.getElementsByClassName("_54nc _54nu _48t_")[3].style.display="none",document.getElementsByClassName("uiContextualLayerPositioner uiLayer")[0].style.display="block";var t=function(e){MessageSender.sendActualFacebookShareMessage(),document.getElementById("u_0_1v").removeEventListener("click",t),document.getElementById("u_0_1v").click(),e.stopPropagation(),e.preventDefault()};document.getElementById("u_0_1v").addEventListener("click",t)}),$(window).on("load",function(){document.getElementById("developer_info_glif")&&-1!==document.getElementById("developer_info_glif").innerText.toLowerCase().indexOf("weava")&&(console.log("weava google auth",document.getElementById("scope0").innerText),0===document.getElementById("scope0").innerText.indexOf("View your email")&&(document.getElementById("submit_approve_access").addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),MessageSender.sendLogEventMessage("ACCEPT_GMAIL_PERMISSION")}),document.getElementById("submit_deny_access").addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),MessageSender.sendLogEventMessage("REJECT_GMAIL_PERMISSION")})))});